
Arguments passed: api org1 org2
Arguments required: Fabric test interface (cli|api|...)  First organization  Second organization
checkArgsPassed: args required: 3 Fabric test interface (cli|api|...)  First organization  Second organization args passed: 3 api org1 org2
local_error=0 ; NO_RED_OUTPUT=false ./create-channel.sh testchannel16113-02 org2 ; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-exit-code.sh ; local_error=$(($local_error | $?)) ; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-exists.sh testchannel16113-02 org2 ; local_error=$(($local_error | $?)); [[ $local_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 1_api Test(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel16113-02 org2 VERIFY: test-exit-code.sh VERIFY: test-channel-exists.sh testchannel16113-02 org2
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MH0.yHunOUjjFB8bBjBGR25fGs8270jW8z-7dd376sXAys4"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MH0.yHunOUjjFB8bBjBGR25fGs8270jW8z-7dd376sXAys4", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MH0.yHunOUjjFB8bBjBGR25fGs8270jW8z-7dd376sXAys4
queryContainerNetworkSettings returns: 8051
Step 1_api: exit code 0
local_error=0 ; NO_RED_OUTPUT=false ./add-org-to-channel.sh testchannel16113-02 org2 org1 ; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-exit-code.sh ; local_error=$(($local_error | $?)) ; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-add-org.sh testchannel16113-02 org2 org1 ; local_error=$(($local_error | $?)); [[ $local_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 2_api Test(B[m
[1m[37m---------------------------(B[m
RUNTEST: add-org-to-channel.sh testchannel16113-02 org2 org1 VERIFY: test-exit-code.sh VERIFY: test-channel-add-org.sh testchannel16113-02 org2 org1
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MX0.oaRY0vQ50UuSyl6eoDz2mlZHHbGFsyDk_Rg8ONy8Ibk"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MX0.oaRY0vQ50UuSyl6eoDz2mlZHHbGFsyDk_Rg8ONy8Ibk", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MX0.oaRY0vQ50UuSyl6eoDz2mlZHHbGFsyDk_Rg8ONy8Ibk
queryContainerNetworkSettings returns: 7051
Step 2_api: exit code 0
local_error=0 ; NO_RED_OUTPUT=false ./join-channel.sh testchannel16113-02 org1 ; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-exit-code.sh ; local_error=$(($local_error | $?)) ; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-join-channel.sh testchannel16113-02 org1 ; local_error=$(($local_error | $?)); [[ $local_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 3_api Test(B[m
[1m[37m---------------------------(B[m
RUNTEST: join-channel.sh testchannel16113-02 org1 VERIFY: test-exit-code.sh VERIFY: test-join-channel.sh testchannel16113-02 org1
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MX0.4BispATAFdomiiOsA37m7yrU1ELjR3l3NAVz_TBGrHU"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MX0.4BispATAFdomiiOsA37m7yrU1ELjR3l3NAVz_TBGrHU", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc3MzU5MX0.4BispATAFdomiiOsA37m7yrU1ELjR3l3NAVz_TBGrHU
queryContainerNetworkSettings returns: 7051
Step 3_api: exit code 0
[1;36mCreating [testchannel26032-02] channel in [org2.exmple.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjI0M30.S0auNQtuT3R98U2opnYaGR6LIyjJ3fUWc_HdThDjqBI"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjI0M30.S0auNQtuT3R98U2opnYaGR6LIyjJ3fUWc_HdThDjqBI", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjI0M30.S0auNQtuT3R98U2opnYaGR6LIyjJ3fUWc_HdThDjqBI
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels {"channelId":"testchannel26032-02","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjI0M30.S0auNQtuT3R98U2opnYaGR6LIyjJ3fUWc_HdThDjqBI
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}]200 _ result
body is [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}], code is 200
[{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}]
setExitCode: 0
[1;32mOK: Channel [testchannel26032-02] creation run sucsessfuly.[m[m[m
[1;36mCreating [testchannel26032-02] channel in [org2.exmple.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjQyOH0.jOX1VgLig8_Vy-lglNCLgLNFKxahspQeQk6oZFYNPnw"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjQyOH0.jOX1VgLig8_Vy-lglNCLgLNFKxahspQeQk6oZFYNPnw", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjQyOH0.jOX1VgLig8_Vy-lglNCLgLNFKxahspQeQk6oZFYNPnw
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels {"channelId":"testchannel26032-02","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjQyOH0.jOX1VgLig8_Vy-lglNCLgLNFKxahspQeQk6oZFYNPnw
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}]200 _ result
body is [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}], code is 200
[{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}]
setExitCode: 0
[1;32mOK: Channel [testchannel26032-02] creation run sucsessfuly.[m[m[m
[1;36mCreating [testchannel26032-02] channel in [org2.exmple.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjYwMn0.8cCOFtpZIzlt1VgPUpZhftdDEGeCar6D_egNoBSYsFQ"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjYwMn0.8cCOFtpZIzlt1VgPUpZhftdDEGeCar6D_egNoBSYsFQ", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjYwMn0.8cCOFtpZIzlt1VgPUpZhftdDEGeCar6D_egNoBSYsFQ
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels {"channelId":"testchannel26032-02","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njc4NjYwMn0.8cCOFtpZIzlt1VgPUpZhftdDEGeCar6D_egNoBSYsFQ
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}]200 _ result
body is [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}], code is 200
[{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.exmple.com:8051","name":"peer0.org2.exmple.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.exmple.com:8051","grpc.default_authority":"peer0.org2.exmple.com:8051"}},"isProposalResponse":true}]
setExitCode: 0
[1;32mOK: Channel [testchannel26032-02] creation run sucsessfuly.[m[m[m
[1;36m
Creating the [testchannel4984-02] channel for org2.exmple.com...[m[m[m
queryContainerNetworkSettings returns: 8051
eval ./channel-create.sh testchannel4984-02
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh testchannel4984-02[m[m[m
exmple.com

Create channel org2 testchannel4984-02
--2020-04-14 13:20:49--  http://www.exmple.com/msp/admincerts/Admin@exmple.com-cert.pem
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/admincerts/Admin@exmple.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-14 13:20:49--  http://www.exmple.com/msp/cacerts/ca.exmple.com-cert.pem
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/cacerts/ca.exmple.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-14 13:20:49--  http://www.exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pem
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-14 13:20:49--  http://www.exmple.com/msp/orderer.exmple.com/tls/server.crt
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/orderer.exmple.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-14 13:20:49.994 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-14 13:20:50.047 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-14 13:20:50.096 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-14 13:20:50.096 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-14 13:20:50.096 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-14 13:20:50.096 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-14 13:20:50.096 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-14 13:20:50.096 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-14 13:20:50.096 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-14 13:20:50.097 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-14 13:20:50.097 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[33m2020-04-14 13:20:50.097 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-14 13:20:50.097 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-14 13:20:50.097 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-14 13:20:50.098 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[34m2020-04-14 13:20:50.098 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-14 13:20:50.149 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- error applying config update to existing channel 'testchannel4984-02': error authorizing update: error validating ReadSet: proposed update requires that key [Group]  /Channel/Application be at version 0, but it is currently at version 1
Execute: channel fetch config crypto-config/configtx/testchannel4984-02.pb -o orderer.exmple.com:7050 -c testchannel4984-02 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pem
[34m2020-04-14 13:20:50.214 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-14 13:20:50.216 UTC [cli.common] readBlock -> INFO 002[0m Received block: 0
[34m2020-04-14 13:20:50.217 UTC [cli.common] readBlock -> INFO 003[0m Received block: 0
[34m2020-04-14 13:20:50.217 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 0
>> Prepare config update from org2 for channel testchannel4984-02
>> org2 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c testchannel4984-02 -o orderer.exmple.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pem
[34m2020-04-14 13:20:50.490 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-14 13:20:50.499 UTC [channelCmd] update -> INFO 002[0m Successfully submitted channel update
setExitCode: 0
[1;36m
Creating the [testchannel4984-02] channel for org2.exmple.com...[m[m[m
queryContainerNetworkSettings returns: 8051
eval ./channel-create.sh testchannel4984-02
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh testchannel4984-02[m[m[m
exmple.com

Create channel org2 testchannel4984-02
--2020-04-14 13:21:31--  http://www.exmple.com/msp/admincerts/Admin@exmple.com-cert.pem
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/admincerts/Admin@exmple.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-14 13:21:31--  http://www.exmple.com/msp/cacerts/ca.exmple.com-cert.pem
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/cacerts/ca.exmple.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-14 13:21:31--  http://www.exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pem
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-14 13:21:31--  http://www.exmple.com/msp/orderer.exmple.com/tls/server.crt
Resolving www.exmple.com (www.exmple.com)... 172.19.0.4
Connecting to www.exmple.com (www.exmple.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/exmple.com/msp/orderer.exmple.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-14 13:21:31.172 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-14 13:21:31.221 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-14 13:21:31.269 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-14 13:21:31.269 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-14 13:21:31.269 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-14 13:21:31.270 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-14 13:21:31.270 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-14 13:21:31.270 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-14 13:21:31.270 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-14 13:21:31.270 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-14 13:21:31.270 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[33m2020-04-14 13:21:31.271 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-14 13:21:31.271 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-14 13:21:31.271 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-14 13:21:31.271 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[34m2020-04-14 13:21:31.271 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-14 13:21:31.323 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- error applying config update to existing channel 'testchannel4984-02': error authorizing update: error validating ReadSet: proposed update requires that key [Group]  /Channel/Application be at version 0, but it is currently at version 1
Execute: channel fetch config crypto-config/configtx/testchannel4984-02.pb -o orderer.exmple.com:7050 -c testchannel4984-02 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pem
[34m2020-04-14 13:21:31.393 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-14 13:21:31.395 UTC [cli.common] readBlock -> INFO 002[0m Received block: 1
[34m2020-04-14 13:21:31.396 UTC [cli.common] readBlock -> INFO 003[0m Received block: 1
[34m2020-04-14 13:21:31.397 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 1
>> Prepare config update from org2 for channel testchannel4984-02
configtxlator: error: Error computing update: error computing config update: no differences detected between original and updated config
>> org2 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c testchannel4984-02 -o orderer.exmple.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/exmple.com/msp/tlscacerts/tlsca.exmple.com-cert.pem
[34m2020-04-14 13:21:31.641 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- error applying config update to existing channel 'testchannel4984-02': error authorizing update: error validating ReadSet: proposed update requires that key [Group]  /Channel/Application/org2 be at version 0, but it is currently at version 1
[1;31mError occurred. See console output above.[m[1;33m[m
setExitCode: 1
[1;36mJoining org1.exmple.com to the [testchannel10662-02] channel using API...[m[m[m
[1;36mJoining org1.exmple.com to the [testchannel10662-02] channel using API...[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njg4ODQ5M30.GGUtt6fdzGyC1y4M3AA0qR0vCi4Qaxem1vEK7Tan_Gc"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njg4ODQ5M30.GGUtt6fdzGyC1y4M3AA0qR0vCi4Qaxem1vEK7Tan_Gc", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njg4ODQ5M30.GGUtt6fdzGyC1y4M3AA0qR0vCi4Qaxem1vEK7Tan_Gc
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels/testchannel10662-02 {"waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4Njg4ODQ5M30.GGUtt6fdzGyC1y4M3AA0qR0vCi4Qaxem1vEK7Tan_Gc
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.exmple.com:7051","name":"peer0.org1.exmple.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.exmple.com:7051","grpc.default_authority":"peer0.org1.exmple.com:7051"}},"isProposalResponse":true}]200 _ result
body is [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.exmple.com:7051","name":"peer0.org1.exmple.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.exmple.com:7051","grpc.default_authority":"peer0.org1.exmple.com:7051"}},"isProposalResponse":true}], code is 200
setExitCode: 2
[1;31mERROR! Exit code in not 0 but 2. See /home/kilpio/CodeLab/merge_test/fabric-starter/test/fs_network_test.log for logs.[m[m[m
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
[1;35m
Verifing if the [org2] has joined the [common] channel...[m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-16 08:41:38.577 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
setExitCode: 2
[1;31mERROR! Exit code in not 0 but 2. See /home/kilpio/CodeLab/merge_test/fabric-starter/test/fs_network_test.log for logs.[m[m[m
[1;35m
Verifing if the [org2] has joined the [common] channel...[m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-16 08:41:47.207 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
setExitCode: 2
[1;31mERROR! Exit code in not 0 but 2. See /home/kilpio/CodeLab/merge_test/fabric-starter/test/fs_network_test.log for logs.[m[m[m
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
[1;35m
Check containers running: [api ca cli couchdb.peer0 peer0 www] on [org1.example.com][m[m[m
queryContainerNetworkSettings returns:
jq: error (at <stdin>:1): null (null) has no keys
[1m[31mContainer not running: api(B[m
setExitCode: 1
[1m[31mContainer not running: ca(B[m
setExitCode: 1
[1m[31mContainer not running: cli(B[m
setExitCode: 1
[1m[31mContainer not running: couchdb.peer0(B[m
setExitCode: 1
[1m[31mContainer not running: peer0(B[m
setExitCode: 1
[1m[31mContainer not running: www(B[m
setExitCode: 1
[1;31mERROR! Exit code in not 0 but 1. See /home/kilpio/CodeLab/merge_test/fabric-starter/test/fs_network_test.log for logs.[m[m[m
Arguments passed: cli org1 org2
Arguments required: Fabric test interface (cli|api|...)  First organization  Second organization
checkArgsPassed: args required: 3 Fabric test interface (cli|api|...)  First organization  Second organization args passed: 3 cli org1 org2
run_error=0;verify_error=0; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/./test-containers-list.sh org1 example.com orderer www cli.orderer;verify_error=$(($run_error | $verify_error | $?));echo ${verify_error};[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 1_cli Test(B[m
[1m[37m---------------------------(B[m
VERIFY: ./test-containers-list.sh org1 example.com orderer www cli.orderer
Step 1_cli: exit code 1
run_error=0;verify_error=0; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/./test-containers-list.sh org1 org1.example.com api ca cli couchdb.peer0 peer0 www;verify_error=$(($run_error | $verify_error | $?));echo ${verify_error};[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 2_cli Test(B[m
[1m[37m---------------------------(B[m
VERIFY: ./test-containers-list.sh org1 org1.example.com api ca cli couchdb.peer0 peer0 www
Step 2_cli: exit code 1
run_error=0;verify_error=0; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/./test-containers-list.sh org2 org2.example.com api ca cli couchdb.peer0 peer0 www;verify_error=$(($run_error | $verify_error | $?));echo ${verify_error};[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 3_cli Test(B[m
[1m[37m---------------------------(B[m
VERIFY: ./test-containers-list.sh org2 org2.example.com api ca cli couchdb.peer0 peer0 www
Step 3_cli: exit code 1
run_error=0;verify_error=0; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-exists.sh common org1;verify_error=$(($run_error | $verify_error | $?));echo ${verify_error};[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 4_cli Test(B[m
[1m[37m---------------------------(B[m
VERIFY: test-channel-exists.sh common org1
queryContainerNetworkSettings returns:
Expect: testchannel637, got: 
setExitCode: 2
Step 4_cli: exit code 1
run_error=0;verify_error=0; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-exists.sh common org2;verify_error=$(($run_error | $verify_error | $?));echo ${verify_error};[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 5_cli Test(B[m
[1m[37m---------------------------(B[m
VERIFY: test-channel-exists.sh common org2
queryContainerNetworkSettings returns: 8051
Expect: testchannel637, got: null
setExitCode: 1
Step 5_cli: exit code 1
run_error=0;verify_error=0; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-join-channel.sh common org1;verify_error=$(($run_error | $verify_error | $?));echo ${verify_error};[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 6_cli Test(B[m
[1m[37m---------------------------(B[m
VERIFY: test-join-channel.sh common org1
queryContainerNetworkSettings returns:
Error: No such container: cli.org1.example.com
Channels org1 has joined to: 
Result: 
setExitCode: 2
Step 6_cli: exit code 1
run_error=0;verify_error=0; /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-join-channel.sh common org2;verify_error=$(($run_error | $verify_error | $?));echo ${verify_error};[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 7_cli Test(B[m
[1m[37m---------------------------(B[m
VERIFY: test-join-channel.sh common org2
queryContainerNetworkSettings returns: 8051
[34m2020-04-17 16:42:49.412 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Channels org2 has joined to: Channels peers has joined: 
common
Result: 
setExitCode: 2
Step 7_cli: exit code 1
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
Arguments passed: 
Arguments required: 
checkArgsPassed: args required: 0  args passed: 0 
