
[37m[1mcheckArgsPassed: Args required: Fabric test interface (cli|api|...), First organization, Second organization (B[m
Arguments passed: cli org1 org2
Arguments required: Fabric test interface (cli|api|...)  First organization  Second organization
checkArgsPassed: args required: 3 Fabric test interface (cli|api|...)  First organization  Second organization args passed: 3 cli org1 org2
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./create-channel.sh testchannel18908 org1 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel18908 org1;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 1_cli: Test 'Create new channel in ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel18908 org1 VERIFY: test-channel-accessible.sh testchannel18908 org1
[1;36m
Creating the [testchannel18908] channel for org1.example.com[m[m[m
queryContainerNetworkSettings returns: 7051
eval ./channel-create.sh testchannel18908
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh testchannel18908[m[m[m
example.com

Create channel org1 testchannel18908
--2020-04-28 09:26:43--  http://www.example.com/msp/admincerts/Admin@example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/admincerts/Admin@example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:43--  http://www.example.com/msp/cacerts/ca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/cacerts/ca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:43--  http://www.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:43--  http://www.example.com/msp/orderer.example.com/tls/server.crt
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/orderer.example.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-28 09:26:43.199 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-28 09:26:43.246 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:43.293 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:43.293 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:43.293 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-28 09:26:43.293 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:43.293 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-28 09:26:43.293 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:43.293 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:43.294 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:43.294 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[33m2020-04-28 09:26:43.294 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:43.294 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:43.295 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:43.295 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[34m2020-04-28 09:26:43.295 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-28 09:26:43.347 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:43.384 UTC [cli.common] readBlock -> INFO 002[0m Received block: 0
Execute: channel fetch config crypto-config/configtx/testchannel18908.pb -o orderer.example.com:7050 -c testchannel18908 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:43.466 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:43.468 UTC [cli.common] readBlock -> INFO 002[0m Received block: 0
[34m2020-04-28 09:26:43.469 UTC [cli.common] readBlock -> INFO 003[0m Received block: 0
[34m2020-04-28 09:26:43.469 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 0
>> Prepare config update from org1 for channel testchannel18908
>> org1 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c testchannel18908 -o orderer.example.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:43.751 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:43.759 UTC [channelCmd] update -> INFO 002[0m Successfully submitted channel update
setExitCode: 0
[1;32mOK: Channel [testchannel18908] creation request completed sucsessfuly[m[m[m
[1;35m
Verifing if the [testchannel18908] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-28 09:26:44.750 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:44.752 UTC [cli.common] readBlock -> INFO 002[0m Received block: 1
[34m2020-04-28 09:26:44.753 UTC [cli.common] readBlock -> INFO 003[0m Received block: 1
[34m2020-04-28 09:26:44.753 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 1
{
"channel_id": "testchannel18908",
"epoch": "0",
"extension": null,
"timestamp": "2020-04-28T09:26:43Z",
"tls_cert_hash": null,
"tx_id": "",
"type": 1,
"version": 0
}
cat /tmp/filelajZZe _testchannel18908_
Expect: testchannel18908, got: testchannel18908
setExitCode: 0
[1;32mOK: The channel [testchannel18908] exists and visible to [org1][m[m[m
Step 1_cli: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel18908 org2;verify_error=$(($run_error | $verify_error | ! $?));echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 2_cli: Test 'The channel created in ORG1 is not visible in ORG2'(B[m
[1m[37m---------------------------(B[m
VERIFY_NOT: test-channel-accessible.sh testchannel18908 org2
[1;35m
Verifing if the [testchannel18908] channel exists in [org2.example.com][m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-28 09:26:45.310 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:45.311 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/filemGTuIT _null_
Expect: testchannel18908, got: null
setExitCode: 1
[1;32mOK: The channel [testchannel18908] exists and visible to [org2][m[m[m
Step 2_cli: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh ^^^^^^testchannel18908 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh ^^^^^^testchannel18908 org1;verify_error=$(($run_error | $verify_error | ! $?));echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 3_cli: Test 'Can not create a channel with the incorrect name in ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh ^^^^^^testchannel18908 org1 VERIFY_NON_ZERO_EXIT_CODE: VERIFY_NOT: test-channel-accessible.sh ^^^^^^testchannel18908 org1
[1;36m
Creating the [^^^^^^testchannel18908] channel for org1.example.com[m[m[m
queryContainerNetworkSettings returns: 7051
eval ./channel-create.sh ^^^^^^testchannel18908
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh ^^^^^^testchannel18908[m[m[m
example.com

Create channel org1 ^^^^^^testchannel18908
--2020-04-28 09:26:47--  http://www.example.com/msp/admincerts/Admin@example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/admincerts/Admin@example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:47--  http://www.example.com/msp/cacerts/ca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/cacerts/ca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:47--  http://www.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:47--  http://www.example.com/msp/orderer.example.com/tls/server.crt
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/orderer.example.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-28 09:26:47.578 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-28 09:26:47.627 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:47.675 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:47.676 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[33m2020-04-28 09:26:47.676 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:47.676 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:47.676 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:47.676 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[34m2020-04-28 09:26:47.677 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-28 09:26:47.728 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- initializing configtx manager failed: bad channel ID: channel ID '^^^^^^testchannel18908' contains illegal characters
Execute: channel fetch config crypto-config/configtx/^^^^^^testchannel18908.pb -o orderer.example.com:7050 -c ^^^^^^testchannel18908 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:47.797 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:47.798 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{NOT_FOUND}
Error: can't read the block: &{NOT_FOUND}
configtxlator: error: open crypto-config/configtx/^^^^^^testchannel18908.pb: no such file or directory, try --help
jq: error: Could not open file crypto-config/configtx/^^^^^^testchannel18908.json: No such file or directory
>> Prepare config update from org1 for channel ^^^^^^testchannel18908
configtxlator: error: Error decoding: error decoding input: error unmarshaling intermediate JSON: EOF
>> org1 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c ^^^^^^testchannel18908 -o orderer.example.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:47.963 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- Failing initial channel config creation: mismatched channel IDs: 'testchannel18908' != '^^^^^^testchannel18908'
[1;31mError occurred. See console output above.[m[1;33m[m
setExitCode: 1
[1;32mOK: Channel [^^^^^^testchannel18908] creation request completed sucsessfuly[m[m[m
[1;35m
Verifing if the [^^^^^^testchannel18908] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-28 09:26:48.992 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:48.993 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{NOT_FOUND}
Error: can't read the block: &{NOT_FOUND}
null
cat /tmp/fileWzpBnH _null_
Expect: ^^^^^^testchannel18908, got: null
setExitCode: 1
[1;32mOK: The channel [^^^^^^testchannel18908] exists and visible to [org1][m[m[m
Step 3_cli: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh testchannel18908 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 4_cli: Test 'Can not create channel with the same name in ORG1 again'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel18908 org1 VERIFY_NON_ZERO_EXIT_CODE:
[1;36m
Creating the [testchannel18908] channel for org1.example.com[m[m[m
queryContainerNetworkSettings returns: 7051
eval ./channel-create.sh testchannel18908
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh testchannel18908[m[m[m
example.com

Create channel org1 testchannel18908
--2020-04-28 09:26:51--  http://www.example.com/msp/admincerts/Admin@example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/admincerts/Admin@example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:51--  http://www.example.com/msp/cacerts/ca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/cacerts/ca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:51--  http://www.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:51--  http://www.example.com/msp/orderer.example.com/tls/server.crt
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/orderer.example.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-28 09:26:51.146 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-28 09:26:51.194 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:51.241 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:51.242 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[33m2020-04-28 09:26:51.242 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:51.242 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:51.242 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:51.242 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[34m2020-04-28 09:26:51.243 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-28 09:26:51.295 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- error applying config update to existing channel 'testchannel18908': error authorizing update: error validating ReadSet: proposed update requires that key [Group]  /Channel/Application/org1 be at version 0, but it is currently at version 1
Execute: channel fetch config crypto-config/configtx/testchannel18908.pb -o orderer.example.com:7050 -c testchannel18908 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:51.360 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:51.361 UTC [cli.common] readBlock -> INFO 002[0m Received block: 1
[34m2020-04-28 09:26:51.362 UTC [cli.common] readBlock -> INFO 003[0m Received block: 1
[34m2020-04-28 09:26:51.362 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 1
>> Prepare config update from org1 for channel testchannel18908
configtxlator: error: Error computing update: error computing config update: no differences detected between original and updated config
>> org1 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c testchannel18908 -o orderer.example.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:51.623 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- error applying config update to existing channel 'testchannel18908': error authorizing update: error validating ReadSet: proposed update requires that key [Group]  /Channel/Application/org1 be at version 0, but it is currently at version 1
[1;31mError occurred. See console output above.[m[1;33m[m
setExitCode: 1
[1;32mOK: Channel [testchannel18908] creation request completed sucsessfuly[m[m[m
Step 4_cli: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh testchannel18908 org2 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel18908 org2;verify_error=$(($run_error | $verify_error | ! $?));echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 5_cli: Test 'Can not create a channel in ORG2 with the name of the channel created in ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel18908 org2 VERIFY_NON_ZERO_EXIT_CODE: VERIFY_NOT: test-channel-accessible.sh testchannel18908 org2
[1;36m
Creating the [testchannel18908] channel for org2.example.com[m[m[m
queryContainerNetworkSettings returns: 8051
eval ./channel-create.sh testchannel18908
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh testchannel18908[m[m[m
example.com

Create channel org2 testchannel18908
--2020-04-28 09:26:54--  http://www.example.com/msp/admincerts/Admin@example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/admincerts/Admin@example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:54--  http://www.example.com/msp/cacerts/ca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/cacerts/ca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:54--  http://www.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:54--  http://www.example.com/msp/orderer.example.com/tls/server.crt
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/orderer.example.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-28 09:26:54.496 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-28 09:26:54.543 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:54.597 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:54.597 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:54.597 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-28 09:26:54.597 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:54.597 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-28 09:26:54.597 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:54.597 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:54.598 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:54.598 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[33m2020-04-28 09:26:54.598 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:54.598 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:54.598 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:54.599 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[34m2020-04-28 09:26:54.599 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-28 09:26:54.656 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: FORBIDDEN -- config update for existing channel did not pass initial checks: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Writers' sub-policies to be satisfied: permission denied
Execute: channel fetch config crypto-config/configtx/testchannel18908.pb -o orderer.example.com:7050 -c testchannel18908 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:54.721 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:54.723 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
configtxlator: error: open crypto-config/configtx/testchannel18908.pb: no such file or directory, try --help
jq: error: Could not open file crypto-config/configtx/testchannel18908.json: No such file or directory
>> Prepare config update from org2 for channel testchannel18908
configtxlator: error: Error decoding: error decoding input: error unmarshaling intermediate JSON: EOF
>> org2 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c testchannel18908 -o orderer.example.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:54.884 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: FORBIDDEN -- config update for existing channel did not pass initial checks: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Writers' sub-policies to be satisfied: permission denied
[1;31mError occurred. See console output above.[m[1;33m[m
setExitCode: 1
[1;32mOK: Channel [testchannel18908] creation request completed sucsessfuly[m[m[m
[1;35m
Verifing if the [testchannel18908] channel exists in [org2.example.com][m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-28 09:26:55.887 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:55.889 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/fileP09laS _null_
Expect: testchannel18908, got: null
setExitCode: 1
[1;32mOK: The channel [testchannel18908] exists and visible to [org2][m[m[m
Step 5_cli: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./create-channel.sh testchannel18908-02 org2 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel18908-02 org2;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 6_cli: Test 'Create the second channel in ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel18908-02 org2 VERIFY: test-channel-accessible.sh testchannel18908-02 org2
[1;36m
Creating the [testchannel18908-02] channel for org2.example.com[m[m[m
queryContainerNetworkSettings returns: 8051
eval ./channel-create.sh testchannel18908-02
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh testchannel18908-02[m[m[m
example.com

Create channel org2 testchannel18908-02
--2020-04-28 09:26:58--  http://www.example.com/msp/admincerts/Admin@example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/admincerts/Admin@example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:58--  http://www.example.com/msp/cacerts/ca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/cacerts/ca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:58--  http://www.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:26:58--  http://www.example.com/msp/orderer.example.com/tls/server.crt
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/orderer.example.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-28 09:26:58.133 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-28 09:26:58.180 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:58.230 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:26:58.230 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:26:58.230 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-28 09:26:58.230 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:26:58.230 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-28 09:26:58.230 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:58.230 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:58.231 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:58.231 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[33m2020-04-28 09:26:58.231 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:26:58.231 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:26:58.231 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:26:58.232 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org2 in configtx.yaml
[34m2020-04-28 09:26:58.232 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-28 09:26:58.284 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:58.321 UTC [cli.common] readBlock -> INFO 002[0m Received block: 0
Execute: channel fetch config crypto-config/configtx/testchannel18908-02.pb -o orderer.example.com:7050 -c testchannel18908-02 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:58.397 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:58.400 UTC [cli.common] readBlock -> INFO 002[0m Received block: 0
[34m2020-04-28 09:26:58.401 UTC [cli.common] readBlock -> INFO 003[0m Received block: 0
[34m2020-04-28 09:26:58.402 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 0
>> Prepare config update from org2 for channel testchannel18908-02
>> org2 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c testchannel18908-02 -o orderer.example.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:26:58.712 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:58.721 UTC [channelCmd] update -> INFO 002[0m Successfully submitted channel update
setExitCode: 0
[1;32mOK: Channel [testchannel18908-02] creation request completed sucsessfuly[m[m[m
[1;35m
Verifing if the [testchannel18908-02] channel exists in [org2.example.com][m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-28 09:26:59.744 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:26:59.746 UTC [cli.common] readBlock -> INFO 002[0m Received block: 1
[34m2020-04-28 09:26:59.747 UTC [cli.common] readBlock -> INFO 003[0m Received block: 1
[34m2020-04-28 09:26:59.747 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 1
{
"channel_id": "testchannel18908-02",
"epoch": "0",
"extension": null,
"timestamp": "2020-04-28T09:26:58Z",
"tls_cert_hash": null,
"tx_id": "",
"type": 1,
"version": 0
}
cat /tmp/fileeqYkvP _testchannel18908-02_
Expect: testchannel18908-02, got: testchannel18908-02
setExitCode: 0
[1;32mOK: The channel [testchannel18908-02] exists and visible to [org2][m[m[m
Step 6_cli: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel18908-02 org1;verify_error=$(($run_error | $verify_error | ! $?));echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 7_cli: Test 'The channel created in ORG2 is not visible in ORG1'(B[m
[1m[37m---------------------------(B[m
VERIFY_NOT: test-channel-accessible.sh testchannel18908-02 org1
[1;35m
Verifing if the [testchannel18908-02] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-28 09:27:00.275 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:27:00.277 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/filer7UHTw _null_
Expect: testchannel18908-02, got: null
setExitCode: 1
[1;32mOK: The channel [testchannel18908-02] exists and visible to [org1][m[m[m
Step 7_cli: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh testchannel18908-02 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel18908-02 org1;verify_error=$(($run_error | $verify_error | ! $?));echo "${WHITE}${BRIGHT}Expecting non-zero exit code ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 8_cli: Test 'Can not create a channel in ORG1 with the name of the channel created in ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel18908-02 org1 VERIFY_NON_ZERO_EXIT_CODE: VERIFY_NOT: test-channel-accessible.sh testchannel18908-02 org1
[1;36m
Creating the [testchannel18908-02] channel for org1.example.com[m[m[m
queryContainerNetworkSettings returns: 7051
eval ./channel-create.sh testchannel18908-02
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/channel-create.sh testchannel18908-02[m[m[m
example.com

Create channel org1 testchannel18908-02
--2020-04-28 09:27:02--  http://www.example.com/msp/admincerts/Admin@example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/admincerts/Admin@example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:27:02--  http://www.example.com/msp/cacerts/ca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/cacerts/ca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:27:02--  http://www.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pemâ€™ not modified on server. Omitting download.

--2020-04-28 09:27:02--  http://www.example.com/msp/orderer.example.com/tls/server.crt
Resolving www.example.com (www.example.com)... 172.19.0.4
Connecting to www.example.com (www.example.com)|172.19.0.4|:80... connected.
HTTP request sent, awaiting response... 304 Not Modified
File â€˜crypto-config/ordererOrganizations/example.com/msp/orderer.example.com/tls/server.crtâ€™ not modified on server. Omitting download.

[34m2020-04-28 09:27:02.501 UTC [common.tools.configtxgen] main -> INFO 001[0m Loading configuration
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004[0m Orderer.BatchTimeout unset, setting to 2s
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005[0m Orderer.BatchSize.MaxMessageCount unset, setting to 500
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006[0m Orderer.BatchSize.AbsoluteMaxBytes unset, setting to 10485760
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007[0m Orderer.BatchSize.PreferredMaxBytes unset, setting to 2097152
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008[0m orderer type: solo
[34m2020-04-28 09:27:02.549 UTC [common.tools.configtxgen.localconfig] Load -> INFO 009[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:27:02.597 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00a[0m Orderer.OrdererType unset, setting to solo
[34m2020-04-28 09:27:02.597 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00b[0m Orderer.Addresses unset, setting to [127.0.0.1:7050]
[34m2020-04-28 09:27:02.597 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 00c[0m orderer type: solo
[34m2020-04-28 09:27:02.597 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 00d[0m Loaded configuration: /etc/hyperledger/crypto-config/configtx.yaml
[34m2020-04-28 09:27:02.597 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00e[0m Generating new channel configtx
[33m2020-04-28 09:27:02.597 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 00f[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:27:02.597 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 010[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:27:02.598 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 011[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:27:02.598 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 012[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[33m2020-04-28 09:27:02.598 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 013[0m Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
[33m2020-04-28 09:27:02.598 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 014[0m Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
[33m2020-04-28 09:27:02.598 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 015[0m Default policy emission is deprecated, please include policy specifications for the orderer org group Orderer in configtx.yaml
[33m2020-04-28 09:27:02.599 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 016[0m Default policy emission is deprecated, please include policy specifications for the application org group org1 in configtx.yaml
[34m2020-04-28 09:27:02.599 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 017[0m Writing new channel tx
[34m2020-04-28 09:27:02.652 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: FORBIDDEN -- config update for existing channel did not pass initial checks: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Writers' sub-policies to be satisfied: permission denied
Execute: channel fetch config crypto-config/configtx/testchannel18908-02.pb -o orderer.example.com:7050 -c testchannel18908-02 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:27:02.723 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:27:02.725 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
configtxlator: error: open crypto-config/configtx/testchannel18908-02.pb: no such file or directory, try --help
jq: error: Could not open file crypto-config/configtx/testchannel18908-02.json: No such file or directory
>> Prepare config update from org1 for channel testchannel18908-02
configtxlator: error: Error decoding: error decoding input: error unmarshaling intermediate JSON: EOF
>> org1 is sending channel update update_in_envelope.pb with  by 
Execute: peer channel update -f update_in_envelope.pb -c testchannel18908-02 -o orderer.example.com:7050 --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem
[34m2020-04-28 09:27:02.892 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Error: got unexpected status: FORBIDDEN -- config update for existing channel did not pass initial checks: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Writers' sub-policies to be satisfied: permission denied
[1;31mError occurred. See console output above.[m[1;33m[m
setExitCode: 1
[1;32mOK: Channel [testchannel18908-02] creation request completed sucsessfuly[m[m[m
[1;35m
Verifing if the [testchannel18908-02] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-28 09:27:03.819 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-28 09:27:03.821 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/file7KSPnd _null_
Expect: testchannel18908-02, got: null
setExitCode: 1
[1;32mOK: The channel [testchannel18908-02] exists and visible to [org1][m[m[m
Step 8_cli: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./add-org-to-channel.sh testchannel18908 org1 org1 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-add-org.sh testchannel18908 org1 org1;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 9_cli: Test 'Add ORG1 to the first channel created by ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: add-org-to-channel.sh testchannel18908 org1 org1 VERIFY: test-channel-add-org.sh testchannel18908 org1 org1
[1;36m
Add [org1] to the [testchannel18908] channel[m[m[m
queryContainerNetworkSettings returns: 7051
eval ./channel-add-org.sh testchannel18908 org1
