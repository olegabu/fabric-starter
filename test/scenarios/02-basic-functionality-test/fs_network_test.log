
[37m[1mcheckArgsPassed: Args required: Fabric test interface (cli|api|...), First organization, Second organization (B[m
Arguments passed: api org1 org2
Arguments required: Fabric test interface (cli|api|...)  First organization  Second organization
checkArgsPassed: args required: 3 Fabric test interface (cli|api|...)  First organization  Second organization args passed: 3 api org1 org2
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./create-channel.sh testchannel17094 org1 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel17094 org1;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 1_api: Test 'Create new channel in ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel17094 org1 VERIFY: test-channel-accessible.sh testchannel17094 org1
[1;36mCreating [testchannel17094] channel in [org1.example.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5N30.cuN0X43km7ptLMWAibp5vvKreLUeaNvkogBODnKtgfg"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5N30.cuN0X43km7ptLMWAibp5vvKreLUeaNvkogBODnKtgfg", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5N30.cuN0X43km7ptLMWAibp5vvKreLUeaNvkogBODnKtgfg  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels {"channelId":"testchannel17094","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5N30.cuN0X43km7ptLMWAibp5vvKreLUeaNvkogBODnKtgfg
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"version":0,"timestamp":null,"response":{"status":200,"message":"","payload":{"type":"Buffer","data":[]}},"payload":{"type":"Buffer","data":[]},"endorsement":null,"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}}}]200 _ result
body is [{"version":0,"timestamp":null,"response":{"status":200,"message":"","payload":{"type":"Buffer","data":[]}},"payload":{"type":"Buffer","data":[]},"endorsement":null,"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}}}], code is 200
restAPIWrapper: exit code:: 0 result:: [{"version":0,"timestamp":null,"response":{"status":200,"message":"","payload":{"type":"Buffer","data":[]}},"payload":{"type":"Buffer","data":[]},"endorsement":null,"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}}}] 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Channel [testchannel17094] creation request completed sucsessfuly[m[m[m
[1;35m
Verifing if the [testchannel17094] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-29 08:54:58.978 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:54:58.980 UTC [cli.common] readBlock -> INFO 002[0m Received block: 0
[34m2020-04-29 08:54:58.981 UTC [cli.common] readBlock -> INFO 003[0m Received block: 0
[34m2020-04-29 08:54:58.981 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 0
{
"channel_id": "testchannel17094",
"epoch": "0",
"extension": null,
"timestamp": "2020-04-29T08:54:57Z",
"tls_cert_hash": null,
"tx_id": "",
"type": 1,
"version": 0
}
cat /tmp/fileZGVIB2 _testchannel17094_
Expect: testchannel17094, got: testchannel17094
setExitCode: 0
[1;32mOK: The channel [testchannel17094] exists and visible to [org1][m[m[m
Step 1_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel17094 org2;verify_error=$(($run_error | $verify_error | ! $?));echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 2_api: Test 'The channel created in ORG1 is not visible in ORG2'(B[m
[1m[37m---------------------------(B[m
VERIFY_NOT: test-channel-accessible.sh testchannel17094 org2
[1;35m
Verifing if the [testchannel17094] channel exists in [org2.example.com][m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-29 08:54:59.592 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:54:59.594 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/fileJ5NEcF _null_
Expect: testchannel17094, got: null
setExitCode: 1
[1;32mExit code: 1[m[m[m
Step 2_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh ^^^^^^testchannel17094 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh ^^^^^^testchannel17094 org1;verify_error=$(($run_error | $verify_error | ! $?));echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 3_api: Test 'Can not create a channel with the incorrect name in ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh ^^^^^^testchannel17094 org1 VERIFY_NON_ZERO_EXIT_CODE: VERIFY_NOT: test-channel-accessible.sh ^^^^^^testchannel17094 org1
[1;36mCreating [^^^^^^testchannel17094] channel in [org1.example.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5OX0.v0MpH7QdWz6jByWZ4g13ov3rua_ndZFZkMn1mWmJ5GQ"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5OX0.v0MpH7QdWz6jByWZ4g13ov3rua_ndZFZkMn1mWmJ5GQ", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5OX0.v0MpH7QdWz6jByWZ4g13ov3rua_ndZFZkMn1mWmJ5GQ  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels {"channelId":"^^^^^^testchannel17094","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDQ5OX0.v0MpH7QdWz6jByWZ4g13ov3rua_ndZFZkMn1mWmJ5GQ
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "Failed to create Channel. channel name should match Regex /^[a-z][a-z0-9.-]*$/, but got \"^^^^^^testchannel17094\""500 _ result
body is "Failed to create Channel. channel name should match Regex /^[a-z][a-z0-9.-]*$/, but got \"^^^^^^testchannel17094\"", code is 500
restAPIWrapper: exit code:: 0 result:: "Failed to create Channel. channel name should match Regex /^[a-z][a-z0-9.-]*$/, but got \"^^^^^^testchannel17094\"" 500
[37m[4mexitCode: 0  httpStatusCode: 5xx (B[m
setExitCode: 1
[1;32mExit code: 1[m[m[m
[1;35m
Verifing if the [^^^^^^testchannel17094] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-29 08:55:01.655 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:55:01.657 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{NOT_FOUND}
Error: can't read the block: &{NOT_FOUND}
null
cat /tmp/filebHMZ0M _null_
Expect: ^^^^^^testchannel17094, got: null
setExitCode: 1
[1;32mExit code: 1[m[m[m
Step 3_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh testchannel17094 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 4_api: Test 'Can not create channel with the same name in ORG1 again'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel17094 org1 VERIFY_NON_ZERO_EXIT_CODE:
[1;36mCreating [testchannel17094] channel in [org1.example.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwMn0.FQOqeIE9XmD32ltydozrB-csOkgkExyQsTjpTwYp2XQ"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwMn0.FQOqeIE9XmD32ltydozrB-csOkgkExyQsTjpTwYp2XQ", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwMn0.FQOqeIE9XmD32ltydozrB-csOkgkExyQsTjpTwYp2XQ  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels {"channelId":"testchannel17094","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwMn0.FQOqeIE9XmD32ltydozrB-csOkgkExyQsTjpTwYp2XQ
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}},"isProposalResponse":true}]200 _ result
body is [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}},"isProposalResponse":true}], code is 200
restAPIWrapper: exit code:: 0 result:: [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}},"isProposalResponse":true}] 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Channel [testchannel17094] creation request completed sucsessfuly[m[m[m
Step 4_api: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh testchannel17094 org2 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel17094 org2;verify_error=$(($run_error | $verify_error | ! $?));echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 5_api: Test 'Can not create a channel in ORG2 with the name of the channel created in ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel17094 org2 VERIFY_NON_ZERO_EXIT_CODE: VERIFY_NOT: test-channel-accessible.sh testchannel17094 org2
[1;36mCreating [testchannel17094] channel in [org2.example.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwM30.A2hdP_DNviwUtxa7iXo2KlKTmceZazKL5z8rMJtIIXs"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwM30.A2hdP_DNviwUtxa7iXo2KlKTmceZazKL5z8rMJtIIXs", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwM30.A2hdP_DNviwUtxa7iXo2KlKTmceZazKL5z8rMJtIIXs  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels {"channelId":"testchannel17094","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwM30.A2hdP_DNviwUtxa7iXo2KlKTmceZazKL5z8rMJtIIXs
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "Invalid results returned ::FORBIDDEN"500 _ result
body is "Invalid results returned ::FORBIDDEN", code is 500
restAPIWrapper: exit code:: 0 result:: "Invalid results returned ::FORBIDDEN" 500
[37m[4mexitCode: 0  httpStatusCode: 5xx (B[m
setExitCode: 1
[1;32mExit code: 1[m[m[m
[1;35m
Verifing if the [testchannel17094] channel exists in [org2.example.com][m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-29 08:55:05.414 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:55:05.416 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/fileGAImuH _null_
Expect: testchannel17094, got: null
setExitCode: 1
[1;32mExit code: 1[m[m[m
Step 5_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./create-channel.sh testchannel17094-02 org2 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel17094-02 org2;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 6_api: Test 'Create the second channel in ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel17094-02 org2 VERIFY: test-channel-accessible.sh testchannel17094-02 org2
[1;36mCreating [testchannel17094-02] channel in [org2.example.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwNX0.MMdBQohrxNgBQShKWWGN5l0aWCtd8Z_Pj8O5s2VE3Lo"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwNX0.MMdBQohrxNgBQShKWWGN5l0aWCtd8Z_Pj8O5s2VE3Lo", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwNX0.MMdBQohrxNgBQShKWWGN5l0aWCtd8Z_Pj8O5s2VE3Lo  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels {"channelId":"testchannel17094-02","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwNX0.MMdBQohrxNgBQShKWWGN5l0aWCtd8Z_Pj8O5s2VE3Lo
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"version":0,"timestamp":null,"response":{"status":200,"message":"","payload":{"type":"Buffer","data":[]}},"payload":{"type":"Buffer","data":[]},"endorsement":null,"peer":{"url":"grpcs://peer0.org2.example.com:8051","name":"peer0.org2.example.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.example.com:8051","grpc.default_authority":"peer0.org2.example.com:8051"}}}]200 _ result
body is [{"version":0,"timestamp":null,"response":{"status":200,"message":"","payload":{"type":"Buffer","data":[]}},"payload":{"type":"Buffer","data":[]},"endorsement":null,"peer":{"url":"grpcs://peer0.org2.example.com:8051","name":"peer0.org2.example.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.example.com:8051","grpc.default_authority":"peer0.org2.example.com:8051"}}}], code is 200
restAPIWrapper: exit code:: 0 result:: [{"version":0,"timestamp":null,"response":{"status":200,"message":"","payload":{"type":"Buffer","data":[]}},"payload":{"type":"Buffer","data":[]},"endorsement":null,"peer":{"url":"grpcs://peer0.org2.example.com:8051","name":"peer0.org2.example.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.example.com:8051","grpc.default_authority":"peer0.org2.example.com:8051"}}}] 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Channel [testchannel17094-02] creation request completed sucsessfuly[m[m[m
[1;35m
Verifing if the [testchannel17094-02] channel exists in [org2.example.com][m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-29 08:55:07.686 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:55:07.688 UTC [cli.common] readBlock -> INFO 002[0m Received block: 0
[34m2020-04-29 08:55:07.689 UTC [cli.common] readBlock -> INFO 003[0m Received block: 0
[34m2020-04-29 08:55:07.689 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 0
{
"channel_id": "testchannel17094-02",
"epoch": "0",
"extension": null,
"timestamp": "2020-04-29T08:55:06Z",
"tls_cert_hash": null,
"tx_id": "",
"type": 1,
"version": 0
}
cat /tmp/fileSUnimc _testchannel17094-02_
Expect: testchannel17094-02, got: testchannel17094-02
setExitCode: 0
[1;32mOK: The channel [testchannel17094-02] exists and visible to [org2][m[m[m
Step 6_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel17094-02 org1;verify_error=$(($run_error | $verify_error | ! $?));echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 7_api: Test 'The channel created in ORG2 is not visible in ORG1'(B[m
[1m[37m---------------------------(B[m
VERIFY_NOT: test-channel-accessible.sh testchannel17094-02 org1
[1;35m
Verifing if the [testchannel17094-02] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-29 08:55:08.245 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:55:08.246 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/filepsM0IT _null_
Expect: testchannel17094-02, got: null
setExitCode: 1
[1;32mExit code: 1[m[m[m
Step 7_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./create-channel.sh testchannel17094-02 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";NO_RED_OUTPUT=true /home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-accessible.sh testchannel17094-02 org1;verify_error=$(($run_error | $verify_error | ! $?));echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 8_api: Test 'Can not create a channel in ORG1 with the name of the channel created in ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: create-channel.sh testchannel17094-02 org1 VERIFY_NON_ZERO_EXIT_CODE: VERIFY_NOT: test-channel-accessible.sh testchannel17094-02 org1
[1;36mCreating [testchannel17094-02] channel in [org1.example.com] using API...[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwOH0.8fgtUSscFyAu-67UJPNR7GcNFJPbH6wrlMX6GV1zmbI"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwOH0.8fgtUSscFyAu-67UJPNR7GcNFJPbH6wrlMX6GV1zmbI", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwOH0.8fgtUSscFyAu-67UJPNR7GcNFJPbH6wrlMX6GV1zmbI  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels {"channelId":"testchannel17094-02","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUwOH0.8fgtUSscFyAu-67UJPNR7GcNFJPbH6wrlMX6GV1zmbI
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "Invalid results returned ::FORBIDDEN"500 _ result
body is "Invalid results returned ::FORBIDDEN", code is 500
restAPIWrapper: exit code:: 0 result:: "Invalid results returned ::FORBIDDEN" 500
[37m[4mexitCode: 0  httpStatusCode: 5xx (B[m
setExitCode: 1
[1;32mExit code: 1[m[m[m
[1;35m
Verifing if the [testchannel17094-02] channel exists in [org1.example.com][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-29 08:55:10.343 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:55:10.345 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
Error: can't read the block: &{FORBIDDEN}
null
cat /tmp/fileOXF6W0 _null_
Expect: testchannel17094-02, got: null
setExitCode: 1
[1;32mExit code: 1[m[m[m
Step 8_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./add-org-to-channel.sh testchannel17094 org1 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 9_api: Test 'Fail to add ORG1 to the first channel created by ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: add-org-to-channel.sh testchannel17094 org1 org1 VERIFY_NON_ZERO_EXIT_CODE:
[1;36mAdd [org1] to the [testchannel17094] channel using API[m[m[m
[1;36mAdd [org1] to the [testchannel17094] channel using API[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMH0.hBw0aoaFfj2mXPE-9ZzL-rMUXUezM7_6-Xx7NcTQvzQ"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMH0.hBw0aoaFfj2mXPE-9ZzL-rMUXUezM7_6-Xx7NcTQvzQ", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMH0.hBw0aoaFfj2mXPE-9ZzL-rMUXUezM7_6-Xx7NcTQvzQ  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels/testchannel17094/orgs {"orgId":"org1","orgIp":"","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMH0.hBw0aoaFfj2mXPE-9ZzL-rMUXUezM7_6-Xx7NcTQvzQ
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ 200 _ result
body is empty (set to {"empty":"true"}), code is 200
restAPIWrapper: exit code:: 0 result:: {"empty":"true"} 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Organization [org1] added to [testchannel17094] channel[m[m[m
Step 9_api: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./add-org-to-channel.sh testchannel17094-02 org2 org2 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 10_api: Test 'Fail to add ORG2 to the second channel created by ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: add-org-to-channel.sh testchannel17094-02 org2 org2 VERIFY_NON_ZERO_EXIT_CODE:
[1;36mAdd [org2] to the [testchannel17094-02] channel using API[m[m[m
[1;36mAdd [org2] to the [testchannel17094-02] channel using API[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMn0.CF8m0EZmvXWhBl7TQMYg3pWdu209vg_YoFHhnBEEOEw"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMn0.CF8m0EZmvXWhBl7TQMYg3pWdu209vg_YoFHhnBEEOEw", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMn0.CF8m0EZmvXWhBl7TQMYg3pWdu209vg_YoFHhnBEEOEw  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels/testchannel17094-02/orgs {"orgId":"org2","orgIp":"","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxMn0.CF8m0EZmvXWhBl7TQMYg3pWdu209vg_YoFHhnBEEOEw
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ 200 _ result
body is empty (set to {"empty":"true"}), code is 200
restAPIWrapper: exit code:: 0 result:: {"empty":"true"} 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Organization [org2] added to [testchannel17094-02] channel[m[m[m
Step 10_api: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./add-org-to-channel.sh testchannel17094 org1 org2 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-add-org.sh testchannel17094 org1 org2;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 11_api: Test 'Add ORG2 to the first channel created by ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: add-org-to-channel.sh testchannel17094 org1 org2 VERIFY: test-channel-add-org.sh testchannel17094 org1 org2
[1;36mAdd [org2] to the [testchannel17094] channel using API[m[m[m
[1;36mAdd [org2] to the [testchannel17094] channel using API[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxNH0.9l3aKU4PPW-_ofQCL9rCm5HOejajohCZVcFBv2Hxb9Y"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxNH0.9l3aKU4PPW-_ofQCL9rCm5HOejajohCZVcFBv2Hxb9Y", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxNH0.9l3aKU4PPW-_ofQCL9rCm5HOejajohCZVcFBv2Hxb9Y  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels/testchannel17094/orgs {"orgId":"org2","orgIp":"","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxNH0.9l3aKU4PPW-_ofQCL9rCm5HOejajohCZVcFBv2Hxb9Y
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ 200 _ result
body is empty (set to {"empty":"true"}), code is 200
restAPIWrapper: exit code:: 0 result:: {"empty":"true"} 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Organization [org2] added to [testchannel17094] channel[m[m[m
[1;35m
Verifing if the [org2] added to [testchannel17094][m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-29 08:55:16.808 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:55:16.810 UTC [cli.common] readBlock -> INFO 002[0m Received block: 2
[34m2020-04-29 08:55:16.811 UTC [cli.common] readBlock -> INFO 003[0m Received block: 2
[34m2020-04-29 08:55:16.811 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 2
{
"config": {
"admins": [
"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNHakNDQWNDZ0F3SUJBZ0lSQUpCZ2FnT2NBeVVhUm5YdnBoaERpR3d3Q2dZSUtvWkl6ajBFQXdJd2N6RUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHVEFYQmdOVkJBb1RFRzl5WnpJdVpYaGhiWEJzWlM1amIyMHhIREFhQmdOVkJBTVRFMk5oCkxtOXlaekl1WlhoaGJYQnNaUzVqYjIwd0hoY05NakF3TkRJNU1EY3dOakF3V2hjTk16QXdOREkzTURjd05qQXcKV2pCYk1Rc3dDUVlEVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTgpVMkZ1SUVaeVlXNWphWE5qYnpFZk1CMEdBMVVFQXd3V1FXUnRhVzVBYjNKbk1pNWxlR0Z0Y0d4bExtTnZiVEJaCk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQkwwaDdVcmhsL0hjV1JqVUZteCsxb0xjempFZHhIa08KNTg4UlZMWGl5emMzRkVNTzA4Z3hlYjlKbTc5TEtDTUxLNVlvbkNwQWpLVlByMU8yNUlvRFlxMmpUVEJMTUE0RwpBMVVkRHdFQi93UUVBd0lIZ0RBTUJnTlZIUk1CQWY4RUFqQUFNQ3NHQTFVZEl3UWtNQ0tBSUU3VS9Hc2VWaUtaCll3bG1UUEtqZm93ZnFIcDVHN285UEhvZis5Q1hrNkhxTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDSVFDS1VuZ00KTGNFREIvb210d085ajN3L1RlUkZSRzhMSkVSRUtsT0FKRjg0aWdJZ0VObGdGSmN5Wk1hdjJRZFdWLzV3eFhQVgoyS0JndEx6cEcrd05QazJUbUkwPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
],
"crypto_config": {
"identity_identifier_hash_function": "SHA256",
"signature_hash_family": "SHA2"
},
"fabric_node_ous": null,
"intermediate_certs": [],
"name": "org2",
"organizational_unit_identifiers": [],
"revocation_list": [],
"root_certs": [
"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNVakNDQWZpZ0F3SUJBZ0lSQUtBdDhNM1BWWWZrdUViRjNkRm4vTE13Q2dZSUtvWkl6ajBFQXdJd2N6RUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHVEFYQmdOVkJBb1RFRzl5WnpJdVpYaGhiWEJzWlM1amIyMHhIREFhQmdOVkJBTVRFMk5oCkxtOXlaekl1WlhoaGJYQnNaUzVqYjIwd0hoY05NakF3TkRJNU1EY3dOakF3V2hjTk16QXdOREkzTURjd05qQXcKV2pCek1Rc3dDUVlEVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTgpVMkZ1SUVaeVlXNWphWE5qYnpFWk1CY0dBMVVFQ2hNUWIzSm5NaTVsZUdGdGNHeGxMbU52YlRFY01Cb0dBMVVFCkF4TVRZMkV1YjNKbk1pNWxlR0Z0Y0d4bExtTnZiVEJaTUJNR0J5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEEwSUEKQkxkRm9LUnE5eUNZNGt0b1JxeVVZWFFpd3lpRlhoaW1uV2htM3JkbThieWZEOVVlNTJiSEJVRVBjZ05NOWhrWgpWRUh4U2RyQmtLaGEvWm4yR2lsT2d3T2piVEJyTUE0R0ExVWREd0VCL3dRRUF3SUJwakFkQmdOVkhTVUVGakFVCkJnZ3JCZ0VGQlFjREFnWUlLd1lCQlFVSEF3RXdEd1lEVlIwVEFRSC9CQVV3QXdFQi96QXBCZ05WSFE0RUlnUWcKVHRUOGF4NVdJcGxqQ1daTThxTitqQitvZW5rYnVqMDhlaC83MEplVG9lb3dDZ1lJS29aSXpqMEVBd0lEU0FBdwpSUUloQUpQUkpMcTc1enR4c1NlSzQ1eThPbkdvaWdvcFRwcGVtaE1MbnE2ZmI2elFBaUJRa3JnMUVWUWdSbWZTCmV5YjBRb2duMGFwWnd2dlFxME1YZHBpVTlQd0o2Zz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"
],
"signing_identity": null,
"tls_intermediate_certs": [],
"tls_root_certs": [
"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNXRENDQWY2Z0F3SUJBZ0lSQVBQMHRkU1draEJPVlNMRmlUUlBXZTB3Q2dZSUtvWkl6ajBFQXdJd2RqRUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHVEFYQmdOVkJBb1RFRzl5WnpJdVpYaGhiWEJzWlM1amIyMHhIekFkQmdOVkJBTVRGblJzCmMyTmhMbTl5WnpJdVpYaGhiWEJzWlM1amIyMHdIaGNOTWpBd05ESTVNRGN3TmpBd1doY05NekF3TkRJM01EY3cKTmpBd1dqQjJNUXN3Q1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRQpCeE1OVTJGdUlFWnlZVzVqYVhOamJ6RVpNQmNHQTFVRUNoTVFiM0puTWk1bGVHRnRjR3hsTG1OdmJURWZNQjBHCkExVUVBeE1XZEd4elkyRXViM0puTWk1bGVHRnRjR3hsTG1OdmJUQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDkKQXdFSEEwSUFCRzlldGZvbldSdG5BakU5WW84TVVLcnVpKzZwL0lPZmJ2L1RIZmNpYk56ZEh5dGxwcXV5TTRyYworZm5DNXRDTnJxd1lYZGRFVzVlRGg3UDU1UXlKRDlxamJUQnJNQTRHQTFVZER3RUIvd1FFQXdJQnBqQWRCZ05WCkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBcEJnTlYKSFE0RUlnUWduSTBqSjF5aTlHRFlrSklOaHliZU1XWm9xNWxCbmQvc3NFV1pZbU9QczFVd0NnWUlLb1pJemowRQpBd0lEU0FBd1JRSWhBTkN0YkVGSDNjN2x0WGpyb1VtTGVGL0w1YW9tUlBiT2kzMENXYkwweGsvQkFpQUpDaFQrCjU5NlV6emxLazQ0QWRQYU44VmgxdU1vdmF5b2FrM25vVFRQSEp3PT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
]
},
"type": 0
}
cat /tmp/fileuAJ0UK _org2_
org2
setExitCode: 0
[1;32mOK: Organization [org2] is in the channel [testchannel17094][m[m[m
Step 11_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./add-org-to-channel.sh testchannel17094-02 org2 org1 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-channel-add-org.sh testchannel17094-02 org2 org1;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 12_api: Test 'Add ORG1 to the second channel created by ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: add-org-to-channel.sh testchannel17094-02 org2 org1 VERIFY: test-channel-add-org.sh testchannel17094-02 org2 org1
[1;36mAdd [org1] to the [testchannel17094-02] channel using API[m[m[m
[1;36mAdd [org1] to the [testchannel17094-02] channel using API[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxN30.u9ZO0e2veKpldaH8eZnn_K8fI__I4Mjked3RzB4jKm8"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxN30.u9ZO0e2veKpldaH8eZnn_K8fI__I4Mjked3RzB4jKm8", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxN30.u9ZO0e2veKpldaH8eZnn_K8fI__I4Mjked3RzB4jKm8  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels/testchannel17094-02/orgs {"orgId":"org1","orgIp":"","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxN30.u9ZO0e2veKpldaH8eZnn_K8fI__I4Mjked3RzB4jKm8
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ 200 _ result
body is empty (set to {"empty":"true"}), code is 200
restAPIWrapper: exit code:: 0 result:: {"empty":"true"} 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Organization [org1] added to [testchannel17094-02] channel[m[m[m
[1;35m
Verifing if the [org1] added to [testchannel17094-02][m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-29 08:55:19.288 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
[34m2020-04-29 08:55:19.291 UTC [cli.common] readBlock -> INFO 002[0m Received block: 2
[34m2020-04-29 08:55:19.293 UTC [cli.common] readBlock -> INFO 003[0m Received block: 2
[34m2020-04-29 08:55:19.293 UTC [channelCmd] fetch -> INFO 004[0m Retrieving last config block: 2
{
"config": {
"admins": [
"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNHVENDQWNDZ0F3SUJBZ0lSQU1CNnl3S2M5TWc2N2h4L1d2TUU1b0F3Q2dZSUtvWkl6ajBFQXdJd2N6RUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHVEFYQmdOVkJBb1RFRzl5WnpFdVpYaGhiWEJzWlM1amIyMHhIREFhQmdOVkJBTVRFMk5oCkxtOXlaekV1WlhoaGJYQnNaUzVqYjIwd0hoY05NakF3TkRJNU1EY3dOakF3V2hjTk16QXdOREkzTURjd05qQXcKV2pCYk1Rc3dDUVlEVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTgpVMkZ1SUVaeVlXNWphWE5qYnpFZk1CMEdBMVVFQXd3V1FXUnRhVzVBYjNKbk1TNWxlR0Z0Y0d4bExtTnZiVEJaCk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQlBsRXhLMExTaVBYUldIQmgwdDJpcDBFTmRXTmJDT3IKaFJxNzBFY2QyY1ZzRmxyaTdHaVhYVXZYUCt4cGxEUDRndWVuemduSTk2THE4c0pXUjRjblZET2pUVEJMTUE0RwpBMVVkRHdFQi93UUVBd0lIZ0RBTUJnTlZIUk1CQWY4RUFqQUFNQ3NHQTFVZEl3UWtNQ0tBSUZVaVZCakxOQVFzCkh2Wi84ZXcrTHNRbDNtNXFoWGhCZE1QMlZzZ3gxR2hmTUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDSUI0T01pNzgKb0hKSktVaDFYbjFyYmpnYzM2aTBhSlJhVmorL0Z4cWZJS2h5QWlCck1IZmdRVm1pVlRNZ3NtNW5zWGZlWnhyRgpXNGY3QkVKSHVrblg1OG5MMUE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
],
"crypto_config": {
"identity_identifier_hash_function": "SHA256",
"signature_hash_family": "SHA2"
},
"fabric_node_ous": null,
"intermediate_certs": [],
"name": "org1",
"organizational_unit_identifiers": [],
"revocation_list": [],
"root_certs": [
"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNVRENDQWZlZ0F3SUJBZ0lRSXdvYmhtMkRHYTRoeE9CNlZ3S205REFLQmdncWhrak9QUVFEQWpCek1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVpNQmNHQTFVRUNoTVFiM0puTVM1bGVHRnRjR3hsTG1OdmJURWNNQm9HQTFVRUF4TVRZMkV1CmIzSm5NUzVsZUdGdGNHeGxMbU52YlRBZUZ3MHlNREEwTWprd056QTJNREJhRncwek1EQTBNamN3TnpBMk1EQmEKTUhNeEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUlFd3BEWVd4cFptOXlibWxoTVJZd0ZBWURWUVFIRXcxVApZVzRnUm5KaGJtTnBjMk52TVJrd0Z3WURWUVFLRXhCdmNtY3hMbVY0WVcxd2JHVXVZMjl0TVJ3d0dnWURWUVFECkV4TmpZUzV2Y21jeExtVjRZVzF3YkdVdVkyOXRNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUUKdnMyYnFITzU2NHovbldWbENHT3hjR2k4b0hDTWxoZHQ2aXJqNERSR3BvSTRvakRwZUxVVzV5dHFIWkxTQ2JZVApKVkRYQXBTaVgycy9xVlhhVWFHYWhxTnRNR3N3RGdZRFZSMFBBUUgvQkFRREFnR21NQjBHQTFVZEpRUVdNQlFHCkNDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjREFUQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01Da0dBMVVkRGdRaUJDQlYKSWxRWXl6UUVMQjcyZi9Ic1BpN0VKZDV1YW9WNFFYVEQ5bGJJTWRSb1h6QUtCZ2dxaGtqT1BRUURBZ05IQURCRQpBaUE0L1pMbWJjTHBER3ZidkM1OFkwQ1VNblVzNC9hbDlSamd1clpMeTE0ZWNnSWdLYkY4alNUVUxaOHVEeG5NCjNUd2RwMnU3MWRQTmd2T1gxc1NNVDR5RDhsUT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
],
"signing_identity": null,
"tls_intermediate_certs": [],
"tls_root_certs": [
"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNWekNDQWYyZ0F3SUJBZ0lRY05oVHdQZXFXNnF2M0piUWRPdXIxREFLQmdncWhrak9QUVFEQWpCMk1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVpNQmNHQTFVRUNoTVFiM0puTVM1bGVHRnRjR3hsTG1OdmJURWZNQjBHQTFVRUF4TVdkR3h6ClkyRXViM0puTVM1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TURBME1qa3dOekEyTURCYUZ3MHpNREEwTWpjd056QTIKTURCYU1IWXhDekFKQmdOVkJBWVRBbFZUTVJNd0VRWURWUVFJRXdwRFlXeHBabTl5Ym1saE1SWXdGQVlEVlFRSApFdzFUWVc0Z1JuSmhibU5wYzJOdk1Sa3dGd1lEVlFRS0V4QnZjbWN4TG1WNFlXMXdiR1V1WTI5dE1SOHdIUVlEClZRUURFeFowYkhOallTNXZjbWN4TG1WNFlXMXdiR1V1WTI5dE1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMEQKQVFjRFFnQUUra3NuVDhEZ09pdjdUcnRIMmJLQ1k5OTdiQytLaGFCNk5yQW1rVXlEaXFBV2hmQithN1h0d28wMgo2bWJaYjZuNkRBMW5DL29meXd4akNZMCtsMnd2T0tOdE1Hc3dEZ1lEVlIwUEFRSC9CQVFEQWdHbU1CMEdBMVVkCkpRUVdNQlFHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQVRBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUNrR0ExVWQKRGdRaUJDQWtlNzh1cVM0eUdYOXRrTnlsVnVDNVRGVDZRaUREMW5mai9VUE5wOFBoV2pBS0JnZ3Foa2pPUFFRRApBZ05JQURCRkFpRUF0cHg2TklUSGZNS1VmOEJvU04yS2d6QlJCQk11MFc1Y0V2MzR0T2VBdjBZQ0lDYjF6NEdjCjhXQzU2SkMzNDkrQjg1VW1BSVV5TkF1L1RyN0JrenBOc1ZSeQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
]
},
"type": 0
}
cat /tmp/filewCMi0k _org1_
org1
setExitCode: 0
[1;32mOK: Organization [org1] is in the channel [testchannel17094-02][m[m[m
Step 12_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./join-channel.sh testchannel17094 org1 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 13_api: Test 'Can not join ORG1 to the first chanel created by ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: join-channel.sh testchannel17094 org1 VERIFY_NON_ZERO_EXIT_CODE:
[1;36mJoining org1.example.com to the [testchannel17094] channel using API...[m[m[m
[1;36mJoining org1.example.com to the [testchannel17094] channel using API...[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxOX0.iyPElNtEkWJrRt2y8VijSiRpiIpYTOjrXreGt2CQKn4"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxOX0.iyPElNtEkWJrRt2y8VijSiRpiIpYTOjrXreGt2CQKn4", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxOX0.iyPElNtEkWJrRt2y8VijSiRpiIpYTOjrXreGt2CQKn4  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels/testchannel17094 {"waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUxOX0.iyPElNtEkWJrRt2y8VijSiRpiIpYTOjrXreGt2CQKn4
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}},"isProposalResponse":true}]200 _ result
body is [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}},"isProposalResponse":true}], code is 200
restAPIWrapper: exit code:: 0 result:: [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org1.example.com:7051","name":"peer0.org1.example.com:7051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org1.example.com:7051","grpc.default_authority":"peer0.org1.example.com:7051"}},"isProposalResponse":true}] 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: [org1] joined to [testchannel17094] channel[m[m[m
Step 13_api: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./join-channel.sh testchannel17094 org2 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-join-channel.sh testchannel17094 org2;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 14_api: Test 'Join ORG2 to the first chanel created by ORG1'(B[m
[1m[37m---------------------------(B[m
RUNTEST: join-channel.sh testchannel17094 org2 VERIFY: test-join-channel.sh testchannel17094 org2
[1;36mJoining org2.example.com to the [testchannel17094] channel using API...[m[m[m
[1;36mJoining org2.example.com to the [testchannel17094] channel using API...[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUyMH0.OPYrLt8RrsubMLhW8xu78RjUJWCwAQ-BD4rjcSXKPSQ"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUyMH0.OPYrLt8RrsubMLhW8xu78RjUJWCwAQ-BD4rjcSXKPSQ", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUyMH0.OPYrLt8RrsubMLhW8xu78RjUJWCwAQ-BD4rjcSXKPSQ  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels/testchannel17094 {"waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUyMH0.OPYrLt8RrsubMLhW8xu78RjUJWCwAQ-BD4rjcSXKPSQ
[31mcurlRequest: (curl exit code: 28) (B[m
curlGetIt got _ 000 _ result
body is empty (set to {"empty":"true"}), code is 000
restAPIWrapper: exit code:: 28 result:: {"empty":"true"} 000
[37m[4mexitCode: 28  httpStatusCode: 0xx (B[m
setExitCode: 1
[1;31mERROR! Exit code: 1[m[m[m
[1;35m
Verifing if the [org2] has joined the [testchannel17094] channel...[m[m[m
queryContainerNetworkSettings returns: 8051
[34m2020-04-29 08:55:36.467 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Channels org2 has joined to: Channels peers has joined: 
testchannel23574
testchannel23574-02
testchannel3933-02
testchannel17094-02
testchannel17094
common
testchannel26666
testchannel26666-02
testchannel3933
Result: testchannel17094
setExitCode: 0
[1;32mOK: The [org2] has joined the [testchannel17094] channel[m[m[m
Step 14_api: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./join-channel.sh testchannel17094-02 org1 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-join-channel.sh testchannel17094-02 org1;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 15_api: Test 'Join ORG1 to the second chanel created by ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: join-channel.sh testchannel17094-02 org1 VERIFY: test-join-channel.sh testchannel17094-02 org1
[1;36mJoining org1.example.com to the [testchannel17094-02] channel using API...[m[m[m
[1;36mJoining org1.example.com to the [testchannel17094-02] channel using API...[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUzNn0.4KC7gWLALv3dwpL8bPLq2s72Gs-rBGB9lSEK9HmS1AA"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUzNn0.4KC7gWLALv3dwpL8bPLq2s72Gs-rBGB9lSEK9HmS1AA", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUzNn0.4KC7gWLALv3dwpL8bPLq2s72Gs-rBGB9lSEK9HmS1AA  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels/testchannel17094-02 {"waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDUzNn0.4KC7gWLALv3dwpL8bPLq2s72Gs-rBGB9lSEK9HmS1AA
[31mcurlRequest: (curl exit code: 28) (B[m
curlGetIt got _ 000 _ result
body is empty (set to {"empty":"true"}), code is 000
restAPIWrapper: exit code:: 28 result:: {"empty":"true"} 000
[37m[4mexitCode: 28  httpStatusCode: 0xx (B[m
setExitCode: 1
[1;31mERROR! Exit code: 1[m[m[m
[1;35m
Verifing if the [org1] has joined the [testchannel17094-02] channel...[m[m[m
queryContainerNetworkSettings returns: 7051
[34m2020-04-29 08:55:52.971 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
Channels org1 has joined to: Channels peers has joined: 
testchannel26666
testchannel3933
testchannel3933-02
testchannel23574
testchannel23574-02
testchannel17094
testchannel17094-02
common
testchannel26666-02
Result: testchannel17094-02
setExitCode: 0
[1;32mOK: The [org1] has joined the [testchannel17094-02] channel[m[m[m
Step 15_api: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=true ./join-channel.sh testchannel17094-02 org2 ;run_error=$?;verify_error=$((! $run_error | $verify_error));run_error=0;echo "$(setColorOnError ${verify_error})${BRIGHT}Non-zero exit code expected ${NORMAL}";[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 16_api: Test 'Can not join ORG2 to the second chanel created by ORG2'(B[m
[1m[37m---------------------------(B[m
RUNTEST: join-channel.sh testchannel17094-02 org2 VERIFY_NON_ZERO_EXIT_CODE:
[1;36mJoining org2.example.com to the [testchannel17094-02] channel using API...[m[m[m
[1;36mJoining org2.example.com to the [testchannel17094-02] channel using API...[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1M30.uIhBGNgvlBjjdCqzxCxaamT1YHu9pOubqKQoN4lG9F8"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1M30.uIhBGNgvlBjjdCqzxCxaamT1YHu9pOubqKQoN4lG9F8", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1M30.uIhBGNgvlBjjdCqzxCxaamT1YHu9pOubqKQoN4lG9F8  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/channels/testchannel17094-02 {"waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1M30.uIhBGNgvlBjjdCqzxCxaamT1YHu9pOubqKQoN4lG9F8
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.example.com:8051","name":"peer0.org2.example.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.example.com:8051","grpc.default_authority":"peer0.org2.example.com:8051"}},"isProposalResponse":true}]200 _ result
body is [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.example.com:8051","name":"peer0.org2.example.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.example.com:8051","grpc.default_authority":"peer0.org2.example.com:8051"}},"isProposalResponse":true}], code is 200
restAPIWrapper: exit code:: 0 result:: [{"status":500,"payload":{"type":"Buffer","data":[]},"peer":{"url":"grpcs://peer0.org2.example.com:8051","name":"peer0.org2.example.com:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"grpc.ssl_target_name_override":"peer0.org2.example.com:8051","grpc.default_authority":"peer0.org2.example.com:8051"}},"isProposalResponse":true}] 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: [org2] joined to [testchannel17094-02] channel[m[m[m
Step 16_api: exit code 1
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./chaincode-install.sh testchannel17094 org1 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-chaincode-installed.sh testchannel17094 org1;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 17_api: Test 'Install test chaincode by ORG1 to the first channel'(B[m
[1m[37m---------------------------(B[m
RUNTEST: chaincode-install.sh testchannel17094 org1 VERIFY: test-chaincode-installed.sh testchannel17094 org1
[1;36m
Installing test chaincode in [org1][m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1NX0.Rg43oS72GI5nH7iB6FIvLltwhrJNH9LfrFo_ovCqEew"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1NX0.Rg43oS72GI5nH7iB6FIvLltwhrJNH9LfrFo_ovCqEew", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1NX0.Rg43oS72GI5nH7iB6FIvLltwhrJNH9LfrFo_ovCqEew  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
adding: reference_testchannel17094/chaincode-reference.js (deflated 27%)
adding: reference_testchannel17094/index.js (deflated 27%)
adding: reference_testchannel17094/package.json (deflated 41%)
adding: reference_testchannel17094/package-lock.json (deflated 73%)
Chaincode archive created:  -rw-rw-r-- 1 kilpio kilpio 12292 апр 29 11:55 /tmp/reference_testchannel17094.zip
/tmp/reference_testchannel17094.zip
queryContainerNetworkSettings returns: 4000
200
""Chaincode reference_testchannel17094:1.0 successfully installed""
setExitCode: 0
[1;32mOK: Test chaincode installed in [org1][m[m[m
[1;35m
Verifing if the test chaincode installed in [org1][m[m[m
queryContainerNetworkSettings returns: 7051
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c /opt/chaincode/node; peer chaincode list --installed -C 'testchannel17094' -o   --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem[m[m[m
bash: /opt/chaincode/node: Is a directory
Get installed chaincodes on peer:
Name: dns, Version: 1.0, Path: /opt/chaincode/node/dns, Id: bf157c353c46c4b41324ef6e2d98e324d91a47e90669d9ca25c945c64f32e6c4
Name: reference, Version: 1.0, Path: /opt/chaincode/node/reference, Id: 1e85b5ab6f0f64e5c88c40da9f6c901e061171774823cf2c2aa8095cec39ce18
Name: reference_testchannel17094, Version: 1.0, Path: /tmp/reference_testchannel17094, Id: 032a9beeb73a40fc67c4ec878b1641cb604e3a8424a82bc52df1d6761b4cec3c
Name: reference_testchannel23574, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel23574, Id: f87056191b3755daa750142d93e5f017853281df1ba85327bb664bb8623c94a2
Name: reference_testchannel26666, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel26666, Id: e31af3443d57e5a0f22cae6a711a28c370659e570f3f31eee608f1cc4667e1fb
Name: reference_testchannel3933, Version: 1.0, Path: /tmp/reference_testchannel3933, Id: e5ac13b5c171f3b52b787a8153a5dcf7063ffd02565b1d0835b1b54ea79eacbc
setExitCode: 0
reference_testchannel17094
setExitCode: 0
[1;32mOK: The test chaincode installed in [org1][m[m[m
Step 17_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./chaincode-install.sh testchannel17094 org2 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-chaincode-installed.sh testchannel17094 org2;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 18_api: Test 'Install test chaincode by ORG2 to the first channel'(B[m
[1m[37m---------------------------(B[m
RUNTEST: chaincode-install.sh testchannel17094 org2 VERIFY: test-chaincode-installed.sh testchannel17094 org2
[1;36m
Installing test chaincode in [org2][m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1OH0.7hDPp7K_sFAtd3KIp6SsXDtW-giK5qaNOmkvm_SW8_4"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1OH0.7hDPp7K_sFAtd3KIp6SsXDtW-giK5qaNOmkvm_SW8_4", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU1OH0.7hDPp7K_sFAtd3KIp6SsXDtW-giK5qaNOmkvm_SW8_4  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
updating: reference_testchannel17094/chaincode-reference.js (deflated 27%)
updating: reference_testchannel17094/index.js (deflated 27%)
updating: reference_testchannel17094/package.json (deflated 41%)
updating: reference_testchannel17094/package-lock.json (deflated 73%)
Chaincode archive created:  -rw-rw-r-- 1 kilpio kilpio 12292 апр 29 11:55 /tmp/reference_testchannel17094.zip
/tmp/reference_testchannel17094.zip
queryContainerNetworkSettings returns: 4001
200
""Chaincode reference_testchannel17094:1.0 successfully installed""
setExitCode: 0
[1;32mOK: Test chaincode installed in [org2][m[m[m
[1;35m
Verifing if the test chaincode installed in [org2][m[m[m
queryContainerNetworkSettings returns: 8051
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c /opt/chaincode/node; peer chaincode list --installed -C 'testchannel17094' -o   --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem[m[m[m
bash: /opt/chaincode/node: Is a directory
Get installed chaincodes on peer:
Name: dns, Version: 1.0, Path: /opt/chaincode/node/dns, Id: bf157c353c46c4b41324ef6e2d98e324d91a47e90669d9ca25c945c64f32e6c4
Name: reference, Version: 1.0, Path: /opt/chaincode/node/reference, Id: 1e85b5ab6f0f64e5c88c40da9f6c901e061171774823cf2c2aa8095cec39ce18
Name: reference_testchannel17094, Version: 1.0, Path: /tmp/reference_testchannel17094, Id: 032a9beeb73a40fc67c4ec878b1641cb604e3a8424a82bc52df1d6761b4cec3c
Name: reference_testchannel23574-02, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel23574-02, Id: a732f455a40f5796ecb1345135a4f8ebf5e53b5a96c2da21965ef1690447a0e3
Name: reference_testchannel23574, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel23574, Id: f87056191b3755daa750142d93e5f017853281df1ba85327bb664bb8623c94a2
Name: reference_testchannel26666-02, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel26666-02, Id: 1b2cebebab05eefe8cadfbe559646e07e22b5e6f680cfd6dd63cd2e82836c24a
Name: reference_testchannel26666, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel26666, Id: e31af3443d57e5a0f22cae6a711a28c370659e570f3f31eee608f1cc4667e1fb
Name: reference_testchannel3933-02, Version: 1.0, Path: /tmp/reference_testchannel3933-02, Id: 51a96eea210c930fbe94797a3b901e59e43ea2fc8737b20e1fdaba7944109512
Name: reference_testchannel3933, Version: 1.0, Path: /tmp/reference_testchannel3933, Id: e5ac13b5c171f3b52b787a8153a5dcf7063ffd02565b1d0835b1b54ea79eacbc
setExitCode: 0
reference_testchannel17094
setExitCode: 0
[1;32mOK: The test chaincode installed in [org2][m[m[m
Step 18_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./chaincode-install.sh testchannel17094-02 org2 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-chaincode-installed.sh testchannel17094-02 org2;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 19_api: Test 'Install test chaincode by ORG2 to the second channel'(B[m
[1m[37m---------------------------(B[m
RUNTEST: chaincode-install.sh testchannel17094-02 org2 VERIFY: test-chaincode-installed.sh testchannel17094-02 org2
[1;36m
Installing test chaincode in [org2][m[m[m
queryContainerNetworkSettings returns: 4001
restQuery: curlRequest http://127.0.0.1:4001/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU2Mn0.tz_U6ryMHVCI-BEZpB9rC-Fkc6hPkAn4Rnoi8AscbYs"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU2Mn0.tz_U6ryMHVCI-BEZpB9rC-Fkc6hPkAn4Rnoi8AscbYs", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU2Mn0.tz_U6ryMHVCI-BEZpB9rC-Fkc6hPkAn4Rnoi8AscbYs  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
adding: reference_testchannel17094-02/chaincode-reference.js (deflated 27%)
adding: reference_testchannel17094-02/index.js (deflated 27%)
adding: reference_testchannel17094-02/package.json (deflated 41%)
adding: reference_testchannel17094-02/package-lock.json (deflated 73%)
Chaincode archive created:  -rw-rw-r-- 1 kilpio kilpio 12316 апр 29 11:56 /tmp/reference_testchannel17094-02.zip
/tmp/reference_testchannel17094-02.zip
queryContainerNetworkSettings returns: 4001
200
""Chaincode reference_testchannel17094-02:1.0 successfully installed""
setExitCode: 0
[1;32mOK: Test chaincode installed in [org2][m[m[m
[1;35m
Verifing if the test chaincode installed in [org2][m[m[m
queryContainerNetworkSettings returns: 8051
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c /opt/chaincode/node; peer chaincode list --installed -C 'testchannel17094-02' -o   --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem[m[m[m
bash: /opt/chaincode/node: Is a directory
Get installed chaincodes on peer:
Name: dns, Version: 1.0, Path: /opt/chaincode/node/dns, Id: bf157c353c46c4b41324ef6e2d98e324d91a47e90669d9ca25c945c64f32e6c4
Name: reference, Version: 1.0, Path: /opt/chaincode/node/reference, Id: 1e85b5ab6f0f64e5c88c40da9f6c901e061171774823cf2c2aa8095cec39ce18
Name: reference_testchannel17094-02, Version: 1.0, Path: /tmp/reference_testchannel17094-02, Id: 4c870247e16a44048b0e0d55c48a69c4033afa3ed165b4e641e6b903a5c85c70
Name: reference_testchannel17094, Version: 1.0, Path: /tmp/reference_testchannel17094, Id: 032a9beeb73a40fc67c4ec878b1641cb604e3a8424a82bc52df1d6761b4cec3c
Name: reference_testchannel23574-02, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel23574-02, Id: a732f455a40f5796ecb1345135a4f8ebf5e53b5a96c2da21965ef1690447a0e3
Name: reference_testchannel23574, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel23574, Id: f87056191b3755daa750142d93e5f017853281df1ba85327bb664bb8623c94a2
Name: reference_testchannel26666-02, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel26666-02, Id: 1b2cebebab05eefe8cadfbe559646e07e22b5e6f680cfd6dd63cd2e82836c24a
Name: reference_testchannel26666, Version: 1.0, Path: /opt/chaincode/node/reference_testchannel26666, Id: e31af3443d57e5a0f22cae6a711a28c370659e570f3f31eee608f1cc4667e1fb
Name: reference_testchannel3933-02, Version: 1.0, Path: /tmp/reference_testchannel3933-02, Id: 51a96eea210c930fbe94797a3b901e59e43ea2fc8737b20e1fdaba7944109512
Name: reference_testchannel3933, Version: 1.0, Path: /tmp/reference_testchannel3933, Id: e5ac13b5c171f3b52b787a8153a5dcf7063ffd02565b1d0835b1b54ea79eacbc
setExitCode: 0
reference_testchannel17094-02
setExitCode: 0
[1;32mOK: The test chaincode installed in [org2][m[m[m
Step 19_api: exit code 0
run_error=0;verify_error=0;NO_RED_OUTPUT=false ./chaincode-instantiate.sh testchannel17094 org1 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-chaincode-instantiated.sh testchannel17094 org1;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 20_api: Test 'Instantiate test chaincode by ORG1 in the first channel'(B[m
[1m[37m---------------------------(B[m
RUNTEST: chaincode-instantiate.sh testchannel17094 org1 VERIFY: test-chaincode-instantiated.sh testchannel17094 org1
[1;36m
Instantiating test chaincode in [org1][m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU2NX0.iVUsn_fGAq-4XcUnKi4ui3tK6asCnRYyfu0peQCSnx4"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU2NX0.iVUsn_fGAq-4XcUnKi4ui3tK6asCnRYyfu0peQCSnx4", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU2NX0.iVUsn_fGAq-4XcUnKi4ui3tK6asCnRYyfu0peQCSnx4  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels/testchannel17094/chaincodes {"channelId":"testchannel17094","chaincodeId":"reference_testchannel17094","waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDU2NX0.iVUsn_fGAq-4XcUnKi4ui3tK6asCnRYyfu0peQCSnx4 150
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ {"txid":"9ebeaf2697810e8298c3e8784933618d5c088d22ff9434d5e0669d7e815735cb","status":"VALID","blockNumber":"3"}200 _ result
body is {"txid":"9ebeaf2697810e8298c3e8784933618d5c088d22ff9434d5e0669d7e815735cb","status":"VALID","blockNumber":"3"}, code is 200
restAPIWrapper: exit code:: 0 result:: {"txid":"9ebeaf2697810e8298c3e8784933618d5c088d22ff9434d5e0669d7e815735cb","status":"VALID","blockNumber":"3"} 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Test chaincode installed in [org1][m[m[m
[1;35m
Verifing if the test chaincode instantiated in channel [testchannel17094] channel by [org1][m[m[m
queryContainerNetworkSettings returns: 7051
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c peer chaincode list --instantiated -C 'testchannel17094' -o   --tls --cafile /etc/hyperledger/crypto-config/ordererOrganizations/example.com/msp/tlscacerts/tlsca.example.com-cert.pem[m[m[m
Get instantiated chaincodes on channel testchannel17094:
Name: reference_testchannel17094, Version: 1.0, Path: /tmp/reference_testchannel17094, Input: <nil>, Escc: escc, Vscc: vscc
setExitCode: 0
reference_testchannel17094
setExitCode: 0
[1;32mOK: The test chaincode installed in [testchannel17094] channel by [org1] org[m[m[m
Step 20_api: exit code 0
run_error=0;verify_error=0;sleep 15 ;NO_RED_OUTPUT=false ./chaincode-invoke.sh testchannel17094 org1 reference_testchannel17094 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-exit-code.sh ;verify_error=$(($run_error | $verify_error | $?));NO_RED_OUTPUT=false ./chaincode-query.sh testchannel17094 org2 reference_testchannel17094 ;run_error=$?;/home/kilpio/CodeLab/merge_test/fabric-starter/test/verify/test-exit-code.sh;verify_error=$(($run_error | $verify_error | $?));[[ $verify_error = "0" ]]
[1m[37m---------------------------(B[m
[1m[37mStep: 21_api: Test 'Test chaincode invocation in ORG1 and query in ORG2'(B[m
[1m[37m---------------------------(B[m
RUN: sleep 15 RUNTEST: chaincode-invoke.sh testchannel17094 org1 reference_testchannel17094 VERIFY: test-exit-code.sh RUNTEST: chaincode-query.sh testchannel17094 org2 reference_testchannel17094 VERIFY: test-exit-code.sh
[1;36m
Invoke test chaincode on the [testchannel17094] channel'[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/users {"username":"user4","password":"passw"}
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDYxMn0.40ocQCnb6BDRNkz6FwgaeCaRRhjn6jzU58eKbMv4r1A"200 _ result
body is "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDYxMn0.40ocQCnb6BDRNkz6FwgaeCaRRhjn6jzU58eKbMv4r1A", code is 200
Got JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDYxMn0.40ocQCnb6BDRNkz6FwgaeCaRRhjn6jzU58eKbMv4r1A  with http status code 200
setExitCode: 0
[1;32mOK: JWT token obtained.[m[m[m
queryContainerNetworkSettings returns: 4000
restQuery: curlRequest http://127.0.0.1:4000/channels/testchannel17094/chaincodes/{reference_testchannel17094} {"fcn":"put","args":["testchannel17094","testchannel17094"],"waitForTransactionEvent":true} eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyNCIsImlhdCI6MTU4ODE1MDYxMn0.40ocQCnb6BDRNkz6FwgaeCaRRhjn6jzU58eKbMv4r1A
[31mcurlRequest: (curl exit code: 0) (B[m
curlGetIt got _ {"txid":"8c75613599de1afa8d1e911efd0b6184b9e1b914de849a0bcd9acb44cc95804f","status":"VALID","blockNumber":"4"}200 _ result
body is {"txid":"8c75613599de1afa8d1e911efd0b6184b9e1b914de849a0bcd9acb44cc95804f","status":"VALID","blockNumber":"4"}, code is 200
restAPIWrapper: exit code:: 0 result:: {"txid":"8c75613599de1afa8d1e911efd0b6184b9e1b914de849a0bcd9acb44cc95804f","status":"VALID","blockNumber":"4"} 200
[37m[4mexitCode: 0  httpStatusCode: 2xx (B[m
setExitCode: 0
[1;32mOK: Chaincode [] invoked sucsessfuly[m[m[m
[1;35m
Checking exit code...[m[m[m
[1;32mOK: Exit code is OK: (0)[m[m[m
[1;36m
Query test chaincode on the [testchannel17094] channel'[m[m[m
queryContainerNetworkSettings returns: 8051
eval ./chaincode-query.sh testchannel17094 reference_testchannel17094 '["range","testchannel17094"]'
[1;32mExecute: docker-compose -f ./docker-compose.yaml    run --no-deps --rm cli.peer bash -c container-scripts/network/chaincode-query.sh testchannel17094 reference_testchannel17094 '["range","testchannel17094"]'[m[m[m
CORE_PEER_ADDRESS=peer0.org2.example.com:8051 peer chaincode query -n reference_testchannel17094 -C testchannel17094 -c '{"Args":["range","testchannel17094"]}'
[{"key":"testchannel17094","value":"testchannel17094"}]
setExitCode: 0
[1;32mOK: Chaincode [] queried sucsessfuly[m[m[m
[1;35m
Checking exit code...[m[m[m
[1;32mOK: Exit code is OK: (0)[m[m[m
Step 21_api: exit code 0
