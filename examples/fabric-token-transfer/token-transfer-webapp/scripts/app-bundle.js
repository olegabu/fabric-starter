define("text!styles/spinners.css",["module"],function(e){e.exports=".spinner-blocker-screen {\n  z-index: 9990;\n  height: 100%;\n  width: 100%;\n  background: #000000;\n  opacity: 0.2;\n  left: 0;\n  top: 0;\n  position: fixed;\n}\n.spinner-screen {\n  z-index: 9991;\n  /*margin: 100px auto;*/\n  position: fixed;\n  left: 50%;\n  top: 200px;\n\n  margin: auto auto;\n  width: 40px;\n  height: 40px;\n  background-color: #AA0000;\n\n  -webkit-animation: sk-rotateplane 1.2s infinite ease-in-out;\n  animation: sk-rotateplane 1.2s infinite ease-in-out;\n}\n\n\n.spinner-blocker-context {\n  /*cursor: not-allowed;*/\n  background: rgba(0, 0, 0, 0.2);\n  /*pointer-events: none;*/\n  /*content: \" \";*/\n  z-index: 9990;\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  color: white;\n\n  animation: sk-colorfade 10s;\n  -webkit-animation: sk-colorfade 10s;\n}\n\n.spinner-context {\n  z-index: 9991;\n  position: absolute;\n  left: calc(50% - 20px);\n  top: calc(50% - 20px);\n\n  margin: auto auto;\n  width: 40px;\n  height: 40px;\n  background-color: #d9edf7;\n\n  -webkit-animation: sk-rotateplane 1.2s infinite ease-in-out;\n  animation: sk-rotateplane 1.2s infinite ease-in-out;\n}\n\n\n@keyframes sk-colorfade\n{\n  0%   {background: rgba(0, 0, 0, 0);}\n  100% {background: rgba(0, 0, 0, 0.2);}\n}\n\n@-webkit-keyframes sk-colorfade\n{\n  0%   {background: rgba(0, 0, 0, 0);}\n  100% {background: rgba(0, 0, 0, 0.2);}\n}\n\n\n@-webkit-keyframes sk-rotateplane {\n  0% { -webkit-transform: perspective(120px) }\n  50% { -webkit-transform: perspective(120px) rotateY(180deg) }\n  100% { -webkit-transform: perspective(120px) rotateY(180deg)  rotateX(180deg) }\n}\n\n@keyframes sk-rotateplane {\n  0% {\n    transform: perspective(120px) rotateX(0deg) rotateY(0deg);\n    -webkit-transform: perspective(120px) rotateX(0deg) rotateY(0deg)\n  } 50% {\n      transform: perspective(120px) rotateX(-180.1deg) rotateY(0deg);\n      -webkit-transform: perspective(120px) rotateX(-180.1deg) rotateY(0deg)\n    } 100% {\n        transform: perspective(120px) rotateX(-180deg) rotateY(-179.9deg);\n        -webkit-transform: perspective(120px) rotateX(-180deg) rotateY(-179.9deg);\n      }\n}\n\n\n\n.progress-line, .progress-line:before {\n  height: 3px;\n  width: 100%;\n  margin: 0;\n}\n.progress-line {\n  background-color: #b3d4fc;\n  display: -webkit-flex;\n  display: flex;\n}\n.progress-line:before {\n  background-color: #3f51b5;\n  content: '';\n  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n}\n@-webkit-keyframes running-progress {\n  0% { margin-left: 0px; margin-right: 100%; }\n  50% { margin-left: 25%; margin-right: 0%; }\n  100% { margin-left: 100%; margin-right: 0; }\n}\n@keyframes running-progress {\n  0% { margin-left: 0px; margin-right: 100%; }\n  50% { margin-left: 25%; margin-right: 0%; }\n  100% { margin-left: 100%; margin-right: 0; }\n}\n"}),define("text!styles/app.css",["module"],function(e){e.exports='div.tooltip {\n  position: absolute;\n  width: auto;\n  padding: 10px;\n  background-color: #ffffff;\n  top: 0px;\n  visibility: hidden;\n  transition: all 0.15s ease;\n  color: #333;\n  border-radius: 5px;\n  border-style: outset;\n  box-shadow: 2px 2px 1px silver;\n  margin-top: -50px;\n  margin-left: 20px;\n}\n\ninput:hover + div.tooltip {\n  opacity: 1.0;\n  visibility: visible;\n  transition: all 0.15s ease;\n  color: #000;\n  border-radius: 4px;\n  box-shadow: 2px 2px 1px silver;\n}\n\n/*table section*/\n.aut-sort:before{\n  font-family: FontAwesome;\n  padding-right: 0.5em;\n  width: 1.28571429em;\n  display: inline-block;\n  text-align: center;\n}\n\n.aut-sortable:before{\n  content: "\\f0dc";\n}\n\n.aut-asc:before{\n  content: "\\f160";\n}\n\n.aut-desc:before{\n  content: "\\f161";\n}\n\n.table td, .table th {\n  padding: .25rem;\n  vertical-align: unset;\n}\n\n.multi-tab-form .tab-pane {\n  margin-top: 5px;\n}\n\n.aut-row-handy-sel{\n  background-color : #d9edf7 !important;\n}\n\n.widget-selected {\n  background-color : #d9edf7 !important;\n}\n\n.aut-table-container{\n  position: relative;\n\n}\n\n.aut-table-head {\n  white-space: nowrap !important;\n}\n\n.aut-table-body{\n\n}\n\n.aut-pager-container{\n  /*position: absolute;*/\n  width: 100%;\n  margin-bottom: 5px;\n  display: flex;\n}\n\n.aut-pager-pages > ul{\n  margin-bottom: 0px;\n}\n\n.aut-table-card{\n  /*margin-top: 0.5rem;*/\n  /*margin-bottom: 1.3rem;*/\n\n  display: flex;\n  flex-direction: column;\n\n  /*margin-top: 0.5rem;*/\n  /*margin-bottom: -1rem;*/\n  /*padding-bottom: 1rem;*/\n\n  /*padding: 0px 0px 0px 0px;*/\n}\n\n.aut-splitter-card{\n  margin-top: 0.1rem;\n  margin-bottom: 0.1rem;\n}\n\n.aut-splitter-card > div.card-body {\n  padding: 0.2rem;\n}\n\n.aut-table-card-title{\n  position: absolute;\n  top: 1px;\n  left: 3px;\n}\n\n.aut-form-card-container{\n  /*display: flex;*/\n}\n\n.aut-form-card{\n  /*padding: 0;*/\n}\n\n.aut-form-card-close {\n  margin-left: 15px;\n  margin-top: 15px;\n  margin-right: auto;\n  float: left;\n  display: flex;\n  cursor: pointer;\n  color: #5cb85c;\n}\n\n.aut-tooltip-container{\n  position: relative;\n  display: inline-block;\n  /*border-bottom: 1px dotted black; */\n}\n\n.aut-tooltip-container .aut-tooltip {\n  visibility: hidden;\n  width: 120px;\n  background-color: black;\n  color: #fff;\n  text-align: center;\n  padding: 5px 0;\n  border-radius: 6px;\n\n  /* Position the tooltip text - see examples below! */\n  position: absolute;\n  z-index: 1;\n  top: -5px;\n  right: 125%;\n}\n\n.aut-tooltip-container .aut-tooltip::after {\n  content: " ";\n  position: absolute;\n  top: 50%;\n  left: 100%; /* To the right of the tooltip */\n  margin-top: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: transparent transparent transparent black;\n}\n\n.aut-tooltip-container:hover .aut-tooltip {\n  visibility: visible;\n  opacity: 1;\n}\n\n\n.aut-row-body-headed > tr{\n\n}\n\n.aut-table-headed tbody:nth-child(odd){\n  background-color: rgba(222, 226, 230,.05);\n}\n\n.aut-table-headed tbody:nth-child(even){\n  background-color: rgba(0,0,0,.05);\n}\n\n.aut-row-body-headed  th{\n  font-size: small;\n}\n\n.aut-row-body-headed  th[colspan]{\n  text-align: center;\n}\n\n\n.aut-row-body-headed td[rowspan] {\n  vertical-align:middle;\n}\n\n.aut-unicode-glyph {\n  font-family: FontAwesome;\n  padding-right: 0.5em;\n  width: 1.28571429em;\n  display: inline-block;\n  text-align: center;\n}\n\n.aut-valid:before {\n  content: "\\f14a";\n}\n\n.aut-notvalid:before {\n  content: "\\f071";\n}\n\nth[data-filtered="filtered"]:after {\n  font-family: FontAwesome;\n  padding-right: 0.5em;\n  width: 1.28571429em;\n  display: inline-block;\n  text-align: center;\n  margin-left: 10px;\n  content: "\\f0b0";\n}\n\n\n.widget-row-40p {\n  /*display: table-row;*/\n  overflow-y: auto;\n  /*overflow-x: hidden ;*/\n  height:40vh;\n}\n\n.widget-row-60p {\n  /*display: table-row;*/\n  overflow-y: scroll;\n  overflow-x: hidden ;\n\n  height:60vh;\n}\n\n.widget-row-full {\n  /*display: flex;*/\n  flex: 1;\n  overflow-y: auto;\n  /*min-height: 100%;*/\n\n  /*overflow-x: hidden ;*/\n  /*height:calc(100vh - 184px);*/\n}\n\n.flex-fill-column {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow-y: auto;\n}\n\n.scrolled-menu {\n  height: auto;\n  max-height: 40vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.dropdown-menu > li > .dropdown-menu-item {\n  clear: both;\n  color: #333;\n  display: block;\n  padding: 3px 20px;\n  white-space: nowrap;\n  margin: 5px 0;\n  width: 100%;\n  text-align: left;\n  text-decoration: none;\n  outline: none;\n  cursor: pointer;\n  -moz-user-select: none;\n  user-select: none;\n}\n/*.dropdown-menu > li:hover .dropdown-menu-item,*/\n/*.dropdown-menu > li:focus .dropdown-menu-item{*/\n  /*background-color: #f5f5f5;*/\n  /*color: #262625;*/\n/*}*/\n.dropdown-menu > li > .dropdown-menu-item.checkbox {\n  margin: 0 0 0 10px;\n  font-weight: normal;\n}\n\n.dropdown-menu > li > .dropdown-menu-item.checkbox input {\n  display: none;\n}\n\n.page-footer {\n  /*position: absolute;*/\n  /*bottom: 0;*/\n  width: 100%;\n\n  height: 2.5rem;\n  line-height: 2.5rem;\n  background-color: #f5f5f5;\n\n  position: relative;\n  display: flex;\n\n  flex-direction: column;\n  max-height: 100%;\n  z-index: 100;\n\n  flex: none;\n}\n\n\nbody > .container {\n  padding: 2.5rem 15px 0;\n}\n\nhtml, body {\n  height: 100%;\n  margin: 0;\n  /*min-height: 100%;*/\n}\n\nbody {\n  display: flex;\n  flex-direction: column;\n}\n\n.page-footer > .container {\n  padding-right: 15px;\n  padding-left: 15px;\n}\n\n.page-footer.opened{\n  height: 150px;\n}\n\n.page-footer.closed{\n  height: 2.5rem;\n}\n\n.page-wrapper {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  /*width: 100vw;*/\n  width: 100%;\n}\n\n\n.tools-body-wrapper {\n  height: calc(100% - 2.5rem);\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n/*display: flex;*/\n/*position: relative;*/\n/*background-color: rgb(28, 32, 34);*/\n/*height: calc(100% - 2.5rem);*/\n\n/*.page-header, .page-footer {*/\n  /*background: silver;*/\n/*}*/\n\n.page-content {\n  flex: 1;\n  overflow: auto;\n  position: relative;\n  /*flex: 1 1 0%;*/\n}\n\n\n.alert-status:before{\n  font-family: FontAwesome;\n  font-size: 1em;\n  padding-right: 0.5em;\n  width: 1em;\n  display: inline-block;\n  text-align: center;\n  color: rgba(128, 128, 128, 0.5);\n}\n\n.alert-transit {\n  -webkit-animation: running-alert 5s forwards;\n  animation: running-alert 5s forwards;\n}\n\n.alert-transit:before {\n  -webkit-animation: running-alert 5s forwards;\n  animation: running-alert 5s forwards;\n}\n\n\n.alert-passiv {\n  /*color: rgba(128, 128, 128, 0.5) !important;*/\n}\n\n.alert-passiv:before {\n  /*color: rgba(128, 128, 128, 0.5) !important;*/\n}\n\n@-webkit-keyframes running-alert {\n  0% { background-color: lightgrey}\n  100% { background-color: rgba(128, 128, 128, 0.0);}\n}\n@keyframes running-alert {\n  0% { background-color: lightgrey}\n  100% { background-color: rgba(128, 128, 128, 0.0);}\n}\n\n/*fading of alert switched off*/\n/*.alert-passiv {*/\n/*color: rgba(128, 128, 128, 0.5) !important;*/\n/*}*/\n\n/*.alert-passiv:before {*/\n/*color: rgba(128, 128, 128, 0.5) !important;*/\n/*}*/\n\n\n/*@-webkit-keyframes running-alert {*/\n/*0% { }*/\n/*100% { color: rgba(128, 128, 128, 0.5);}*/\n/*}*/\n/*@keyframes running-alert {*/\n/*0% { }*/\n/*100% { color: rgba(128, 128, 128, 0.5);}*/\n/*}*/\n/*fading switched off*/\n\n\n.alert-status-danger:before{\n  content: "\\f071";\n  color: #dc3545;\n}\n\n.alert-status-danger {\n  color: #dc3545;\n}\n\n\n.alert-status-success:before{\n  content: "\\f058";\n  color: #28a745;\n}\n\n.alert-status-success {\n  color: #28a745;\n}\n\n.alert-status-info:before{\n  content: "\\f129";\n  color: #17a2b8;\n}\n\n.alert-status-info {\n  color: #17a2b8;\n}\n\n.alert-status-pending:before{\n  content: "\\f017";\n  color: #ffc107;\n}\n\n.alert-status-pending {\n  color: #ffc107;\n}\n\n/*.notifications-scroll-area {*/\n  /*height: 200px;*/\n  /*position: relative;*/\n  /*overflow: auto;*/\n/*}*/\n\n.notifications-hdr {\n  position: relative;\n  display: flex;\n  -moz-box-align: center;\n  align-items: center;\n  font-size: 0.875rem;\n  height: 2.5rem;\n  min-height: 2.5rem;\n  color: rgba(128, 128, 128, 0.8);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n  box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 3px;\n  flex-direction: row;\n  padding-left: 10px;\n}\n\n.hdr-block-right {\n  position: absolute;\n  right: 1rem;\n  /*font-size: 1.125rem;*/\n  display: inline-flex;\n}\n\n.hdr-badge {\n  transition: all 0.3s ease 0s;\n  display: inline-flex;\n  -moz-box-pack: center;\n  justify-content: center;\n  -moz-box-align: center;\n  align-items: center;\n  font-size: 0.5rem;\n  margin-left: 0.25rem;\n  border-radius: 50%;\n  height: 16px;\n  width: 16px;\n  color: rgba(255, 255, 255, 0.4);\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.hdr-block-btn {\n  transition: color 0.2s ease 0s;\n  display: flex;\n  -moz-box-align: center;\n  align-items: center;\n  height: calc(-1px + 2rem);\n  padding: 0px 1rem;\n  cursor: pointer;\n  font-weight: 600;\n  /*color: rgb(255, 255, 255);*/\n  /*background-color: rgb(36, 40, 42);*/\n}\n\n.alert-block-btn {\n  cursor: pointer;\n  font-weight: 600;\n}\n\n.notifications-scroll-area {\n  /*background-color: rgb(36, 40, 42);*/\n  /*color: rgba(255, 255, 255, 0.8);*/\n  font-family: Menlo, monospace;\n  font-size: 14px;\n  display: flex;\n  flex-direction: column;\n  /*border-color: rgb(25, 28, 29);*/\n  max-height: calc(100% - 2.5rem);\n  line-height: 1rem;\n  /*max-height: 100%;*/\n  width: 100%;\n  height: 100%;\n}\n\n.notifications-stack {\n  -moz-box-flex: 1;\n  flex-grow: 1;\n  overflow: hidden auto;\n  /*white-space: pre-wrap;*/\n}\n\n.notification-it {\n  position: relative;\n  display: flex;\n  background-color: transparent;\n  border-top: 1px solid rgb(255, 255, 255);\n  border-bottom: 1px solid rgb(255, 255, 255);\n  margin-top: -1px;\n  margin-bottom: 0px;\n  padding-left: 10px;\n  box-sizing: border-box;\n}\n\n.notification-it.info {\n  color: #17a2b8;\n}\n\n.notification-it.success {\n  color: #28a745;\n}\n\n.notification-it.danger {\n  color: #dc3545;\n}\n\n.notification-it:before{\n  font-family: FontAwesome;\n  font-size: 1em;\n  padding-right: 0.75em;\n  width: 1em;\n  display: inline-block;\n  text-align: center;\n}\n\n.notification-it.info:before {\n  color: #17a2b8;\n  content: "\\f129";\n}\n\n.notification-it.success:before {\n  color: #28a745;\n  content: "\\f058";\n}\n\n.notification-it.danger:before {\n  color: #dc3545;\n  content: "\\f071";\n}\n\n.navbar-light .navbar-nav .nav-link.dimmed {\n  color: rgba(0,0,0,.3);\n}\n\n.inline-cont{\n  display: flex;\n  flex-wrap: nowrap;\n  align-items: stretch;\n}\n\n.inline-cont>* {\n  /*flex: 1 1 160px;*/\n  flex: 0 1 auto;\n}\n\n.inline-cont-item{\n  flex: 0 1 auto;\n  justify-content:left!important;\n  white-space: normal;\n}\n\n.inline-cont-item2 {\n  justify-content:left!important;\n  width: 100%!important;\n  white-space: normal;\n}\n'}),define("services/validation-service",[],function(){}),define("services/socket-service",["exports","aurelia-framework","aurelia-event-aggregator","./alert-service","socket.io-client","../config"],function(e,n,t,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SocketService=void 0;var a,l,s=(a=r)&&a.__esModule?a:{default:a};var c=n.LogManager.getLogger("SocketService");e.SocketService=(0,n.inject)(t.EventAggregator,i.AlertService)(l=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventAggregator=n,this.alertService=t,this.socket=s.default.connect(o.Config.getUrl())}return e.prototype.subscribe=function(){var e=this;c.info("subscribe socket.connected",this.socket.connected),this.subscribed||this.socket.on("chainblock",function(n){c.debug("chainblock",n),e.alertService.success("new block "+n.number+" on "+n.channel_id,"PUT"),e.eventAggregator.publish("block",n)}),this.subscribed=!0},e.prototype.disconnect=function(){this.subscribed=!1,this.socket.disconnect()},e}())||l}),define("services/identity-service",["exports","aurelia-framework","aurelia-fetch-client","./alert-service","./config-service","../config"],function(e,n,t,i,r,o){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityService=void 0;var l=n.LogManager.getLogger("IdentityService"),s=o.Config.getUrl("users");e.IdentityService=(0,n.inject)(n.Aurelia,t.HttpClient,r.ConfigService)(a=function(){function e(n,t,i){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.aurelia=n,this.http=t,this.configService=i,this.configService.get().then(function(e){r.org=e.org})}return e.getJwt=function(n,t){return localStorage.getItem(e.key(n,t))},e.key=function(e,n){return"jwt"+(e?e.name+n:"")},e.setJwt=function(n,t,i){localStorage.setItem(e.key(t,i),n)},e.prototype.enroll=function(n,i,r){var o=this,a=e.getJwt(r,n);if(a)return l.debug("already enrolled "+r.name+" "+n,a),Promise.resolve();var c=r?r.url+"/users":s,u={username:n,password:i};return new Promise(function(i,a){o.http.fetch(c,{method:"post",body:(0,t.json)(u)}).then(function(t){t.json().then(function(s){t.ok?(l.debug(s),e.setJwt(s,r,n),o.username=n,r||o.aurelia.setRoot("app"),i()):a(new Error("cannot enroll "+t.status+" "+s))})}).catch(function(e){a(e)})})},e.prototype.logout=function(){return localStorage.clear(),this.aurelia.setRoot("login")},e}())||a}),define("services/file-service",["exports","aurelia-framework"],function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileService=void 0;n.LogManager.getLogger("FileService"),e.FileService=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}}),define("services/config-service",["exports","aurelia-framework","aurelia-fetch-client","../config"],function(e,n,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigService=void 0;var o=n.LogManager.getLogger("ConfigService");e.ConfigService=(0,n.inject)(t.HttpClient)(r=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.http=n}return e.prototype.get=function(){var e=this;return new Promise(function(n,t){e.http.fetch(i.Config.getUrl("mspid")).then(function(e){return e.json()}).then(function(t){o.debug("mspid",t),e.config={org:t},n(e.config)}).catch(function(e){t(e)})})},e}())||r}),define("services/chaincode-service",["exports","aurelia-framework","aurelia-fetch-client","./identity-service","./alert-service","../config"],function(e,n,t,i,r,o){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.ChaincodeService=void 0;var l=n.LogManager.getLogger("ChaincodeService"),s=o.Config.getUrl("channels/");e.ChaincodeService=(0,n.inject)(t.HttpClient,i.IdentityService,r.AlertService)(a=function(){function e(n,t,i){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.identityService=t,this.http=n,this.alertService=i,this.mspID=this.identityService.org}return e.prototype.fetch=function(e,n,r,o,a){var s=this;return l.debug("fetch",n),l.debug(JSON.stringify(n)),new Promise(function(c,u){var d=i.IdentityService.getJwt(o,a),p=void 0;if("get"===r){var f="";n&&(f="?"+Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")),p=s.http.fetch(""+e+f,{headers:{Authorization:"Bearer "+d}})}else p=s.http.fetch(e,{method:r,body:(0,t.json)(n),headers:{Authorization:"Bearer "+d}});p.then(function(e){401===e.status&&(s.alertService.info("session expired, logging you out"),s.identityService.logout(),u(new Error("Session expired, logging you out"))),e.json().then(function(n){if(l.debug("fetch",n),e.ok)c(n);else{var t=e.statusText+" "+n;401===e.status?(s.alertService.info("session expired, logging you out"),s.identityService.logout()):s.alertService.error(t),u(new Error(t))}})}).catch(function(e){s.alertService.error("caught "+e),u(e)})})},e.prototype.getBilateralChannels=function(){var e=this;return this.getChannels().then(function(n){return n.filter(function(n){var t=n.split("-");return 2===t.length&&(t[0]===e.identityService.org||t[1]===e.identityService.org)})})},e.prototype.getChannels=function(e,n){var t=this;l.debug("getChannels "+e+" "+n);var i=s;return new Promise(function(r,o){t.fetch(i,null,"get",e,n).then(function(e){var n=e.map(function(e){return e.channel_id});r(n)}).catch(function(e){o(e)})})},e.prototype.query=function(e,n,i,r,o,a){var c=this;l.debug("query channel="+e+" chaincode="+n+" func="+i+" "+o+" "+a,r);var u=o?o.url+"/channels/":s,d={fcn:i,args:(0,t.json)(r),targets:(0,t.json)([])};return new Promise(function(t,i){c.alertService.pending("data fetching .."),c.fetch(""+u+e+"/chaincodes/"+n,d,"get",o,a).then(function(e){l.debug("query result:",e),c.alertService.success("data fetched successfully");var n=JSON.parse(e[0]);l.debug("result:",n),t(n)}).catch(function(e){i(e)})})},e.prototype.getOrgs=function(e,n,t){var i=this;l.debug("get ORGS for channel="+e);var r=n?n.url+"/channels/":s;return new Promise(function(o,a){i.fetch(""+r+e+"/orgs",void 0,"get",n,t).then(function(e){o(e)}).catch(function(e){a(e)})})},e.prototype.invoke=function(e,n,i,r,o,a){var c=this;l.debug("invoke channel="+e+" chaincode="+n+" func="+i+" "+o+" "+a,r);var u=o?o.url+"/channels/":s,d={fcn:i,args:r,targets:(0,t.json)([])};return new Promise(function(t,i){c.alertService.pending("data updating ..","PUT"),c.fetch(""+u+e+"/chaincodes/"+n,d,"post",o,a).then(function(e){t(e.transaction)}).catch(function(e){i(e)})})},e.prototype.invokeWithTransient=function(e,n,i,r,o,a,c){var u=this;l.debug("invoke channel="+e+" chaincode="+n+" func="+i+" "+a+" "+c,o);var d=a?a.url+"/channels/":s,p={fcn:i,args:r,targets:(0,t.json)([]),transientMap:o};return new Promise(function(t,i){u.alertService.pending("data updating ..","PUT"),u.fetch(""+d+e+"/chaincodes/"+n,p,"post",a,c).then(function(e){t(e.transaction)}).catch(function(e){i(e)})})},e}())||a}),define("services/alert-service",["exports","aurelia-framework"],function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlertService=void 0;n.LogManager.getLogger("AlertService");var t=50;e.AlertService=function(){function e(){var n=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.onNewMessage=function(e){var i=n._alertMessages.find(function(n){return"pending"===n.type&&n.scope===e.scope});n._alertMessages.length>0&&e.type===n._alertMessages[0].type&&"success"===e.type&&e.message===n._alertMessages[0].message&&"GET"===e.scope?n._alertMessages[0].time=new Date:i&&"pending"===e.type?i.time=new Date:i&&"pending"!==e.type?(n._alertMessages=n._alertMessages.filter(function(n){return!("pending"===n.type&&n.scope===e.scope)}),n._alertMessages.length>0&&e.type===n._alertMessages[0].type&&"success"===e.type&&e.message===n._alertMessages[0].message&&"GET"===e.scope?n._alertMessages[0].time=new Date:n._alertMessages.unshift(e)):(n._alertMessages.unshift(e),n._alertMessages.length>t&&n._alertMessages.splice(-1,1))},this._alertMessages=[]}return e.prototype.pending=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Awaiting..";this.onNewMessage({type:"pending",title:t,message:e,time:new Date,scope:n})},e.prototype.info=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Information";this.onNewMessage({type:"info",title:t,message:e,time:new Date,scope:n})},e.prototype.error=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Error";this.onNewMessage({type:"danger",title:t,message:e,time:new Date,scope:n})},e.prototype.success=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Success";this.onNewMessage({type:"success",title:t,message:e,time:new Date,scope:n})},e}()}),define("resources/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){}}),define("text!resources/elements/widgets/table-view-text.html",["module"],function(e){e.exports='<template bindable="">\n  <require from="./../field-value-converters"></require>\n\n  text11\n</template>\n'}),define("text!resources/elements/widgets/table-view-key.html",["module"],function(e){e.exports='<template bindable="">\n  <require from="./key"></require>\n\n\n</template>\n'}),define("resources/elements/widget-multisel-list",["exports","aurelia-framework"],function(e,n){"use strict";function t(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function i(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}var r,o,a,l,s;Object.defineProperty(e,"__esModule",{value:!0}),e.WidgetMultiselListCustomElement=void 0;e.WidgetMultiselListCustomElement=(r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"options",o,this),t(this,"selectedChangeCallback",a,this),t(this,"onReadError",l,this),t(this,"fixHeight",s,this),this.loading=!1}return e.prototype.dismissFormClicked=function(e){console.log("dismissFormClicked"),this.dismissFormCallback&&this.dismissFormCallback()},e.prototype.optionClicked=function(e){e.selected=!e.selected,null!=this.selectedChangeCallback&&this.selectedChangeCallback({data:this.options.filter(function(e){return e.selected})})},e}(),o=i(r.prototype,"options",[n.bindable],{enumerable:!0,initializer:function(){return[]}}),a=i(r.prototype,"selectedChangeCallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),l=i(r.prototype,"onReadError",[n.bindable],{enumerable:!0,initializer:function(){return null}}),s=i(r.prototype,"fixHeight",[n.bindable],{enumerable:!0,initializer:function(){return null}}),r)}),define("text!resources/elements/widget-multisel-list.html",["module"],function(e){e.exports='<template>\n\n  <div class="container">\n    <div class="row">\n      <div class="col">\n        <div class="list-group mt-12" style.bind="fixHeight != null ? \'height: \' + fixHeight + \'px; overflow-y: scroll;\' : \'\'">\n\n          <a repeat.for="$o of options" click.trigger="optionClicked($o)" href="#" class.bind="\'list-group-item list-group-item-action \' + ($o.selected ? \'widget-selected\' : \'\')" >\n            <div class="custom-control custom-checkbox float-left">\n              <input type="checkbox" class="custom-control-input" id.bind="\'option-\' + $o.id" checked.bind="$o.selected" />\n              <label class="custom-control-label" for.bind="\'option-\' + $o.id">${$o.title}</label>\n              \x3c!--for.bind="${‘option-id-’+{o.id}}"--\x3e\n            </div>\n          </a>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n</template>\n'}),define("resources/elements/widget-entity-crud",["exports","aurelia-framework"],function(e,n){"use strict";function t(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function i(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}var r,o,a,l,s,c,u,d,p,f,b,g,m,h;Object.defineProperty(e,"__esModule",{value:!0}),e.WidgetEntityCrudCustomElement=void 0;e.WidgetEntityCrudCustomElement=(r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"showForm",o,this),t(this,"showViewOnly",a,this),t(this,"entityTitle",l,this),t(this,"buttonAVisible",s,this),t(this,"buttonAName",c,this),t(this,"buttonACallback",u,this),t(this,"buttonBVisible",d,this),t(this,"buttonBName",p,this),t(this,"buttonBCallback",f,this),t(this,"buttonCVisible",b,this),t(this,"buttonCName",g,this),t(this,"buttonCCallback",m,this),t(this,"backActionCallback",h,this)}return e.prototype.backAction=function(e){this.backActionCallback&&this.backActionCallback()},e.prototype.buttonAClicked=function(){this.buttonACallback&&this.buttonACallback()},e.prototype.buttonBClicked=function(e){this.buttonBCallback&&this.buttonBCallback()},e.prototype.buttonCClicked=function(e){this.buttonCCallback&&this.buttonCCallback()},e}(),o=i(r.prototype,"showForm",[n.bindable],{enumerable:!0,initializer:function(){return!1}}),a=i(r.prototype,"showViewOnly",[n.bindable],{enumerable:!0,initializer:function(){return!1}}),l=i(r.prototype,"entityTitle",[n.bindable],{enumerable:!0,initializer:function(){return null}}),s=i(r.prototype,"buttonAVisible",[n.bindable],{enumerable:!0,initializer:function(){return!0}}),c=i(r.prototype,"buttonAName",[n.bindable],{enumerable:!0,initializer:function(){return"save"}}),u=i(r.prototype,"buttonACallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),d=i(r.prototype,"buttonBVisible",[n.bindable],{enumerable:!0,initializer:function(){return!1}}),p=i(r.prototype,"buttonBName",[n.bindable],{enumerable:!0,initializer:function(){return"cancel"}}),f=i(r.prototype,"buttonBCallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),b=i(r.prototype,"buttonCVisible",[n.bindable],{enumerable:!0,initializer:function(){return!1}}),g=i(r.prototype,"buttonCName",[n.bindable],{enumerable:!0,initializer:function(){return"delete"}}),m=i(r.prototype,"buttonCCallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),h=i(r.prototype,"backActionCallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),r)}),define("text!resources/elements/widget-entity-crud.html",["module"],function(e){e.exports='<template class="flex-fill-column">\n\n  <div class="card flex-fill-column" show.bind="!showForm && !showViewOnly">\n    <div class="card-body aut-table-card">\n      \x3c!--<span class="aut-table-card-title" if.bind="entityTitle" t.bind="entityTitle"></span>--\x3e\n      <template replaceable part="handy-table-part">Table Placeholder.</template>\n    </div>\n  </div>\n\n  \x3c!--<div class="card aut-splitter-card" >--\x3e\n    \x3c!--<div class="card-body">--\x3e\n    \x3c!--</div>--\x3e\n  \x3c!--</div>--\x3e\n\n  <div class="card flex-fill-column aut-form-card-container" show.bind="showForm">\n    <span if.bind="backActionCallback" class="aut-form-card-close" click.trigger="backAction($event)">\n      \x3c!--<span class="aut-tooltip" t="closeWindow"></span>--\x3e\n      <i class="fa fa-arrow-circle-left fa-2x"></i>\n    </span>\n\n    <div class="card-body aut-form-card">\n      \x3c!--<h5 class="card-title"></h5>--\x3e\n      <form submit.delegate="buttonAClicked()" >\n        <template replaceable part="handy-form-part">Form placeholder</template>\n\n        <div class="form-group mt-1">\n          <div class="d-inline" if.bind="buttonAVisible">\n            <button type="submit" class="btn btn-success" t="${buttonAName}">save</button>\n          </div>\n          <div class="d-inline" if.bind="buttonBVisible">\n            <button type="button" class="btn btn-success" click.trigger="buttonBClicked($event)" t="${buttonBName}">cancel</button>\n          </div>\n          <div class="d-inline" if.bind="buttonCVisible">\n            <button class="btn btn-danger float-right" click.trigger="buttonCClicked($event)" t="${buttonCName}">delete</button>\n          </div>\n        </div>\n\n      </form>\n\n    </div>\n  </div>\n\n  <div class="card aut-form-card-container" show.bind="showViewOnly">\n    <span if.bind="backActionCallback" class="aut-form-card-close" click.trigger="backAction($event)">\n      \x3c!--<span class="aut-tooltip" t="closeWindow"></span>--\x3e\n      <i class="fa fa-arrow-circle-left fa-2x"></i>\n    </span>\n\n    <div class="card-body aut-form-card">\n      <template replaceable part="handy-viewonly-part">View Only placeholder</template>\n    </div>\n  </div>\n\n</template>\n'}),define("resources/elements/spinner",["exports","aurelia-framework"],function(e,n){"use strict";function t(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function i(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}var r,o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.SpinnerCustomElement=void 0;e.SpinnerCustomElement=(o=i((r=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"busy",o,this),t(this,"mode",a,this)}).prototype,"busy",[n.bindable],{enumerable:!0,initializer:function(){return!1}}),a=i(r.prototype,"mode",[n.bindable],{enumerable:!0,initializer:function(){return"context"}}),r)}),define("text!resources/elements/spinner.html",["module"],function(e){e.exports='<template>\n  \x3c!--show.bind="busy"--\x3e\n  <div show.bind="busy">\n    <div class="progress-line"></div>\n    \x3c!--<div class="spinner-context"></div>--\x3e\n    <div class="spinner-blocker-context"></div>\n  </div>\n</template>\n'}),define("resources/elements/key",["exports","aurelia-framework"],function(e,n){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCustomElement=void 0;e.KeyCustomElement=(0,n.bindable)({name:"o",attribute:"data"})(t=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.oChanged=function(){if(this.o){var e=this.o,n=e.split("\0");n.length>2?(this.objectType=n[1],this.id=n[2]):this.id=e}},e}())||t}),define("text!resources/elements/key.html",["module"],function(e){e.exports='<template>\n  <abbr title="key=${o} objectType=${objectType} id=${id}">${id}</abbr>\n</template>\n'}),define("resources/elements/handy-table",["exports","aurelia-framework","./column","../../services/identity-service","../../services/chaincode-service","aurelia-validation","aurelia-event-aggregator","./expression-evaluator"],function(e,n,t,i,r,o,a,l){"use strict";function s(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function c(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}var u,d,p,f,b,g,m,h,v,y,x,w,k,C,S,z,M,A,O,V,P,E,F,_,j;Object.defineProperty(e,"__esModule",{value:!0}),e.HandyTableCustomElement=void 0;e.HandyTableCustomElement=(u=(0,n.inject)(a.EventAggregator,l.ExpressionEvaluator),d=(0,n.children)("column"),u((f=function(){function e(n,t){var i=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"tabident",b,this),s(this,"columns",g,this),s(this,"canHideColumns",m,this),s(this,"canFilterColumns",h,this),this.visiblecolumns=[],this.filteredColumns=[],s(this,"pageable",v,this),s(this,"pageSize",y,this),s(this,"page",x,this),s(this,"pagerSize",w,this),this.loading=!1,s(this,"loadingMessage",k,this),s(this,"loadingDiv",C,this),s(this,"readData",S,this),s(this,"dataSet",z,this),s(this,"onReadError",M,this),s(this,"selectedCallback",A,this),s(this,"createNewCallback",O,this),s(this,"canCreate",V,this),s(this,"canDelete",P,this),s(this,"canCancelFilter",E,this),s(this,"minHeight",F,this),s(this,"pickerDateTime1",_,this),s(this,"pickerDateTime2",j,this),this.dataList=[],this.skipRowClick=!1,this.localStoreKey="_profile.h-tab.",this.localStoreFilterSubKey=".filterst",this.sortColumn=void 0,this.sortColumnData=function(e,n,t){var r=i.sortColumn.field?i.evaluator.evaluateInterpolation("${"+i.sortColumn.field+"}",e):i.sortColumn.sortTextView({data:e}),o=i.sortColumn.field?i.evaluator.evaluateInterpolation("${"+i.sortColumn.field+"}",n):i.sortColumn.sortTextView({data:n});if(1===t){if(r<o)return-1;if(r>o)return 1}if(-1===t){if(r<o)return 1;if(r>o)return-1}return 0},this.eventAggregator=n,this.evaluator=t}return e.prototype.canFilter=function(){return this.readData},e.prototype.getFilters=function(){var e={type:"filter",expressions:[]};return this.columns.forEach(function(n){var t;n.filterActive&&(t=e.expressions).push.apply(t,n.filterExpression)}),e.expressions=e.expressions.filter(function(e){return e&&(e.value||e.values)}),e},e.prototype.getData=function(){var e=this;if(!this.readData)throw new Error("No readData method specified for table");this.loading=!0,this.readData({filter:this.getFilters()}).then(function(n){e.dataList=n,e.loading=!1}).catch(function(n){console.log(n),e.onReadError&&e.onReadError(n),e.loading=!1})},e.prototype.sort=function(e){this.sortColumn=e},e.prototype.columnsChanged=function(e){this.restoreVisibleColumns(this.columns),this.bindVisibleColumns(this.columns),this.restoreFilteredColumns(this.columns),this.bindFilteredColumns(this.columns);var n=this.columns.find(function(e){return e.defaultSort});n&&this.sort(n),this.readData&&this.getData()},e.prototype.dataSetChanged=function(e){this.dataList=this.dataSet},e.prototype.bindVisibleColumns=function(e){this.visiblecolumns=e.filter(function(e){return e.visible})},e.prototype.bindFilteredColumns=function(e){this.filteredColumns=e.filter(function(e){return e.canbefiltered})},e.prototype.getViewDataDisplay=function(e,n){return n.getviewdata?n.getviewdata({data:e}):void 0},e.prototype.createNewClicked=function(e){this.createNewCallback&&this.createNewCallback()},e.prototype.setAllFiltersClicked=function(e){this.filteredColumns.forEach(function(e){e.filterActive=!0}),this.readData&&this.getData(),this.storeFilteredColumns(this.columns),e.stopPropagation()},e.prototype.applyFiltersClicked=function(e){this.readData&&this.getData(),this.storeFilteredColumns(this.columns),e.stopPropagation()},e.prototype.filterOptionClicked=function(e){return e.stopPropagation(),!0},e.prototype.clearFiltersClicked=function(e){this.filteredColumns.forEach(function(e){e.filterActive=!1}),this.readData&&this.getData(),this.storeFilteredColumns(this.columns),e.stopPropagation()},e.prototype.keyClicked=function(e){this.skipRowClick=!0,e.$isSelected=!e.$isSelected},e.prototype.rowSelected=function(e){this.selectedCallback&&this.selectedCallback({data:e.detail.row})},e.prototype.rowClicked=function(e){try{this.skipRowClick||e&&e.$isSelected&&this.selectedCallback&&this.selectedCallback({data:null})}finally{this.skipRowClick=!1}},e.prototype.normalizeMimeType=function(e,n){return"XML"==e||"xML$"==e?"application/xml":"TEXT"==e||"tEXT$"==e?"text/plain":"Binary"==e||"binary$"==e?n.toLowerCase().endsWith(".zip")?"application/zip":"application/octet-stream":e},e.prototype.converBase64toBlob=function(e,n){n=n||"";for(var t=window.atob(e),i=[],r=0;r<t.length;r+=512){for(var o=t.slice(r,r+512),a=new Array(o.length),l=0;l<o.length;l++)a[l]=o.charCodeAt(l);var s=new Uint8Array(a);i.push(s)}return new Blob(i,{type:n})},e.prototype.dataContenttoFile=function(e,n,t){var i=this.converBase64toBlob(e,t);return new File([i],n,{type:t})},e.prototype.hasValue=function(e,n){return n.field?this.evaluator.evaluateInterpolation("${"+n.field+"}",e):void 0},e.prototype.downloadClicked=function(e,n){var t=this,i="file.txt";n.downloadGetDataCallback&&n.downloadGetDataCallback({data:e}).then(function(e){var n=t.dataContenttoFile(e.content,e.filename,t.normalizeMimeType(e.mimetype,e.filename));return i=e.filename,URL.createObjectURL(n)}).then(function(e){var n=document.createElement("a");return n.href=e,n.setAttribute("download",i),n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n),setTimeout(function(){self.URL.revokeObjectURL(n.href)},200)},50),!0})},e.prototype.hasOptionalColumns=function(){return this.canHideColumns},e.prototype.storeVisibleColumns=function(e){var n=e.map(function(e){return{key:e.storeKey,vis:e.visible}}),t=JSON.stringify(n);window.localStorage.setItem(this.localStoreKey+this.tabident,t)},e.prototype.restoreVisibleColumns=function(e){var n=window.localStorage.getItem(this.localStoreKey+this.tabident);if(n){var t=JSON.parse(n);Array.isArray(t)&&t.forEach(function(n){var t=e.find(function(e){return e.storeKey==n.key});t&&(t.visible=n.vis)})}},e.prototype.storeFilteredColumns=function(e){var n=e.map(function(e){return e.filterToJsonObject()});console.log("storeFilteredColumns"),console.log(n);var t=JSON.stringify(n);window.localStorage.setItem(this.localStoreKey+this.tabident+this.localStoreFilterSubKey,t)},e.prototype.restoreFilteredColumns=function(e){var n=window.localStorage.getItem(this.localStoreKey+this.tabident+this.localStoreFilterSubKey);if(n){var t=JSON.parse(n);Array.isArray(t)&&t.forEach(function(n){var t=e.find(function(e){return e.storeKey==n.key});t&&t.jsonObjectToFilter(n)})}},e.prototype.columnVisibilityClicked=function(e,n){n.visible=!n.visible,this.storeVisibleColumns(this.columns),this.bindVisibleColumns(this.columns),e.stopPropagation()},e.prototype.columnFiltersClicked=function(e,n){n.filterActive=!n.filterActive,this.storeFilteredColumns(this.columns),this.bindFilteredColumns(this.columns),this.readData&&this.getData(),e.stopPropagation()},e.prototype.attached=function(){var e=this;this.dataSet&&(this.dataList=this.dataSet),this.readData&&(this.subscriberBlock=this.eventAggregator.subscribe("block",function(n){e.getData()})),this.initFilters()},e.prototype.detached=function(){this.subscriberBlock&&this.subscriberBlock.dispose()},e.prototype.pickerDateTime1Changed=function(){},e.prototype.pickerDateTime2Changed=function(){},e.prototype.pickerDateChanged=function(){},e.prototype.initFilters=function(){$(document).on("click.bs.dropdown.data-api",".keepopen",function(e){e.stopPropagation()})},e}(),b=c(f.prototype,"tabident",[n.bindable],{enumerable:!0,initializer:function(){return null}}),g=c(f.prototype,"columns",[d],{enumerable:!0,initializer:function(){return[]}}),m=c(f.prototype,"canHideColumns",[n.bindable],{enumerable:!0,initializer:function(){return!0}}),h=c(f.prototype,"canFilterColumns",[n.bindable],{enumerable:!0,initializer:function(){return!0}}),v=c(f.prototype,"pageable",[n.bindable],{enumerable:!0,initializer:function(){return!0}}),y=c(f.prototype,"pageSize",[n.bindable],{enumerable:!0,initializer:function(){return 20}}),x=c(f.prototype,"page",[n.bindable],{enumerable:!0,initializer:function(){return 1}}),w=c(f.prototype,"pagerSize",[n.bindable],{enumerable:!0,initializer:function(){return 20}}),k=c(f.prototype,"loadingMessage",[n.bindable],{enumerable:!0,initializer:function(){return"Loading data..."}}),C=c(f.prototype,"loadingDiv",[n.bindable],{enumerable:!0,initializer:function(){return"<span>Loading data...</span>"}}),S=c(f.prototype,"readData",[n.bindable],{enumerable:!0,initializer:function(){return null}}),z=c(f.prototype,"dataSet",[n.bindable],{enumerable:!0,initializer:function(){return null}}),M=c(f.prototype,"onReadError",[n.bindable],{enumerable:!0,initializer:function(){return null}}),A=c(f.prototype,"selectedCallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),O=c(f.prototype,"createNewCallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),V=c(f.prototype,"canCreate",[n.bindable],{enumerable:!0,initializer:function(){return function(){return!0}}}),P=c(f.prototype,"canDelete",[n.bindable],{enumerable:!0,initializer:function(){return function(){return!0}}}),E=c(f.prototype,"canCancelFilter",[n.bindable],{enumerable:!0,initializer:function(){return function(){return!0}}}),F=c(f.prototype,"minHeight",[n.bindable],{enumerable:!0,initializer:function(){return"400px"}}),_=c(f.prototype,"pickerDateTime1",[n.bindable],{enumerable:!0,initializer:null}),j=c(f.prototype,"pickerDateTime2",[n.bindable],{enumerable:!0,initializer:null}),p=f))||p)}),define("text!resources/elements/handy-table.html",["module"],function(e){e.exports='<template class="flex-fill-column">\n  <require from="./key"></require>\n  <require from="./field-value-converters"></require>\n  <require from="./spinner"></require>\n\n  \x3c!--widget-row-full--\x3e\n\n  \x3c!--<div class="input-daterange input-group" id="datepicker1">--\x3e\n    \x3c!--<input type="text" class="input-sm form-control" name="start" />--\x3e\n    \x3c!--<span class="input-group-addon">to</span>--\x3e\n    \x3c!--<input type="text" class="input-sm form-control" name="end" />--\x3e\n  \x3c!--</div>--\x3e\n\n  <div>\n    \x3c!--<div class="aut-pager-container">--\x3e\n      \x3c!--<template replaceable part="caption-part">--\x3e\n        \x3c!--<div class="form-inline">--\x3e\n          \x3c!--<button class="float-none btn btn-success" if.bind="canFilter()"--\x3e\n                  \x3c!--click.trigger="filterNewClicked()" t="filter">filter</span>--\x3e\n            \x3c!--<i class="fa fa-plus-square"></i>--\x3e\n          \x3c!--</button>--\x3e\n          \x3c!--<button class="float-none btn btn-success" if.bind="canCancelFilter()"--\x3e\n                  \x3c!--click.trigger="cancelFilterNewClicked()" t="cancelFilter">cancelFilter</span>--\x3e\n            \x3c!--<i class="fa fa-plus-square"></i>--\x3e\n          \x3c!--</button>--\x3e\n        \x3c!--</div>--\x3e\n      \x3c!--</template>--\x3e\n    \x3c!--</div>--\x3e\n    <div class="aut-pager-container">\n      <template replaceable part="caption-part">\n        \x3c!--style="margin-left: 10px; margin-right: auto;"--\x3e\n        <div class="form-inline">\n          <button class="float-none btn btn-success" if.bind="canCreate()"\n                  click.trigger="createNewClicked()"><span t="create">create</span>\n            <i class="fa fa-plus-square"></i>\n          </button>\n        </div>\n      </template>\n\n\x3c!--      <aut-pagination current-page.bind="currentPage"--\x3e\n\x3c!--                      page-size.bind="pageSize"--\x3e\n\x3c!--                      total-items.bind="totalItems"--\x3e\n\x3c!--                      pagination-size.bind="5"--\x3e\n\x3c!--                      boundary-links.bind="true"--\x3e\n\x3c!--                      first-text="В начало" last-text="В конец" class="form-inline" style="margin-left: auto">--\x3e\n\n\x3c!--        <template replace-part="pagination">--\x3e\n\x3c!--          <nav class="aut-pager-pages">--\x3e\n\x3c!--            <ul class="pagination" hide.bind="hideSinglePage && totalPages === 1">--\x3e\n\x3c!--              <li class="page-item">--\x3e\n\x3c!--                <a aria-label="Previous" click.delegate="previousPage()"--\x3e\n\x3c!--                   class-name.bind="currentPage === 1 ? \'page-link disabled\' : \'page-link\'">--\x3e\n\x3c!--                  <span aria-hidden="true">&laquo;</span>--\x3e\n\x3c!--                  <span class="sr-only">Previous</span>--\x3e\n\x3c!--                </a>--\x3e\n\x3c!--              </li>--\x3e\n\n\x3c!--              <li class="page-item" repeat.for="page of displayPages">--\x3e\n\x3c!--                <a click.delegate="selectPage(page.value)"--\x3e\n\x3c!--                   class-name.bind="currentPage === page.value ? \'page-link active btn-light\' : \'page-link btn-light\'">--\x3e\n\x3c!--                  ${page.title}--\x3e\n\x3c!--                </a>--\x3e\n\x3c!--              </li>--\x3e\n\n\x3c!--              <li class="page-item">--\x3e\n\x3c!--                <a aria-label="Next" click.delegate="nextPage()"--\x3e\n\x3c!--                   class-name.bind="currentPage === totalPages ? \'page-link disabled\' : \'page-link\'">--\x3e\n\x3c!--                  <span aria-hidden="true">&raquo;</span>--\x3e\n\x3c!--                  <span class="sr-only">Next</span>--\x3e\n\x3c!--                </a>--\x3e\n\x3c!--              </li>--\x3e\n\x3c!--            </ul>--\x3e\n\x3c!--          </nav>--\x3e\n\x3c!--        </template>--\x3e\n\n\x3c!--      </aut-pagination>--\x3e\n\n      <div class="form-inline" style="margin-left: auto; margin-right: 0px;">\n\n\x3c!--        <div class="form-group pull-right">--\x3e\n\x3c!--          <label for="pageSize" t="pageSize">:</label>--\x3e\n\x3c!--          <select value.bind="pageSize" id="pageSize" class="form-control">--\x3e\n\x3c!--            <option model.bind="2">2</option>--\x3e\n\x3c!--            <option model.bind="5">5</option>--\x3e\n\x3c!--            <option model.bind="10">10</option>--\x3e\n\x3c!--            <option model.bind="20">20</option>--\x3e\n\x3c!--            <option model.bind="50">50</option>--\x3e\n\x3c!--          </select>--\x3e\n\x3c!--        </div>--\x3e\n\n        <div class="btn-group" style="margin-left: 5px;" if.bind="canFilterColumns">\n          <button type="button" class="float-right btn btn-default dropdown-toggle" data-toggle="dropdown"><span\n            t="columnFilters">columnFilters</span><span class="caret"></span>\n            <i class="fa fa-filter"></i>\n          </button>\n\n          \x3c!--scrolled-menu--\x3e\n          <ul class="dropdown-menu  keepopen" style="min-width: 800px;">\n            <div class.bind="\'inline-cont \'">\n              <div class="btn-group" role="group">\n                <button type="button" class="btn btn-secondary" click.trigger="clearFiltersClicked($event)" >\n                  <span\n                    t="clearFilters">clearFilters</span><span class="caret"></span>\n                  <i class="fa fa-minus-square"></i>\n                </button>\n                <button type="button" class="btn btn-secondary" click.trigger="setAllFiltersClicked($event)">\n                  <span\n                    t="setAllFilters">setAllFilters</span><span class="caret"></span>\n                  <i class="fa fa-check-square"></i>\n                </button>\n\n                <button type="button" class="btn btn-secondary" click.trigger="applyFiltersClicked($event)">\n                  <span\n                    t="applyFilters">applyFilters</span><span class="caret"></span>\n                  <i class="fa fa-retweet"></i>\n                </button>\n              </div>\n            </div>\n            <li repeat.for="$o of filteredColumns" class.bind="\'inline-cont \' + ($o.filterActive ? \'widget-selected\' : \'\')">\n\n                <div class="inline-cont inline-cont-item dropdown-menu-item checkbox custom-control custom-checkbox" click.trigger="columnFiltersClicked($event, $o)"\n                     style="max-width: 350px;">\n                  <input type="checkbox" class="inline-cont-item custom-control-input" id.bind="\'option-\' + $index"\n                         checked.bind="$o.filterActive"/>\n                  <label class="inline-cont-item custom-control-label" for.bind="\'option-\' + $index" t.bind="$o.resourcekey">Col\n                    name</label>\n                </div>\n\n                <template if.bind="$o.viewtype == \'date\'" containerless>\n                  <div class="inline-cont-item inline-cont" >\n                    <abp-datetime-picker class="inline-cont-item" element.bind="pickerDate1" icon-base="font-awesome" with-date-icon="true" options.bind="{ format: \'YYYY-MM-DD\', locale: \'ru\' }" model.bind="$o.filterValue.from"></abp-datetime-picker>\n                    <span style="margin: 3px;">до</span>\n                    <abp-datetime-picker class="inline-cont-item" element.bind="pickerDate2" icon-base="font-awesome" with-date-icon="true" options.bind="{ format: \'YYYY-MM-DD\', locale: \'ru\' }" model.bind="$o.filterValue.to"></abp-datetime-picker>\n                  </div>\n                </template>\n\n              <template if.bind="$o.viewtype == \'datetime\'" containerless>\n                <div class="inline-cont-item inline-cont" >\n                  <abp-datetime-picker class="inline-cont-item" element.bind="pickerDateTime1" icon-base="font-awesome" with-date-icon="true" options.bind="{ format: \'YYYY-MM-DD HH:mm\', sideBySide: true, showClose: true, locale: \'ru\' }" model.bind="$o.filterValue.from"></abp-datetime-picker>\n                  <span style="margin: 3px;">до</span>\n                  <abp-datetime-picker class="inline-cont-item" element.bind="pickerDateTime2" icon-base="font-awesome" with-date-icon="true" options.bind="{ format: \'YYYY-MM-DD HH:mm\', sideBySide: true, showClose: true, locale: \'ru\' }" model.bind="$o.filterValue.to"></abp-datetime-picker>\n                </div>\n              </template>\n\n              \x3c!--value.bind="accountEdit.value.comment"--\x3e\n              \x3c!--<option repeat.for="fo of $o.filterOptions" model.bind="fo.id" onclick.trigger="filterOptionClicked($event)">--\x3e\n              <template if.bind="$o.viewtype == \'text\'" containerless>\n                <div class="inline-cont-item2 inline-cont" >\n                  <input if.bind="!$o.filterOptions" type="text" class="inline-cont-item2 form-control" value.bind="$o.filterValue">\n                  <select if.bind="$o.filterOptions" class="form-control" onblur.trigger="filterOptionClicked($event)"\n                          value.bind="$o.filterValue">\n                    <option repeat.for="fo of $o.filterOptions" value="${fo | fieldValueDisplay:$o.filterOptionKey:$o.format:$o.viewtype}" onclick.trigger="filterOptionClicked($event)">\n                      ${fo | fieldValueDisplay:$o.filterOptionField:$o.format:$o.viewtype}\n                    </option>\n\n                    \x3c!--<option repeat.for="fo of $o.filterOptions" model.bind="fo.id" onclick.trigger="filterOptionClicked($event)">${fo.id} - ${fo.value.name}</option>--\x3e\n                  </select>\n\n                </div>\n              </template>\n\n              <template if.bind="$o.viewtype == \'key\'" containerless>\n                <div class="inline-cont-item2 inline-cont" >\n                  <input type="text" class="inline-cont-item2 form-control" value.bind="$o.filterValue">\n                </div>\n              </template>\n\n              <template if.bind="$o.viewtype == \'download\'" containerless>\n                <div class="inline-cont-item2 inline-cont" >\n                  <input type="text" class="inline-cont-item2 form-control" value.bind="$o.filterValue">\n                </div>\n              </template>\n\n\n            </li>\n          </ul>\n        </div>\n\n        <div class="btn-group" style="margin-left: 5px;" if.bind="canHideColumns">\n          <button type="button" class="float-right btn btn-default dropdown-toggle" data-toggle="dropdown"><span\n            t="columnvisibility">columnvisibility</span><span class="caret"></span>\n            <i class="fa fa-eye-slash"></i>\n          </button>\n\n          <ul class="dropdown-menu scrolled-menu">\n            <li repeat.for="$o of columns" class.bind="\'\' + ($o.visible ? \'widget-selected\' : \'\')"\n                click.trigger="columnVisibilityClicked($event, $o)">\n              <div class="dropdown-menu-item checkbox custom-control custom-checkbox">\n                <input type="checkbox" class="custom-control-input" id.bind="\'option-\' + $index"\n                       checked.bind="$o.visible"/>\n                <label class="custom-control-label" for.bind="\'option-\' + $index" t.bind="$o.resourcekey">Col\n                  name</label>\n              </div>\n            </li>\n          </ul>\n        </div>\n\n      </div>\n\n\n    </div>\n  </div>\n\n  <div class="table-responsive" style="flex: 1;">\n    <spinner busy.bind="loading" mode="\'context\'"></spinner>\n    <div class="aut-table-container">\n      <table class="table table-striped table-condensed table-bordered"\n             aurelia-table="data.bind: dataList; display-data.bind: $listDisplayData; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">\n\n        \x3c!--text-transform: uppercase;--\x3e\n        <caption style="caption-side: top; text-align: left; padding-top: .2rem; padding-bottom: .2rem;">\n          \x3c!--row aut-pager-container--\x3e\n          \x3c!--<div class="aut-pager-container">--\x3e\n          \x3c!--<template replaceable part="caption-part">--\x3e\n          \x3c!--&lt;!&ndash;style="margin-left: 10px; margin-right: auto;"&ndash;&gt;--\x3e\n          \x3c!--<div class="form-inline">--\x3e\n          \x3c!--<button class="float-none btn btn-success" if.bind="canCreate()"--\x3e\n          \x3c!--click.trigger="createNewClicked()"><span t="create">create</span>--\x3e\n          \x3c!--<i class="fa fa-plus-square"></i>--\x3e\n          \x3c!--</button>--\x3e\n          \x3c!--</div>--\x3e\n          \x3c!--</template>--\x3e\n\n          \x3c!--<aut-pagination current-page.bind="currentPage" page-size.bind="pageSize" total-items.bind="totalItems"--\x3e\n          \x3c!--pagination-size.bind="5" boundary-links.bind="true" first-text="В начало" last-text="В конец" class="form-inline" style="margin-left: auto">--\x3e\n\n          \x3c!--<template replace-part="pagination">--\x3e\n          \x3c!--<nav class="aut-pager-pages">--\x3e\n          \x3c!--<ul class="pagination" hide.bind="hideSinglePage && totalPages === 1">--\x3e\n          \x3c!--<li class="page-item">--\x3e\n          \x3c!--<a aria-label="Previous" click.delegate="previousPage()"--\x3e\n          \x3c!--class-name.bind="currentPage === 1 ? \'page-link disabled\' : \'page-link\'">--\x3e\n          \x3c!--<span aria-hidden="true">&laquo;</span>--\x3e\n          \x3c!--<span class="sr-only">Previous</span>--\x3e\n          \x3c!--</a>--\x3e\n          \x3c!--</li>--\x3e\n\n          \x3c!--<li class="page-item" repeat.for="page of displayPages">--\x3e\n          \x3c!--<a click.delegate="selectPage(page.value)"--\x3e\n          \x3c!--class-name.bind="currentPage === page.value ? \'page-link active btn-light\' : \'page-link btn-light\'">--\x3e\n          \x3c!--${page.title}--\x3e\n          \x3c!--</a>--\x3e\n          \x3c!--</li>--\x3e\n\n          \x3c!--<li class="page-item">--\x3e\n          \x3c!--<a aria-label="Next" click.delegate="nextPage()"--\x3e\n          \x3c!--class-name.bind="currentPage === totalPages ? \'page-link disabled\' : \'page-link\'">--\x3e\n          \x3c!--<span aria-hidden="true">&raquo;</span>--\x3e\n          \x3c!--<span class="sr-only">Next</span>--\x3e\n          \x3c!--</a>--\x3e\n          \x3c!--</li>--\x3e\n          \x3c!--</ul>--\x3e\n          \x3c!--</nav>--\x3e\n          \x3c!--</template>--\x3e\n\n          \x3c!--</aut-pagination>--\x3e\n\n          \x3c!--<div class="form-inline" style="margin-left: auto; margin-right: 0px;">--\x3e\n\n          \x3c!--<div class="form-group pull-right">--\x3e\n          \x3c!--<label for="pageSize" t="pageSize">:</label>--\x3e\n          \x3c!--<select value.bind="pageSize" id="pageSize" class="form-control">--\x3e\n          \x3c!--<option model.bind="2">2</option>--\x3e\n          \x3c!--<option model.bind="5">5</option>--\x3e\n          \x3c!--<option model.bind="10">10</option>--\x3e\n          \x3c!--<option model.bind="20">20</option>--\x3e\n          \x3c!--<option model.bind="50">50</option>--\x3e\n          \x3c!--</select>--\x3e\n          \x3c!--</div>--\x3e\n\n          \x3c!--<div class="btn-group" style="margin-left: 5px;" if.bind="canHideColumns">--\x3e\n          \x3c!--<button type="button" class="float-right btn btn-default dropdown-toggle" data-toggle="dropdown"><span t="columnvisibility">columnvisibility</span><span class="caret"></span>--\x3e\n          \x3c!--<i class="fa fa-eye-slash"></i>--\x3e\n          \x3c!--</button>--\x3e\n\n          \x3c!--<ul class="dropdown-menu scrolled-menu">--\x3e\n          \x3c!--<li repeat.for="$o of columns" class.bind="\'\' + ($o.visible ? \'widget-selected\' : \'\')" click.trigger="columnVisibilityClicked($event, $o)" >--\x3e\n          \x3c!--<div class="dropdown-menu-item checkbox custom-control custom-checkbox">--\x3e\n          \x3c!--<input type="checkbox" class="custom-control-input" id.bind="\'option-\' + $index" checked.bind="$o.visible" />--\x3e\n          \x3c!--<label class="custom-control-label" for.bind="\'option-\' + $index" t.bind="$o.resourcekey">Col name</label>--\x3e\n          \x3c!--</div>--\x3e\n          \x3c!--</li>--\x3e\n          \x3c!--</ul>--\x3e\n          \x3c!--</div>--\x3e\n\n          \x3c!--</div>--\x3e\n\n\n          \x3c!--</div>--\x3e\n\n\n        </caption>\n\n\n        <thead class="aut-table-head">\n\n\n        \x3c!--aut-sort="key.bind: $column.sortable ? ($column.field ? $column.field : getViewDataDisplay$column.getviewdata) : undefined; "--\x3e\n        \x3c!--aut-sort="custom.bind: columnSort"--\x3e\n        \x3c!--aut-sort="key.bind: $column.sortable ? ($column.field ? $column.field : $column.sortTextView) : undefined; "--\x3e\n        \x3c!--aut-sort="key.bind: columnSortableText ($column)"--\x3e\n        \x3c!--click.capture="sort($index, $column)"--\x3e\n        \x3c!--default.bind: $column.field--\x3e\n\n        \x3c!--filtered.bind="$column.filterActive ? \'filtered\' : \'\'"--\x3e\n        <tr role="button">\n          <th repeat.for="$column of visiblecolumns" click.capture="sort($column)"\n              aut-sort="custom.bind: $column.sortable ? sortColumnData : undefined; default.bind: $column.defaultSort ? $column.defaultSort : undefined; "\n              data-filtered.bind="$column.filterActive ? \'filtered\' : \'\'"\n              t.bind="$column.resourcekey">\n          </th>\n        </tr>\n\n        </thead>\n\n        <tbody class="aut-table-body">\n        <tr repeat.for="o of $listDisplayData" aut-select="row.bind: o; mode: single; selected-class: aut-row-handy-sel"\n            select.delegate="rowSelected($event)" click.trigger="rowClicked(o)">\n\n          <td repeat.for="$column of visiblecolumns" as-element="compose">\n            <button if.bind="$column.viewtype == \'key\'" class="btn btn-link" click.trigger="keyClicked(o)">\n              <key data.bind="o.key"></key>\n            </button>\n\n            <template if.bind="$column.viewtype == \'download\'" containerless>\n              <div if.bind="hasValue(o, $column)" containerless>\n                <a if.bind="$column.downloadGetDataCallback" href="#">\n                <span if.bind="$column.field" click.trigger="downloadClicked(o, $column)">\n                  ${o | fieldValueDisplay:$column.field:$column.format}\n                </span>\n                </a>\n\n                <span if.bind="!$column.downloadGetDataCallback && $column.field" click.trigger="keyClicked(o)">\n                ${o | fieldValueDisplay:$column.field:$column.format}\n              </span>\n              </div>\n              <div else click.trigger="keyClicked(o)" containerless>\n                <b>--</b>\n              </div>\n            </template>\n\n\n            <span if.bind="$column.viewtype == \'text\' && $column.field" click.trigger="keyClicked(o)">\n            ${o | fieldValueDisplay:$column.field:$column.format}\n          </span>\n\n            <span if.bind="$column.viewtype == \'text\' && !$column.field" containerless click.trigger="keyClicked(o)">\n            ${getViewDataDisplay(o, $column)}\n          </span>\n\n            <template if.bind="$column.viewtype == \'datetime\'" containerless>\n            <span if.bind="$column.field" containerless click.trigger="keyClicked(o)">\n              ${o | fieldValueDisplay:$column.field:$column.format:$column.viewtype}\n            </span>\n            </template>\n\n            <template if.bind="$column.viewtype == \'date\'" containerless>\n            <span if.bind="$column.field" containerless click.trigger="keyClicked(o)">\n              ${o | fieldValueDisplay:$column.field:$column.format:$column.viewtype}\n            </span>\n            </template>\n\n            \x3c!--<compose view="./widgets/table-view-${column.viewtype}.html" containerless model.bind="widget.data"></compose>--\x3e\n          </td>\n\n        </tr>\n        </tbody>\n      </table>\n    </div>\n\n  </div>\n\n  <slot></slot>\n</template>\n'}),define("text!resources/elements/handy-table-td.html",["module"],function(e){e.exports='<template bindable="">\n\n</template>\n'}),define("resources/elements/footer-alerts",["exports","aurelia-framework","./../../services/alert-service","moment"],function(e,n,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FooterAlertsCustomElement=void 0;var r;(r=i)&&r.__esModule;var o,a,l,s,c,u,d,p,f,b=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function g(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}e.FooterAlertsCustomElement=(o=(0,n.inject)(t.AlertService,n.BindingEngine),a=(0,n.computedFrom)("alertService._alertMessages.length"),l=(0,n.computedFrom)("alertService._alertMessages.length","staticMessagesAcknCount","alertStackViewState"),s=(0,n.computedFrom)("alertService._alertMessages.length"),c=(0,n.computedFrom)("alertStackViewState"),o((f=p=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.alertStackViewState="closed",this.topAlertState="passiv",this.alertService=n,this.bindingEngine=t}return e.prototype.attached=function(){this.observeData()},e.prototype.observeData=function(){var e=this;this.subscription&&this.subscription.dispose(),this.subscription=this.bindingEngine.expressionObserver(this,"alertService._alertMessages.length").subscribe(function(n,t){e.dataChanged(n,t)})},e.prototype.detached=function(){this.subscription&&this.subscription.dispose()},e.prototype.dataChanged=function(e,n){var t=this;e!=n&&(this.topAlertState="passiv",this.topAlertState="transit",setTimeout(function(){t.topAlertState="passiv"},5e3))},e.prototype.toggleAlertStackPanel=function(){"closed"==this.alertStackViewState?(this.alertStackViewState="opened",e.messagesAcknCount=this.alertService._alertMessages.length):"opened"==this.alertStackViewState&&(this.alertStackViewState="closed",e.messagesAcknCount=this.alertService._alertMessages.length)},b(e,[{key:"alertMessages",get:function(){return this.alertService._alertMessages}},{key:"notReadMessagesCount",get:function(){return"opened"==this.alertStackViewState?0:this.alertService._alertMessages.length>=e.messagesAcknCount?this.alertService._alertMessages.length-e.messagesAcknCount:this.alertService._alertMessages.length}},{key:"staticMessagesAcknCount",get:function(){return e.messagesAcknCount}},{key:"topMessage",get:function(){return this.alertService._alertMessages[0]}},{key:"alertPanelClass",get:function(){return"closed"==this.alertStackViewState?"notifications-scroll-area d-none":"opened"==this.alertStackViewState?"notifications-scroll-area":"hidden"}}]),e}(),p.messagesAcknCount=0,g((d=f).prototype,"alertMessages",[a],Object.getOwnPropertyDescriptor(d.prototype,"alertMessages"),d.prototype),g(d.prototype,"notReadMessagesCount",[l],Object.getOwnPropertyDescriptor(d.prototype,"notReadMessagesCount"),d.prototype),g(d.prototype,"topMessage",[s],Object.getOwnPropertyDescriptor(d.prototype,"topMessage"),d.prototype),g(d.prototype,"alertPanelClass",[c],Object.getOwnPropertyDescriptor(d.prototype,"alertPanelClass"),d.prototype),u=d))||u)}),define("text!resources/elements/footer-alerts.html",["module"],function(e){e.exports='<template>\n  <require from="./field-value-converters"></require>\n\n  <footer class="page-footer ${alertStackViewState}" style="position: relative; display: flex; ">\n\n    <div class="notifications-hdr" if.bind="alertMessages.length == 0">\n      <div class="alert-status alert-status-info alert-passiv">\n        [<span t="alertStackEmptyTitle">No messages</span>]\n      </div>\n    </div>\n\n      <div class="notifications-hdr" if.bind="alertMessages.length > 0" >\n        \x3c!--<div class="alert-block-btn ${(\'alert-status alert-\' + topAlertState + \' alert-status-\' + topMessage.type)}" title="${alertMessages.length > 0 ? (\'[\' + alertMessages[0].title + \'] \' + alertMessages[0].message) : \'Нет собщений\' }" click.delegate="toggleAlertStackPanel()">--\x3e\n            \x3c!--<span>${alertMessages.length > 0 ? (alertMessages[0].message) : \'Нет собщений\' }</span>--\x3e\n        \x3c!--</div>--\x3e\n\n        <div class="hdr-block-right">\n\n          <div class="hdr-block-btn" click.delegate="toggleAlertStackPanel()">\n            \x3c!--<span t="alertStackHistory">alertStackHistory</span>--\x3e\n            <div class="alert-block-btn ${(\'alert-status alert-\' + topAlertState + \' alert-status-\' + topMessage.type)}" title="${alertMessages.length > 0 ? (\'[\' + alertMessages[0].title + \'] \' + alertMessages[0].message) : \'Нет собщений\' }" >\n              <span>${alertMessages.length > 0 ? (alertMessages[0].message) : \'Нет собщений\' }</span>\n            </div>\n\n            <i class="fa fa-list" style="padding-left: 5px;"></i>\n          </div>\n\n        </div>\n      </div>\n\n        <div id="alertStackPanel" class="${alertPanelClass}" if.bind="alertMessages.length > 0" >\n          <div class="notifications-stack">\n            <div>\n              <div repeat.for="$msg of alertMessages" class="notification-it ${$msg.type}">\n                <span style="width: 20em;">${$msg.time | dateFormat}</span>\n                <span style="width: 10em; text-transform: uppercase;">${$msg.title }</span>\n                <span >${$msg.message}</span>\n              </div>\n            </div>\n\n          </div>\n        </div>\n\n  </footer>\n\n</template>\n'}),define("resources/elements/field-value-converters",["exports","aurelia-framework","./expression-evaluator","moment"],function(e,n,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateFormatValueConverter=e.FieldValueDisplayValueConverter=void 0;var r,o,a=(r=i)&&r.__esModule?r:{default:r};function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}e.FieldValueDisplayValueConverter=(0,n.inject)(t.ExpressionEvaluator)(o=function(){function e(n){l(this,e),this.evaluator=n}return e.prototype.toView=function(e,n,t,i){var r=n,o=(r=n&&n.indexOf("_{")>=0?n.replace(new RegExp("_{","g"),"${"):n?"${"+n+"}":void 0)?this.evaluator.evaluateInterpolation(r,e):void 0;return i&&o&&"datetime"===i&&t&&(o=(0,a.default)(o).format(t)),(!o||"string"==typeof o&&o.length<=0)&&(o="--"),o},e}())||o,e.DateFormatValueConverter=function(){function e(){l(this,e)}return e.prototype.toView=function(e){return(0,a.default)(e).format("DD/MM/YYYY HH:mm:ss")},e}()}),define("resources/elements/expression-evaluator",["exports","aurelia-dependency-injection","aurelia-templating","aurelia-binding"],function(e,n,t,i){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.ExpressionEvaluator=e.InterpolationParser=void 0;var l=e.InterpolationParser=(0,n.inject)(i.Parser,t.BindingLanguage)(o=function(){function e(n,t){r(this,e),this.emptyStringExpression=new i.LiteralString(""),this.nullExpression=new i.LiteralPrimitive(null),this.undefinedExpression=new i.LiteralPrimitive(void 0),this.cache={},this.parser=n,this.bindingLanguage=t}return e.prototype.parse=function(e){if(void 0!==this.cache[e])return this.cache[e];var n=this.bindingLanguage.parseInterpolation(null,e);if(null===n)return new i.LiteralString(e);for(var t=new i.LiteralString(n[0]),r=1;r<n.length;r+=2)t=new i.Binary("+",t,new i.Binary("+",this.coalesce(n[r]),new i.LiteralString(n[r+1])));return this.cache[e]=t,t},e.prototype.coalesce=function(e){return new i.Conditional(new i.Binary("||",new i.Binary("===",e,this.nullExpression),new i.Binary("===",e,this.undefinedExpression)),this.emptyStringExpression,new i.CallMember(e,"toString",[]))},e}())||o;e.ExpressionEvaluator=(0,n.inject)(i.Parser,l,t.ViewResources)(a=function(){function e(n,t,i){r(this,e),this.parser=n,this.interpolationParser=t,this.lookupFunctions=i.lookupFunctions}return e.prototype.evaluate=function(e,n){var t=this.parser.parse(e);return this.evaluateInternal(t,n)},e.prototype.evaluateInterpolation=function(e,n){var t=this.interpolationParser.parse(e);return this.evaluateInternal(t,n)},e.prototype.evaluateInternal=function(e,n){var t={bindingContext:n,overrideContext:(0,i.createOverrideContext)(n)};return e.evaluate(t,this.lookupFunctions)},e}())||a}),define("resources/elements/column",["exports","aurelia-framework"],function(e,n){"use strict";function t(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}Object.defineProperty(e,"__esModule",{value:!0}),e.Column=void 0;var i,r,o,a,l,s,c,u,d,p,f,b,g,m,h,v,y,x,w,k=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function C(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}e.Column=(0,n.noView)((r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"viewtype",o,this),t(this,"class",a,this),t(this,"resourcekey",l,this),t(this,"field",s,this),t(this,"format",c,this),t(this,"sortable",u,this),t(this,"defaultSort",d,this),t(this,"canbefiltered",p,this),t(this,"filterField",f,this),t(this,"downloadGetDataCallback",b,this),t(this,"getviewdata",g,this),t(this,"visible",m,this),t(this,"filterOptions",h,this),t(this,"filterOptionField",v,this),t(this,"filterOptionKey",y,this),t(this,"filterExpressionBuilder",x,this),t(this,"filterActive",w,this),this.filterValue=void 0}return e.prototype.sortTextView=function(e){if(this.getviewdata)return this.getviewdata(e)},e.prototype.filterValueChanged=function(e){console.log("------------------------------filterValueChanged------------------------------"),console.log(e)},e.prototype.filterToJsonObject=function(){var e={key:this.storeKey,act:this.filterActive};return"text"==this.viewtype||"key"==this.viewtype?e.fval=this.filterValue:"download"==this.viewtype?e.fval=this.filterValue:"date"!=this.viewtype&&"datetime"!=this.viewtype||(e.fval={from:this.filterValue&&this.filterValue.from?this.filterValue.from.getTime():null,to:this.filterValue&&this.filterValue.to?this.filterValue.to.getTime():null}),e},e.prototype.jsonObjectToFilter=function(e){this.filterActive=e.act,"text"==this.viewtype||"key"==this.viewtype?this.filterValue=e.fval:"download"==this.viewtype?this.filterValue=e.fval:"date"!=this.viewtype&&"datetime"!=this.viewtype||(e.fval?(this.filterValue={},this.filterValue.from=e.fval.from?new Date(e.fval.from):void 0,this.filterValue.to=e.fval.to?new Date(e.fval.to):void 0):this.filterValue=null)},k(e,[{key:"filterExpression",get:function(){return this.filterExpressionBuilder?this.filterExpressionBuilder({data:this.filterValue}):"text"==this.viewtype||"key"==this.viewtype?[{type:"eq",path:this.filterField?this.filterField:this.field,value:this.filterValue}]:"download"==this.viewtype?[{type:"eq",path:this.filterField?this.filterField:this.field,value:this.filterValue}]:"date"==this.viewtype||"datetime"==this.viewtype?[{type:"gt",path:this.filterField?this.filterField:this.field,value:this.filterValue&&this.filterValue.from?this.filterValue.from.getTime():void 0},{type:"lt",path:this.filterField?this.filterField:this.field,value:this.filterValue&&this.filterValue.to?this.filterValue.to.getTime():void 0}]:void 0}},{key:"storeKey",get:function(){return this.field?this.field+"-"+this.resourcekey:".-"+this.resourcekey}}]),e}(),o=C(r.prototype,"viewtype",[n.bindable],{enumerable:!0,initializer:function(){return"text"}}),a=C(r.prototype,"class",[n.bindable],{enumerable:!0,initializer:function(){return""}}),l=C(r.prototype,"resourcekey",[n.bindable],{enumerable:!0,initializer:function(){return""}}),s=C(r.prototype,"field",[n.bindable],{enumerable:!0,initializer:function(){return""}}),c=C(r.prototype,"format",[n.bindable],{enumerable:!0,initializer:function(){}}),u=C(r.prototype,"sortable",[n.bindable],{enumerable:!0,initializer:function(){return!0}}),d=C(r.prototype,"defaultSort",[n.bindable],{enumerable:!0,initializer:function(){}}),p=C(r.prototype,"canbefiltered",[n.bindable],{enumerable:!0,initializer:function(){return!1}}),f=C(r.prototype,"filterField",[n.bindable],{enumerable:!0,initializer:function(){}}),b=C(r.prototype,"downloadGetDataCallback",[n.bindable],{enumerable:!0,initializer:function(){return null}}),g=C(r.prototype,"getviewdata",[n.bindable],{enumerable:!0,initializer:function(){return null}}),m=C(r.prototype,"visible",[n.bindable],{enumerable:!0,initializer:function(){return!0}}),h=C(r.prototype,"filterOptions",[n.bindable],{enumerable:!0,initializer:function(){}}),v=C(r.prototype,"filterOptionField",[n.bindable],{enumerable:!0,initializer:function(){}}),y=C(r.prototype,"filterOptionKey",[n.bindable],{enumerable:!0,initializer:function(){}}),x=C(r.prototype,"filterExpressionBuilder",[n.bindable],{enumerable:!0,initializer:function(){}}),w=C(r.prototype,"filterActive",[n.bindable],{enumerable:!0,initializer:function(){return!1}}),i=r))||i}),define("resources/elements/column-filter",["exports","aurelia-framework"],function(e,n){"use strict";function t(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function i(e,n,t,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}var r,o,a,l,s;Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnFilter=void 0;e.ColumnFilter=(0,n.noView)((a=i((o=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"viewtype",a,this),t(this,"active",l,this),t(this,"filter_options",s,this)}).prototype,"viewtype",[n.bindable],{enumerable:!0,initializer:function(){return"text"}}),l=i(o.prototype,"active",[n.bindable],{enumerable:!0,initializer:function(){return!0}}),s=i(o.prototype,"filter_options",[n.bindable],{enumerable:!0,initializer:function(){}}),r=o))||r}),define("resources/elements/bootstrap-form-validation-renderer",["exports","aurelia-validation"],function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BootstrapFormValidationRenderer=void 0;e.BootstrapFormValidationRenderer=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.render=function(e){var n=e.unrender,t=Array.isArray(n),i=0;for(n=t?n:n[Symbol.iterator]();;){var r;if(t){if(i>=n.length)break;r=n[i++]}else{if((i=n.next()).done)break;r=i.value}var o=r,a=o.result;(m=o.elements)&&0!==m.length||(m=this.lookupElementsByName(a.propertyName));var l=m,s=Array.isArray(l),c=0;for(l=s?l:l[Symbol.iterator]();;){var u;if(s){if(c>=l.length)break;u=l[c++]}else{if((c=l.next()).done)break;u=c.value}var d=u;this.remove(d,a)}}var p=e.render,f=Array.isArray(p),b=0;for(p=f?p:p[Symbol.iterator]();;){var g;if(f){if(b>=p.length)break;g=p[b++]}else{if((b=p.next()).done)break;g=b.value}var m,h=g;a=h.result;(m=h.elements)&&0!==m.length||(m=this.lookupElementsByName(a.propertyName));var v=m,y=Array.isArray(v),x=0;for(v=y?v:v[Symbol.iterator]();;){var w;if(y){if(x>=v.length)break;w=v[x++]}else{if((x=v.next()).done)break;w=x.value}var k=w;this.add(k,a)}}},e.prototype.lookupElementsByName=function(e){return document.getElementsByName(e)},e.prototype.add=function(e,n){if(!n.valid){var t=e.closest(".form-group");if(t){var i=t.querySelector(".form-control");if(i){i.classList.add("is-invalid");var r=document.createElement("span");r.className="invalid-feedback",r.textContent=n.message,r.style="display: unset",r.id="validation-message-"+n.id;var o=e.closest(".input-group");o&&o.appendChild(r)}}}},e.prototype.remove=function(e,n){if(!n.valid){var t=e.closest(".form-group");if(t){var i=t.querySelector(".form-control");if(i){var r=e.parentElement.querySelector("#validation-message-"+n.id);r&&(r.parentElement.removeChild(r),0===i.parentElement.querySelectorAll(".invalid-feedback").length&&i.classList.remove("is-invalid"))}}}},e}()}),define("pages/home",["exports","../common/crud","aurelia-validation","aurelia-framework","../resources/elements/bootstrap-form-validation-renderer","aurelia-event-aggregator","../services/identity-service","../services/chaincode-service","cleave.js"],function(e,n,t,i,r,o,a,l){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),e.Home=void 0;e.Home=(0,i.inject)(a.IdentityService,o.EventAggregator,l.ChaincodeService,t.ValidationControllerFactory)(s=function(e){function n(i,o,a,l){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var s=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,e.call(this,i,o,a));return s.orgList=[],s.channelList=[],s.discountValidationController=null,s.fractionsDigits=0,s.operationsHistory=[],s.discountValidationController=l.createForCurrentScope(),s.discountValidationController.validateTrigger=t.validateTrigger.manual,s.discountValidationController.addRenderer(new r.BootstrapFormValidationRenderer),s.setupValidation(),s}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),n.prototype.setupValidation=function(){var e=this;t.ValidationRules.customRule("greater_zero",function(e,n){return!e||e>0},"${$displayName} has to be greater than zero."),t.ValidationRules.customRule("greater_balance",function(n,t){return!n||e.organizationAccount.value.amount>=n},"${$displayName} to transfer can't be greater than balance."),this.discountRules_Validate=t.ValidationRules.ensure(function(e){return e.amount}).displayName("Amount").required().satisfiesRule("greater_zero").satisfiesRule("greater_balance").rules},n.prototype.attached=function(){var n=this,t={numeral:!0,numeralDecimalScale:this.fractionsDigits,numeralIntegerScale:10,numeralPositiveOnly:!0,delimiter:""};new Cleave("#amount",t);return this.queryAll(),this.subscriberBlock=this.eventAggregator.subscribe("block",function(){n.queryAll()}),e.prototype.attached.call(this)},n.prototype.detached=function(){this.subscriberBlock.dispose()},n.prototype.queryAll=function(){return this.amount=void 0,Promise.all([this.queryOrgs(),this.queryChannels(),this.queryOrganizations(),this.getOrganizationAccount(),this.getHistoryOperationsList()])},n.prototype.queryOrgs=function(){var e=this;this.chaincodeService.getOrgs("common").then(function(n){e.orgList=[],n.forEach(function(n){var t=n.id;t.startsWith("raft")||t.startsWith("orderer")||t===e.identityService.org||e.orgList.push({key:t,value:t})})})},n.prototype.queryChannels=function(){var e=this;this.chaincodeService.getChannels().then(function(n){e.channelList=n})},n.prototype.transfer=function(e,n){var t=this;this.discountValidationController.reset();try{this.discountValidationController.validate({object:{amount:n},rules:this.discountRules_Validate}).then(function(i){if(i.valid)return t.chaincodeService.invoke(t.channel,t.chaincode,"transfer",[t.identityService.org,e,n])})}catch(e){console.debug(e)}},n.prototype.queryOrganizations=function(){return this.chaincodeService.query(this.channel,this.chaincode,"listOrganizations",[])},n.prototype.getOrganizationAccount=function(){var e=this;this.chaincodeService.query(this.channel,this.chaincode,"getOrganizationAccount",[]).then(function(n){e.organizationAccount=n})},n.prototype.getHistoryOperationsList=function(){var e=this;this.chaincodeService.query(this.channel,this.chaincode,"listOperationsHistory",[]).then(function(n){var t=n||[];e.operationHistoryList=t.map(function(e){return e.id=e.key,e})})},n.prototype.getTokens=function(){return this.chaincodeService.invoke(this.channel,this.chaincode,"getTokens",["1000000"])},n.prototype.queryOperationHistory=function(){var e=this;this.queryAll();return new Promise(function(n,t){e.queryAll().then(function(t){n(e.operationHistoryList)}).catch(function(e){t(e)})})},n}(n.CRUD))||s}),define("text!pages/home.html",["module"],function(e){e.exports='<template>\n  <require from="../resources/elements/key"></require>\n  <require from="../resources/elements/handy-table"></require>\n  <require from="../resources/elements/column"></require>\n  <require from="../resources/elements/widget-entity-crud"></require>\n\n  <div class="form-group row">\n    <div class="card-body aut-form-card">\n      <button type="button" class="btn btn-success" click.trigger="getTokens()" t="Get one million tokens">\n        Transfer\n      </button>\n    </div>\n  </div>\n  <div class="form-group row">\n    <div class="col-sm-6">\n      <h4 t="Balance">Balance</h4>\n      <div class="col-sm-6">\n        ${organizationAccount.value.amount}\n      </div>\n    </div>\n  </div>\n  <div class="form-group row">\n    <div class="col-sm-6">\n      <h4 t="Transfer">Transfer</h4>\n    </div>\n  </div>\n  <div class="form-group row">\n    <div class="col-sm-6">\n      <label class="col-sm-2 col-form-label" t="Receiver"></label>\n      <div class="col-sm-10">\n        <select class="form-control"\n                value.bind="receiver">\n          <option repeat.for="o of orgList" model.bind="o.key">${o.key}\n          </option>\n        </select>\n      </div>\n    </div>\n  </div>\n\n\n  <div class="form-group row">\n    <div class="col-sm-6">\n      <label class="col-sm-2 col-form-label" t="Amount"></label>\n      <div class="input-group col-sm-10">\n        <input id="amount" name="amount" type="text" class="form-control"\n               value.bind="amount & validateManually:discountValidationController">\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="form-group row">\n    <div class="col-sm-6">\n      <div if.bind="discountValidationController.errors.length > 0" class="alert alert-danger" role="alert">\n        <span t="errorMessages.hasErrors">hasErrors</span>\n      </div>\n    </div>\n  </div>\n  <div class="form-group row">\n    <div class="card-body aut-form-card">\n      <button type="button" class="btn btn-success" click.trigger="transfer(receiver,amount)" t="Transfer">\n        Transfer\n      </button>\n    </div>\n  </div>\n  <div class="form-group row">\n    <div class="col-sm-6">\n      <h4 t="Operation history">Operation history</h4>\n    </div>\n  </div>\n  <div class="form-group row">\n    <div class="col-sm-6">\n      <div>\n        <handy-table\n          tabident="operation-tab"\n          read-data.call="queryOperationHistory()"\n          pageable="true"\n          can-create.call="false"\n          can-cancel-filter.call="false"\n          can-filter-columns.bind="false">\n          <column field="value.sender" resourcekey="Sender"></column>\n          <column field="value.receiver" resourcekey="Receiver"></column>\n          <column field="value.amount" resourcekey="Amount"></column>\n          <column field="value.timestamp" resourcekey="Date time" viewtype="datetime" format="YYYY-MM-DD HH:mm" ></column>\n        </handy-table>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n\n</template>\n'}),define("main",["exports","./environment","aurelia-validation","aurelia-i18n","aurelia-framework","aurelia-logging-console"],function(e,n,t,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){e.use.standardConfiguration().plugin("aurelia-i18n",function(n){var t=["t","i18n"];return i.TCustomAttribute.configureAliases(t),n.i18next.use(i.Backend.with(e.loader)),n.setup({backend:{loadPath:"./locales/{{lng}}/{{ns}}.json"},attributes:t,lng:"en",fallbackLng:"en",debug:!1})}).plugin("aurelia-table").plugin("aurelia-validation").feature("resources"),e.use.plugin("aurelia-bootstrap-datetimepicker",function(e){e.extra.bootstrapVersion=4,e.extra.buttonClass="btn btn-outline-secondary"}),l.default.debug&&e.use.developmentLogging();l.default.testing&&e.use.plugin("aurelia-testing");e.start().then(function(){var n=localStorage.getItem("jwt");n?e.setRoot():e.setRoot("login")})};var a,l=(a=n)&&a.__esModule?a:{default:a};r.LogManager.addAppender(new o.ConsoleAppender),r.LogManager.setLevel(r.LogManager.logLevel.warn)}),define("login",["exports","aurelia-framework","./services/identity-service","./services/alert-service"],function(e,n,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Login=void 0;var r,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();n.LogManager.getLogger("Login"),e.Login=(0,n.inject)(t.IdentityService,i.AlertService)(r=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorMessage=void 0,this.identityService=n,this.alertService=t}return e.prototype.login=function(){var e=this;this.identityService.enroll(this.username,this.password).then(function(){e.errorMessage=void 0,e.alertService.success(e.username+" logged in")}).catch(function(n){e.errorMessage=n,e.alertService.error("cannot enroll, caught "+n)})},o(e,[{key:"org",get:function(){return this.identityService.org}}]),e}())||r}),define("text!login.html",["module"],function(e){e.exports='<template>\n  <require from="bootstrap/css/bootstrap.min.css"></require>\n  <require from="./styles/app.css"></require>\n\n  <div style="position: relative; height: 100%; display: flex; justify-content: center;">\n    <div class="container" style="margin: auto;">\n      \x3c!--h-100--\x3e\n      <div class="row justify-content-center align-items-center">\n        <form class="form-signin" submit.delegate="login()">\n          <h1 class="text-center text-uppercase">${org}</h1>\n          <p>You\'re connected to your organization\'s API server. Login or register.</p>\n          <div class="form-group">\n            <input type="text" class="form-control" placeholder="Username" required autofocus value.bind="username">\n          </div>\n          <div class="form-group">\n            <input type="password" class="form-control" placeholder="Password" required value.bind="password">\n          </div>\n          <div if.bind="errorMessage" class="alert alert-danger" role="alert">\n            <span t="errorMessages.errorMessage">errorMessages.errorMessage</span>\n          </div>\n          <div class="form-group">\n            <button class="btn btn-lg btn-primary btn-block" type="submit">Login</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n'}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1}}),define("config",["exports","./environment"],function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var t,i=(t=n)&&t.__esModule?t:{default:t};e.Config=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.put=function(e,n){return localStorage.setItem(e,JSON.stringify(n))},e.get=function(e){var n=localStorage.getItem(e);return"undefined"===n||null===n?(n=i.default[e],this.put(e,n),n):JSON.parse(n)},e.clear=function(){localStorage.clear()},e.getUrl=function(n){var t=e.get("baseUrl");return t?n?t+"/"+n:t:n?"/"+n:"/"},e}()}),define("common/crud",["exports","aurelia-framework","aurelia-event-aggregator","../services/identity-service","../services/chaincode-service","aurelia-validation"],function(e,n,t,i,r,o){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.CRUD=void 0;n.LogManager.getLogger("CRUD"),e.CRUD=(0,n.inject)(i.IdentityService,t.EventAggregator,r.ChaincodeService,o.ValidationControllerFactory)(a=function(){function e(n,t,i){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.channel="common",this.chaincode="token-transfer-chaincode",this.organizationAccount=void 0,this.identityService=n,this.eventAggregator=t,this.chaincodeService=i}return e.prototype.attached=function(){var e=this;this.queryAll(),this.subscriberBlock=this.eventAggregator.subscribe("block",function(n){e.queryAll()})},e.prototype.detached=function(){this.subscriberBlock.dispose()},e.prototype.queryAll=function(){},e.prototype.query=function(e){var n=this,t="list".concat(this.capitalize(e));return this.chaincodeService.query(this.channel,this.chaincode,t,[]).then(function(t){var i=t||[];n[e+"List"]=i.map(function(e){return e.id=e.key,e})})},e.prototype.put=function(e,n){var t=this;if(e.value.type||(e.value.type=n),e.key){var i="update".concat(this.capitalize(n));return this.chaincodeService.invoke(this.channel,this.chaincode,i,[e.key,JSON.stringify(e.value)]).then(function(){t.removeForm(n)})}var r="create".concat(this.capitalize(n));return this.chaincodeService.invoke(this.channel,this.chaincode,r,[JSON.stringify(e.value)]).then(function(){t.removeForm(n)})},e.prototype.remove=function(e,n){var t=this,i="delete".concat(this.capitalize(e));return this.chaincodeService.invoke(this.channel,this.chaincode,i,[n]).then(function(){t.removeForm(e)})},e.prototype.removeForm=function(e){var n=this.getCurrentTag(e);this[n]=null,this[n]=void 0},e.prototype.setCurrent=function(e,n){var t=this,i="get".concat(this.capitalize(e));return this.chaincodeService.query(this.channel,this.chaincode,i,[n]).then(function(i){t[t.getCurrentTag(e)]={key:n,value:i,id:n}})},e.prototype.setNew=function(e){this[this.getCurrentTag(e)]={new:!0,value:{}}},e.prototype.getCurrentTag=function(e){return e+(this.canEdit(e)?"Edit":"View")},e.prototype.canEdit=function(e){return!0},e.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.prototype.convertDate=function(e){var n=e.split("/");return new Date(parseInt(n[2],10),parseInt(n[0],10)-1,parseInt(n[1],10)).getTime()},e}())||a}),define("app",["exports","aurelia-i18n","aurelia-framework","./services/identity-service","./services/socket-service","./services/alert-service","./services/config-service","bootstrap"],function(e,n,t,i,r,o,a){"use strict";var l;Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;var s=t.LogManager.getLogger("App");e.App=(0,t.inject)(n.I18N,i.IdentityService,r.SocketService,o.AlertService,a.ConfigService)(l=function(){function e(n,t,i,r,o){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.i18n=n,this.i18n.setLocale("en"),this.identityService=t,this.socketService=i,this.alertService=r,this.configService=o,this.role=""}return e.prototype.configureRouter=function(e,n){e.title="Token transfer";e.map([{route:["","home"],name:"home",moduleId:"./pages/home",nav:!0,title:"Home"}]),this.router=n},e.prototype.activate=function(){var e=this;return this.configService.get().then(function(n){e.role=n.org})},e.prototype.attached=function(){this.username=this.identityService.username,this.org=this.identityService.org,this.socketService.subscribe()},e.prototype.detached=function(){s.debug("detached")},e.prototype.logout=function(){var e=this;this.identityService.logout().then(function(){e.alertService.success("logged out")}).catch(function(n){e.alertService.error("cannot log out, caught "+n)})},e}())||l}),define("text!app.html",["module"],function(e){e.exports='<template>\n  <require from="font-awesome/css/font-awesome.css"></require>\n  <require from="bootstrap/css/bootstrap.min.css"></require>\n  <require from="eonasdan-bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css"></require>\n  <require from="./styles/app.css"></require>\n  <require from="./styles/spinners.css"></require>\n  <require from="./resources/elements/footer-alerts"></require>\n\n  <div class="page-wrapper">\n    <div class="page-header">\n      \x3c!--mb-2--\x3e\n      <nav class="navbar navbar-expand-md navbar-light" style="background-color: #e3f2fd;">\n        <a class="navbar-brand mb-0 h1 mr-3" href="#/" t="Token Transfer"></a>\n        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">\n          <span class="navbar-toggler-icon"></span>\n        </button>\n        <div class="collapse navbar-collapse" id="navbarCollapse">\n          <ul class="navbar-nav mr-auto ml-auto">\n            <li repeat.for="row of router.navigation" class="nav-item ${row.isActive ? \'active\' : \'\'} text-uppercase font-weight-bold text-center mt-2">\n              <h5><a class="nav-link ${row.isActive ? \'\' : \'dimmed\'}" href.bind="row.href">${row.title}</a></h5>\n            </li>\n          </ul>\n          <h3><a href="#" class="badge badge-light mt-2">${org}</a></h3>\n          <ul class="navbar-nav mt-3 ml-3 mt-md-0">\n            <li><a class="btn btn-sm btn-secondary float-right text-uppercase" href click.delegate="logout()"><span t="logout">logout</span></a></li>\n          </ul>\n        </div>\n      </nav>\n    </div>\n\x3c!-- class="container" --\x3e\n\n      \x3c!--padding-right: 10px; padding-left: 10px; padding-top: 10px;--\x3e\n        <div class="page-content flex-fill-column">\n          <main role="main" style="width: 100%; margin: 0 auto; padding: 10px;" class="flex-fill-column">\n            <router-view class="flex-fill-column"></router-view>\n          </main>\n        </div>\n\n\n        <footer-alerts>\n        </footer-alerts>\n\n  </div>\n</template>\n'});