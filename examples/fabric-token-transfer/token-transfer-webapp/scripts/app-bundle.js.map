{"version":3,"sources":["/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/styles/spinners.css","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/styles/app.css","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/services/validation-service.js","src/services/socket-service.js","src/services/identity-service.js","src/services/file-service.js","src/services/config-service.js","src/services/chaincode-service.js","src/services/alert-service.js","src/resources/index.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/widgets/table-view-text.html","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/widgets/table-view-key.html","src/resources/elements/widget-multisel-list.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/widget-multisel-list.html","src/resources/elements/widget-entity-crud.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/widget-entity-crud.html","src/resources/elements/spinner.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/spinner.html","src/resources/elements/key.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/key.html","src/resources/elements/handy-table.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/handy-table.html","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/handy-table-td.html","src/resources/elements/footer-alerts.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/resources/elements/footer-alerts.html","src/resources/elements/field-value-converters.js","src/resources/elements/expression-evaluator.js","src/resources/elements/column.js","src/resources/elements/column-filter.js","src/resources/elements/bootstrap-form-validation-renderer.js","src/pages/home.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/pages/home.html","src/main.js","src/login.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/login.html","src/environment.js","src/config.js","src/common/crud.js","src/app.js","/Users/maksimfedin/Sberbank/gost/forked/ver2/fabric-starter/examples/fabric-token-transfer/token-transfer-webapp/src/app.html"],"names":["log","LogManager","getLogger","SocketService","EventAggregator","AlertService","eventAggregator","alertService","socket","io","connect","Config","getUrl","subscribe","info","connected","subscribed","on","debug","o","success","number","channel_id","publish","disconnect","baseUrl","IdentityService","Aurelia","HttpClient","ConfigService","aurelia","http","configService","get","then","org","config","getJwt","username","localStorage","getItem","key","name","setJwt","jwt","setItem","enroll","password","Promise","resolve","url","params","reject","fetch","method","body","response","json","ok","Error","status","j","setRoot","catch","err","logout","clear","FileService","mspid","ChaincodeService","identityService","mspID","JSON","stringify","promise","query","Object","keys","map","encodeURIComponent","k","join","headers","msg","statusText","error","getBilateralChannels","getChannels","channels","filter","orgs","channel","split","length","chaincode","func","args","fcn","targets","pending","result","parse","getOrgs","undefined","invoke","transaction","invokeWithTransient","transient","transientMap","_messageStackMaxSize","onNewMessage","_pending","_alertMessages","find","x","type","scope","message","time","Date","unshift","splice","m","title","configure","WidgetMultiselListCustomElement","loading","dismissFormClicked","$event","console","dismissFormCallback","optionClicked","$o","selected","selectedChangeCallback","data","options","bindable","WidgetEntityCrudCustomElement","backAction","backActionCallback","buttonAClicked","buttonACallback","buttonBClicked","buttonBCallback","buttonCClicked","buttonCCallback","SpinnerCustomElement","KeyCustomElement","attribute","oChanged","parts","objectType","id","HandyTableCustomElement","ExpressionEvaluator","evaluator","visiblecolumns","filteredColumns","dataList","skipRowClick","localStoreKey","localStoreFilterSubKey","sortColumn","sortColumnData","a","b","order","vala","field","evaluateInterpolation","sortTextView","valb","canFilter","readData","getFilters","filters","expressions","columns","forEach","entry","filterActive","push","filterExpression","value","values","getData","onReadError","sort","column","columnsChanged","newValue","restoreVisibleColumns","bindVisibleColumns","restoreFilteredColumns","bindFilteredColumns","sortDefCol","defaultSort","dataSetChanged","dataSet","visible","canbefiltered","getViewDataDisplay","getviewdata","createNewClicked","createNewCallback","setAllFiltersClicked","storeFilteredColumns","stopPropagation","applyFiltersClicked","filterOptionClicked","clearFiltersClicked","keyClicked","$isSelected","rowSelected","selectedCallback","detail","row","rowClicked","normalizeMimeType","mimetype","filename","toLowerCase","endsWith","converBase64toBlob","content","contentType","sliceSize","byteCharacters","window","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","blob","Blob","dataContenttoFile","dataContent","mime","File","hasValue","val","downloadClicked","fileName","downloadGetDataCallback","file","fileresp","URL","createObjectURL","anchor","document","createElement","href","setAttribute","innerHTML","style","display","appendChild","setTimeout","click","removeChild","self","revokeObjectURL","hasOptionalColumns","canHideColumns","storeVisibleColumns","cvarray","storeKey","vis","visJson","tabident","isArray","c","y","filterToJsonObject","fltJson","jsonObjectToFilter","columnVisibilityClicked","columnFiltersClicked","attached","subscriberBlock","initFilters","detached","dispose","pickerDateTime1Changed","pickerDateTime2Changed","pickerDateChanged","$","e","FooterAlertsCustomElement","BindingEngine","bindingEngine","alertStackViewState","topAlertState","observeData","subscription","expressionObserver","oldValue","dataChanged","toggleAlertStackPanel","messagesAcknCount","FieldValueDisplayValueConverter","toView","fieldlocator","format","typenarrow","fl","indexOf","replace","RegExp","DateFormatValueConverter","InterpolationParser","Parser","BindingLanguage","parser","bindingLanguage","emptyStringExpression","LiteralString","nullExpression","LiteralPrimitive","undefinedExpression","cache","expressionText","parseInterpolation","expression","Binary","coalesce","part","Conditional","CallMember","ViewResources","interpolationParser","resources","lookupFunctions","evaluate","bindingContext","evaluateInternal","overrideContext","Column","noView","filterValue","filterValueChanged","fv","act","viewtype","fval","from","getTime","to","expr","filterExpressionBuilder","path","filterField","resourcekey","ColumnFilter","BootstrapFormValidationRenderer","render","instruction","unrender","elements","lookupElementsByName","propertyName","element","remove","add","getElementsByName","valid","formGroup","closest","formControl","querySelector","classList","className","textContent","inputGroup","parentElement","querySelectorAll","Home","ValidationControllerFactory","chaincodeService","factory","orgList","channelList","discountValidationController","fractionsDigits","operationsHistory","createForCurrentScope","validateTrigger","manual","addRenderer","setupValidation","ValidationRules","customRule","obj","organizationAccount","amount","discountRules_Validate","ensure","p","displayName","required","satisfiesRule","rules","decinpopt","numeral","numeralDecimalScale","numeralIntegerScale","numeralPositiveOnly","delimiter","Cleave","queryAll","all","queryOrgs","queryChannels","queryOrganizations","getOrganizationAccount","getHistoryOperationsList","orgName","startsWith","transfer","receiver","reset","validate","object","ex","account","getTokens","queryOperationHistory","operationHistoryList","CRUD","addAppender","ConsoleAppender","setLevel","logLevel","warn","use","standardConfiguration","plugin","instance","aliases","TCustomAttribute","configureAliases","i18next","Backend","with","loader","setup","backend","loadPath","attributes","lng","fallbackLng","feature","extra","bootstrapVersion","buttonClass","environment","developmentLogging","testing","start","isLoggedIn","Login","errorMessage","login","put","entity","opName","concat","capitalize","removeForm","currentTagName","getCurrentTag","setCurrent","setNew","new","canEdit","s","charAt","toUpperCase","convertDate","date","dateArr","parseInt","App","I18N","i18n","socketService","setLocale","role","configureRouter","router","routes","route","moduleId","nav","activate","res"],"mappings":"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","file":"app-bundle.js","sourcesContent":[null,null,null,"import {inject} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {AlertService} from './alert-service';\nimport io from 'socket.io-client';\nimport {Config} from '../config';\n\nlet log = LogManager.getLogger('SocketService');\n\n@inject(EventAggregator, AlertService)\nexport class SocketService {\n\n  constructor(eventAggregator, alertService) {\n    this.eventAggregator = eventAggregator;\n    this.alertService = alertService;\n\n    this.socket = io.connect(Config.getUrl());\n  }\n\n  subscribe() {\n    log.info('subscribe socket.connected', this.socket.connected);\n\n    if (!this.subscribed) {\n      this.socket.on('chainblock', o => {\n        log.debug('chainblock', o);\n\n        this.alertService.success(`new block ${o.number} on ${o.channel_id}`, \"PUT\");\n        this.eventAggregator.publish('block', o);\n      });\n    }\n\n    this.subscribed = true;\n  }\n\n  disconnect() {\n    this.subscribed = false;\n    this.socket.disconnect();\n  }\n\n}\n","import {inject} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\nimport {Aurelia} from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport {AlertService} from './alert-service';\nimport {ConfigService} from './config-service';\nimport {Config} from '../config';\n\nlet log = LogManager.getLogger('IdentityService');\n\nconst baseUrl = Config.getUrl('users');\n\n@inject(Aurelia, HttpClient, ConfigService)\nexport class IdentityService {\n\n  constructor(aurelia, http, configService) {\n    this.aurelia = aurelia;\n    this.http = http;\n    this.configService = configService;\n\n    this.configService.get().then(config => {\n      this.org = config.org;\n    });\n  }\n\n  static getJwt(org, username) {\n    return localStorage.getItem(IdentityService.key(org, username));\n  }\n\n  static key(org, username) {\n    return 'jwt' + (org ? org.name + username : '');\n  }\n\n  static setJwt(jwt, org, username) {\n    localStorage.setItem(IdentityService.key(org, username), jwt);\n  }\n\n  enroll(username, password, org) {\n    const jwt = IdentityService.getJwt(org, username);\n    if(jwt) {\n      log.debug(`already enrolled ${org.name} ${username}`, jwt);\n      return Promise.resolve();\n    }\n\n    const url = org ? `${org.url}/users` : baseUrl;\n\n    let params = {\n      username: username,\n      password: password\n    };\n\n    return new Promise((resolve, reject) => {\n      this.http.fetch(url, {\n        method: 'post',\n        body: json(params)\n      })\n      .then(response => {\n        response.json().then(j => {\n          if(!response.ok) {\n            reject(new Error(`cannot enroll ${response.status} ${j}`));\n          } else {\n            log.debug(j);\n\n            IdentityService.setJwt(j, org, username);\n\n            this.username = username;\n\n            if(!org) {\n              this.aurelia.setRoot('app');\n            }\n\n            resolve();\n          }\n        });\n      })\n      .catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  logout() {\n    localStorage.clear();\n    return this.aurelia.setRoot('login');\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\n\nlet log = LogManager.getLogger('FileService');\n\nexport class FileService{\n\n  constructor() {\n  }\n\n\n}\n","import {inject} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport {Config} from '../config';\n\nlet log = LogManager.getLogger('ConfigService');\n\n@inject(HttpClient)\nexport class ConfigService {\n\n  constructor(http) {\n    this.http = http;\n  }\n\n  get() {\n    return new Promise((resolve, reject) => {\n      this.http.fetch(Config.getUrl('mspid'))\n      .then(response => response.json())\n      .then(mspid => {\n        log.debug('mspid', mspid);\n        this.config = {\n          org: mspid\n        };\n\n        resolve(this.config);\n      })\n      .catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n}\n","import {LogManager} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\nimport {IdentityService} from './identity-service';\nimport {AlertService} from './alert-service';\nimport {Config} from '../config';\n\nlet log = LogManager.getLogger('ChaincodeService');\n\nconst baseUrl = Config.getUrl('channels/');\n\n@inject(HttpClient, IdentityService, AlertService)\nexport class ChaincodeService {\n\n  constructor(http, identityService, alertService) {\n    this.identityService = identityService;\n    this.http = http;\n    this.alertService = alertService;\n    this.mspID = this.identityService.org\n  }\n\n  fetch(url, params, method, org, username) {\n    log.debug('fetch', params);\n    log.debug(JSON.stringify(params));\n\n    return new Promise((resolve, reject) => {\n      const jwt = IdentityService.getJwt(org, username);\n\n      let promise;\n\n      if (method === 'get') {\n        let query = '';\n        if (params) {\n          query = '?' + Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&');\n        }\n\n        promise = this.http.fetch(`${url}${query}`, {\n          headers: {\n            'Authorization': 'Bearer ' + jwt\n          }\n        });\n      } else {\n        promise = this.http.fetch(url, {\n          method: method,\n          body: json(params),\n          headers: {\n            'Authorization': 'Bearer ' + jwt\n          }\n        });\n      }\n\n      promise.then(response => {\n        if (response.status === 401) {\n          this.alertService.info('session expired, logging you out');\n          this.identityService.logout();\n          reject(new Error('Session expired, logging you out'));\n        }\n        response.json().then(j => {\n          log.debug('fetch', j);\n\n          if (!response.ok) {\n            const msg = `${response.statusText} ${j}`;\n\n            if (response.status === 401) {\n              this.alertService.info('session expired, logging you out');\n              this.identityService.logout();\n            } else {\n              this.alertService.error(msg);\n            }\n\n            reject(new Error(msg));\n          } else {\n            resolve(j);\n          }\n        });\n\n      }).catch(err => {\n        this.alertService.error(`caught ${err}`);\n        reject(err);\n      });\n    });\n  }\n\n  getBilateralChannels() {\n    return this.getChannels().then(channels => {\n      return channels.filter(channel => {\n        const orgs = channel.split('-');\n        return orgs.length === 2 && (orgs[0] === this.identityService.org || orgs[1] === this.identityService.org);\n      });\n    });\n  }\n\n  getChannels(org, username) {\n    log.debug(`getChannels ${org} ${username}`);\n\n    const url = baseUrl;\n\n    return new Promise((resolve, reject) => {\n      this.fetch(url, null, 'get', org, username).then(j => {\n        const channels = j.map(o => {\n          return o.channel_id;\n        });\n\n        resolve(channels);\n      })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  query(channel, chaincode, func, args, org, username) {\n    log.debug(`query channel=${channel} chaincode=${chaincode} func=${func} ${org} ${username}`, args);\n\n    const url = org ? `${org.url}/channels/` : baseUrl;\n\n    const params = {\n      fcn: func,\n      args: json(args),\n      targets: json([])\n    };\n\n    return new Promise((resolve, reject) => {\n      this.alertService.pending('data fetching ..');\n\n      this.fetch(`${url}${channel}/chaincodes/${chaincode}`, params, 'get', org, username).then(j => {\n        log.debug('query result:', j);\n        this.alertService.success('data fetched successfully');\n        let result = JSON.parse(j[0]);\n        log.debug('result:', result);\n        resolve(result);\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  getOrgs(channel, org, username) {\n    log.debug(`get ORGS for channel=${channel}`);\n\n    const url = org ? `${org.url}/channels/` : baseUrl;\n\n    return new Promise((resolve, reject) => {\n      this.fetch(`${url}${channel}/orgs`, undefined, 'get', org, username).then(j => {\n        // log.debug('query', j);\n        resolve(j);\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  invoke(channel, chaincode, func, args, org, username) {\n    log.debug(`invoke channel=${channel} chaincode=${chaincode} func=${func} ${org} ${username}`, args);\n\n    const url = org ? `${org.url}/channels/` : baseUrl;\n\n    const params = {\n      fcn: func,\n      args: args,\n      targets: json([])\n    };\n\n    return new Promise((resolve, reject) => {\n      this.alertService.pending('data updating ..', 'PUT');\n      this.fetch(`${url}${channel}/chaincodes/${chaincode}`, params, 'post', org, username).then(j => {\n        resolve(j.transaction);\n      })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  invokeWithTransient(channel, chaincode, func, args, transient, org, username) {\n    log.debug(`invoke channel=${channel} chaincode=${chaincode} func=${func} ${org} ${username}`, transient);\n\n    const url = org ? `${org.url}/channels/` : baseUrl;\n\n    const params = {\n      fcn: func,\n      args: args,\n      targets: json([]),\n      transientMap: transient\n    };\n\n    return new Promise((resolve, reject) => {\n      this.alertService.pending('data updating ..', 'PUT');\n      this.fetch(`${url}${channel}/chaincodes/${chaincode}`, params, 'post', org, username).then(j => {\n        resolve(j.transaction);\n      })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n}\n","import {inject} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\n//import * as toastr from 'toastr';\n\nlet log = LogManager.getLogger('AlertService');\n\nconst _messageStackMaxSize = 50;\n\n//@inject(toastr)\nexport class AlertService {\n\n  _alertMessages;\n\n  constructor() {\n  //constructor(toastr) {\n    // this.toastr = toastr;\n    // this.toastr.options.positionClass = 'toast-bottom-right';\n    // this.toastr.options.progressBar = true;\n    // this.toastr.options.closeButton = true;\n    // this.toastr.options.timeOut = 1000;\n    // this.toastr.options.extendedTimeOut = 2000;\n\n    this._alertMessages = [];\n  }\n\n  onNewMessage = message => {\n    let _pending = this._alertMessages.find(x=>x.type === 'pending' && x.scope === message.scope);\n\n    if (this._alertMessages.length >0 && message.type === this._alertMessages[0].type && message.type === 'success' && message.message === this._alertMessages[0].message && message.scope === 'GET'){\n      this._alertMessages[0].time = new Date();\n    }\n    else if (_pending && message.type === 'pending'){\n      _pending.time = new Date();\n    }\n    else if (_pending && message.type !== 'pending'){\n      // finish\n      this._alertMessages = this._alertMessages.filter (x=> !(x.type === 'pending' && x.scope === message.scope) );\n      //this._alertMessages.shift();\n      if (this._alertMessages.length >0 && message.type === this._alertMessages[0].type && message.type === 'success' && message.message === this._alertMessages[0].message && message.scope === 'GET'){\n        this._alertMessages[0].time = new Date();\n      }\n      else {\n        this._alertMessages.unshift(message);\n      }\n    }\n    else {\n      this._alertMessages.unshift(message);\n      if (this._alertMessages.length > _messageStackMaxSize){\n        this._alertMessages.splice(-1,1);\n      }\n    }\n  };\n\n\n  pending(m, scope='GET', title = 'Awaiting..') {\n    this.onNewMessage({type: 'pending', title: title, message: m, time: new Date(), scope: scope})\n  }\n\n  info(m, scope='GET', title = 'Information') {\n    //this.toastr.info(m);\n    this.onNewMessage({type: 'info', title: title, message: m, time: new Date(), scope: scope})\n  }\n\n  error(m, scope='GET', title = 'Error') {\n    //this.toastr.error(m);\n    this.onNewMessage({type: 'danger', title: title, message: m, time: new Date(), scope: scope})\n  }\n\n  success(m, scope='GET', title = 'Success') {\n    //this.toastr.success(m);\n    this.onNewMessage({type: 'success', title: title, message: m, time: new Date(), scope: scope})\n  }\n\n\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n",null,null,"import {containerless, child, children, bindable, inject, BindingEngine, customElement, processContent, TargetInstruction } from 'aurelia-framework';\n\nexport class WidgetMultiselListCustomElement {\n  @bindable options = [];\n  @bindable selectedChangeCallback = null;\n  //@bindable getOptions = null;\n  @bindable onReadError = null;\n\n  @bindable fixHeight = null;\n\n  loading = false;\n\n  dismissFormClicked ($event){\n    console.log('dismissFormClicked');\n\n    if (this.dismissFormCallback)\n      this.dismissFormCallback();\n  }\n\n  optionClicked ($o){\n    $o.selected = !$o.selected;\n\n    if (this.selectedChangeCallback != null){\n      this.selectedChangeCallback({data: this.options.filter (x=>x.selected)});\n    }\n  }\n\n}\n\n",null,"import {\n  containerless,\n  child,\n  children,\n  bindable,\n  inject,\n  BindingEngine,\n  customElement,\n  processContent,\n  TargetInstruction\n} from 'aurelia-framework';\n\nexport class WidgetEntityCrudCustomElement {\n  @bindable showForm = false;\n  @bindable showViewOnly = false;\n  @bindable entityTitle = null;\n\n  @bindable buttonAVisible = true;\n  @bindable buttonAName = \"save\";\n  @bindable buttonACallback = null;\n\n  @bindable buttonBVisible = false;\n  @bindable buttonBName = \"cancel\";\n  @bindable buttonBCallback = null;\n\n  @bindable buttonCVisible = false;\n  @bindable buttonCName = \"delete\";\n  @bindable buttonCCallback = null;\n\n  @bindable backActionCallback = null;\n\n  backAction($event) {\n    if (this.backActionCallback)\n      this.backActionCallback();\n  }\n\n  buttonAClicked() {\n    if (this.buttonACallback)\n      this.buttonACallback();\n  }\n\n  buttonBClicked($event) {\n    if (this.buttonBCallback)\n      this.buttonBCallback();\n  }\n\n  buttonCClicked($event) {\n    if (this.buttonCCallback)\n      this.buttonCCallback();\n  }\n\n  // bind(bindingContext) {\n  //   this.$parent = bindingContext;\n  // }\n}\n\n",null,"import {containerless, child, children, bindable, inject, BindingEngine, customElement, processContent, TargetInstruction } from 'aurelia-framework';\n\nexport class SpinnerCustomElement {\n  @bindable busy = false;\n  @bindable mode = 'context'; // or screen\n\n}\n\n",null,"import {bindable, bindingMode} from 'aurelia-framework';\n\n@bindable({ name: 'o', attribute: 'data'})\nexport class KeyCustomElement {\n  oChanged() {\n    if(this.o) {\n      const key = this.o;\n      const parts = key.split('\\u0000');\n      if(parts.length > 2) {\n        this.objectType = parts[1];\n        this.id = parts[2];\n      } else {\n        this.id = key;\n      }\n    }\n  }\n}\n",null,"import {\n  containerless,\n  child,\n  children,\n  bindable,\n  inject,\n  BindingEngine,\n  customElement,\n  processContent,\n  TargetInstruction\n} from 'aurelia-framework';\nimport {Column} from './column'\nimport {IdentityService} from \"../../services/identity-service\";\nimport {ChaincodeService} from \"../../services/chaincode-service\";\nimport {ValidationControllerFactory} from \"aurelia-validation\";\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {ExpressionEvaluator} from './expression-evaluator';\n\n//@containerless()\n@inject(EventAggregator, ExpressionEvaluator)\nexport class HandyTableCustomElement {\n\n  constructor(eventAggregator, evaluator) {\n    this.eventAggregator = eventAggregator;\n    this.evaluator = evaluator;\n  }\n\n  @bindable tabident = null;\n  @children('column') columns = [];\n  @bindable canHideColumns = true;\n  @bindable canFilterColumns = true;\n\n  visiblecolumns = [];\n  filteredColumns = [];\n\n  //@bindable loadData = () => {};\n\n  //@bindable columns = [];\n  @bindable pageable = true;\n  @bindable pageSize = 20;\n  @bindable page = 1;\n  @bindable pagerSize = 20;\n\n  //columns: any[] = null;\n\n  loading = false;\n  @bindable loadingMessage = \"Loading data...\";\n  @bindable loadingDiv = \"<span>Loading data...</span>\";\n\n  @bindable readData = null;\n  @bindable dataSet = null;\n  @bindable onReadError = null;\n\n  @bindable selectedCallback = null;\n  @bindable createNewCallback = null;\n  //@bindable filterNewCallback = null;\n  //@bindable cancelFilterNewCallback = null;\n\n  @bindable canCreate = () => true;\n  @bindable canDelete = () => true;\n  @bindable canCancelFilter = () => true;\n\n  @bindable minHeight = '400px';\n\n  @bindable pickerDateTime1;\n  @bindable pickerDateTime2;\n\n  dataList = [];\n\n  skipRowClick = false;\n  localStoreKey = '_profile.h-tab.';\n  localStoreFilterSubKey = '.filterst';\n\n  //sortIndex = 0;\n  sortColumn = undefined;\n\n  // sleep(ms) {\n  //   return new Promise(resolve => setTimeout(resolve, ms));\n  // }\n\n\n  canFilter(){\n    return this.readData;\n    // console.log('canFilter');\n    // console.log(this.columns);\n    // console.log(this.columns.length);\n    // this.columns.forEach(function(entry) {\n    //   console.log(entry);\n    // });\n    // console.log('--------------------');\n    //\n    // return this.columns.filter(x=>x.canbefiltered == true).length > 0 ? true : false;\n  }\n\n  getFilters () {\n    let filters = {\n      type: \"filter\",\n      expressions: []\n    };\n\n    this.columns.forEach(function(entry) {\n      if (entry.filterActive){\n        filters.expressions.push(...entry.filterExpression);\n      }\n    });\n\n    filters.expressions = filters.expressions.filter(x=> (x && (x.value || x.values)));\n    //console.log('---------- filters ----------------------');\n    //console.log(filters);\n\n    return filters;\n  }\n\n  getData() {\n    if (!this.readData)\n      throw new Error(\"No readData method specified for table\");\n\n    //this.initialLoad = true;\n\n    this.loading = true;\n\n    this.readData({filter: this.getFilters ()})\n      .then((result) => {\n        this.dataList = result;\n\n        //setTimeout(() => this.loading = false, 15000);\n        this.loading = false;\n      })\n      .catch((error) => {\n        console.log(error);\n\n        if (this.onReadError)\n          this.onReadError(error);\n\n        this.loading = false;\n      });\n  }\n\n  sort(column) {\n    //this.sortIndex = index;\n    this.sortColumn = column;\n  }\n\n  sortColumnData = (a, b, order) => {\n    let vala = this.sortColumn.field ? this.evaluator.evaluateInterpolation('${' + this.sortColumn.field + '}', a) : this.sortColumn.sortTextView({data: a});\n    let valb = this.sortColumn.field ? this.evaluator.evaluateInterpolation('${' + this.sortColumn.field + '}', b) : this.sortColumn.sortTextView({data: b});\n\n    if (order === 1) {\n      if (vala < valb) {\n        return -1;\n      }\n      if (vala > valb) {\n        return 1;\n      }\n    }\n    if (order === -1) {\n      if (vala < valb) {\n        return 1;\n      }\n      if (vala > valb) {\n        return -1;\n      }\n    }\n    return 0;\n  };\n\n\n  columnsChanged(newValue) {\n    this.restoreVisibleColumns(this.columns);\n    this.bindVisibleColumns(this.columns);\n\n    this.restoreFilteredColumns(this.columns);\n    this.bindFilteredColumns(this.columns);\n\n    let sortDefCol = this.columns.find(x => x.defaultSort);\n    if (sortDefCol) {\n      this.sort(sortDefCol);\n    }\n\n    //this.initFilters();\n\n    if (this.readData) {\n      this.getData();\n    }\n  }\n\n  dataSetChanged(newValue) {\n    this.dataList = this.dataSet;\n  }\n\n  bindVisibleColumns(columns) {\n    this.visiblecolumns = columns.filter(x => x.visible);\n\n  }\n\n  bindFilteredColumns(columns) {\n    this.filteredColumns = columns.filter(x => x.canbefiltered);\n\n    // this.filteredColumns.forEach(function(entry) {\n    //   console.log(entry.filterValue);\n    // });\n  }\n\n\n  getViewDataDisplay(o, column) {\n    if (column.getviewdata)\n      return column.getviewdata({data: o});\n    else\n      return undefined;\n  }\n\n  createNewClicked($event) {\n    if (this.createNewCallback)\n      this.createNewCallback();\n  }\n\n  // filterNewClicked($event) {\n  //   if (this.filterNewCallback)\n  //     this.filterNewCallback();\n  //   this.getData();\n  // }\n\n  setAllFiltersClicked ($event){\n    this.filteredColumns.forEach(function(entry) {\n      entry.filterActive = true;\n    });\n\n    if (this.readData) {\n      this.getData();\n    }\n\n    this.storeFilteredColumns(this.columns);\n\n    $event.stopPropagation();\n  }\n\n  applyFiltersClicked($event){\n    if (this.readData) {\n      this.getData();\n    }\n\n    this.storeFilteredColumns(this.columns);\n\n    $event.stopPropagation();\n  }\n\n  filterOptionClicked($event){\n    $event.stopPropagation();\n    return true;\n  }\n\n  clearFiltersClicked($event){\n    this.filteredColumns.forEach(function(entry) {\n      entry.filterActive = false;\n    });\n\n    if (this.readData) {\n      this.getData();\n    }\n\n    this.storeFilteredColumns(this.columns);\n\n    $event.stopPropagation();\n  }\n\n  // cancelFilterNewClicked($event) {\n  //   if (this.cancelFilterNewCallback())\n  //     this.cancelFilterNewCallback();\n  //   this.filterNewCallback();\n  //   this.getData();\n  //\n  // }\n\n  keyClicked($o) {\n    this.skipRowClick = true;\n\n    $o.$isSelected = !$o.$isSelected;\n  }\n\n  rowSelected($event) {\n    if (this.selectedCallback)\n      this.selectedCallback({data: $event.detail.row});\n  }\n\n  rowClicked($o) {\n\n    try {\n      if (!this.skipRowClick) {\n        if ($o && $o.$isSelected) {\n          if (this.selectedCallback)\n            this.selectedCallback({data: null});\n        }\n      }\n    } finally {\n      this.skipRowClick = false;\n    }\n  }\n\n  normalizeMimeType(mimetype, filename) {\n    if (mimetype == 'XML' || mimetype == 'xML$') {\n      return 'application/xml';\n    } else if (mimetype == 'TEXT' || mimetype == 'tEXT$') {\n      return 'text/plain';\n    } else if (mimetype == 'Binary' || mimetype == 'binary$') {\n      if (filename.toLowerCase().endsWith('.zip')) {\n        return 'application/zip';\n      } else\n        return 'application/octet-stream';\n    } else\n      return mimetype;\n  }\n\n  converBase64toBlob(content, contentType) {\n    contentType = contentType || '';\n    var sliceSize = 512;\n    var byteCharacters = window.atob(content); //method which converts base64 to binary\n    var byteArrays = [];\n    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      var slice = byteCharacters.slice(offset, offset + sliceSize);\n      var byteNumbers = new Array(slice.length);\n      for (var i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n      var byteArray = new Uint8Array(byteNumbers);\n      byteArrays.push(byteArray);\n    }\n    var blob = new Blob(byteArrays, {\n      type: contentType\n    });\n    return blob;\n  }\n\n  dataContenttoFile(dataContent, filename, mime) {\n    let data = this.converBase64toBlob(dataContent, mime);\n\n    return new File([data], filename, {type: mime});\n  }\n\n  hasValue($o, column) {\n    let val = column.field ? this.evaluator.evaluateInterpolation('${' + column.field + '}', $o) : undefined;\n    return val;\n  }\n\n  downloadClicked($o, column) {\n    let fileName = 'file.txt';\n\n    if (column.downloadGetDataCallback) {\n      column.downloadGetDataCallback({data: $o})\n        .then(fileresp => {\n          //console.log ('fileresp');\n          //console.log (fileresp);\n          let file = this.dataContenttoFile(fileresp.content, fileresp.filename, this.normalizeMimeType(fileresp.mimetype, fileresp.filename));\n          //console.log('file');\n          //console.log(file);\n          fileName = fileresp.filename;\n          return URL.createObjectURL(file);\n        })\n        .then(url => {\n          let anchor = document.createElement(\"a\");\n          anchor.href = url;\n          anchor.setAttribute(\"download\", fileName);\n          anchor.innerHTML = \"downloading...\";\n          anchor.style.display = \"none\";\n          document.body.appendChild(anchor);\n          setTimeout(function () {\n            anchor.click();\n            document.body.removeChild(anchor);\n            setTimeout(function () {\n              self.URL.revokeObjectURL(anchor.href);\n            }, 200);\n          }, 50);\n\n          return true;\n        });\n    }\n  }\n\n  hasOptionalColumns() {\n    return this.canHideColumns;\n  }\n\n  storeVisibleColumns(columns) {\n    var cvarray = columns.map(x => ({key: x.storeKey, vis: x.visible}));\n    var visJson = JSON.stringify(cvarray);\n\n    window.localStorage.setItem(this.localStoreKey + this.tabident, visJson);\n  }\n\n  restoreVisibleColumns(columns) {\n    // console.log('restoreVisibleColumns');\n    var visJson = window.localStorage.getItem(this.localStoreKey + this.tabident);\n    if (visJson) {\n      var cvarray = JSON.parse(visJson);\n      if (Array.isArray(cvarray)) {\n        cvarray.forEach(x => {\n          var c = columns.find(y => y.storeKey == x.key);\n          if (c) {\n            c.visible = x.vis\n          }\n        });\n      }\n    }\n  }\n\n  storeFilteredColumns(columns) {\n    var cvarray = columns.map(x => ( x.filterToJsonObject()));\n    console.log ('storeFilteredColumns');\n    console.log (cvarray);\n\n    var fltJson = JSON.stringify(cvarray);\n\n    window.localStorage.setItem(this.localStoreKey + this.tabident + this.localStoreFilterSubKey, fltJson);\n  }\n\n  restoreFilteredColumns(columns) {\n    var fltJson = window.localStorage.getItem(this.localStoreKey + this.tabident + this.localStoreFilterSubKey);\n    if (fltJson) {\n      var cvarray = JSON.parse(fltJson);\n      if (Array.isArray(cvarray)) {\n        cvarray.forEach(x => {\n          var c = columns.find(y => y.storeKey == x.key);\n          if (c) {\n            c.jsonObjectToFilter(x);\n            // c.filterActive = x.act;\n            // c.filterValue = x.fval;\n            // console.log ('c.filterValue');\n            // console.log (c.filterValue);\n          }\n        });\n      }\n    }\n  }\n\n  columnVisibilityClicked($event, $o) {\n    $o.visible = !$o.visible;\n\n    this.storeVisibleColumns(this.columns);\n    this.bindVisibleColumns(this.columns);\n\n    $event.stopPropagation();\n  }\n\n  columnFiltersClicked($event, $o) {\n    $o.filterActive = !$o.filterActive;\n\n    this.storeFilteredColumns(this.columns);\n    this.bindFilteredColumns(this.columns);\n\n    if (this.readData) {\n      this.getData();\n    }\n\n\n    $event.stopPropagation();\n  }\n\n  attached() {\n\n    // if (this.readData) {\n    //   this.getData();\n    // } else if (this.dataSet) {\n    //   this.dataList = this.dataSet;\n    // }\n\n    if (this.dataSet) {\n      this.dataList = this.dataSet;\n    }\n\n    if (this.readData) {\n      this.subscriberBlock = this.eventAggregator.subscribe('block', o => {\n        this.getData();\n      });\n    }\n\n    this.initFilters ();\n    // this.taskQueue.queueMicroTask(() => {\n    //   initFilters ();\n    // });\n  }\n\n  detached() {\n    if (this.subscriberBlock)\n      this.subscriberBlock.dispose();\n  }\n\n  // bind(bindingContext, overrideContext) {\n  //   this.bindVisibleColumns(this.columns);\n  // }\n\n  pickerDateTime1Changed() {\n    //this.pickerDateTime1.methods.daysOfWeekDisabled([0,6]);\n    // if (this.pickerDateTime2)\n    //   this.pickerDateTime2.methods.minDate(this.pickerDateTime1.date);\n  }\n\n  pickerDateTime2Changed() {\n\n  }\n\n  pickerDateChanged() {\n  }\n\n\n  initFilters (){\n    $(document).on('click.bs.dropdown.data-api', '.keepopen', function (e) {\n      e.stopPropagation();\n    });\n  }\n}\n",null,null,"import {containerless, child, children, bindable, inject, BindingEngine, observable, customElement, processContent, TargetInstruction } from 'aurelia-framework';\nimport {computedFrom } from 'aurelia-framework';\nimport {AlertService} from './../../services/alert-service';\nimport moment from 'moment';\n\n\n@inject(AlertService, BindingEngine)\nexport class FooterAlertsCustomElement {\n\n\n  static messagesAcknCount = 0;\n  alertStackViewState = 'closed'; // opened, opening, closing\n  topAlertState = 'passiv'; // transit\n\n  constructor(alertService, bindingEngine) {\n    this.alertService = alertService;\n    this.bindingEngine = bindingEngine;\n  }\n\n  attached() {\n    this.observeData();\n  }\n\n  observeData() {\n    if (this.subscription) {\n      this.subscription.dispose();\n    }\n    this.subscription = this.bindingEngine\n      .expressionObserver(this, 'alertService._alertMessages.length')\n      //.collectionObserver(this.alertService._alertMessages)\n      //.subscribe(splices => {\n      //  this.dataChanged(splices);\n      //});\n      .subscribe((newValue, oldValue) => {\n        this.dataChanged(newValue, oldValue)\n      });\n  }\n\n  detached() {\n    if (this.subscription) {\n      this.subscription.dispose();\n    }\n  }\n\n  // dataChanged(splices) {\n  //   //console.debug(\"dataChanged\", splices);\n  //   this.topAlertState = 'transit';\n  //\n  //   setInterval(() => {\n  //     this.topAlertState = 'passiv';\n  //   }, 10000);\n  // }\n\n    dataChanged(newValue, oldValue) {\n      if (newValue != oldValue) {\n        this.topAlertState = 'passiv';\n        this.topAlertState = 'transit';\n\n        setTimeout(() => {\n          this.topAlertState = 'passiv';\n        }, 5000);\n      }\n    }\n\n\n  @computedFrom('alertService._alertMessages.length')\n  get alertMessages() {\n    return this.alertService._alertMessages;\n  }\n\n  @computedFrom('alertService._alertMessages.length', 'staticMessagesAcknCount', 'alertStackViewState')\n  get notReadMessagesCount() {\n    if (this.alertStackViewState == 'opened'){\n      return 0;\n    }\n\n    return this.alertService._alertMessages.length >= FooterAlertsCustomElement.messagesAcknCount ? this.alertService._alertMessages.length - FooterAlertsCustomElement.messagesAcknCount : this.alertService._alertMessages.length;\n  }\n\n  get staticMessagesAcknCount() {\n    return FooterAlertsCustomElement.messagesAcknCount;\n  }\n\n  @computedFrom('alertService._alertMessages.length')\n  get topMessage() {\n    return this.alertService._alertMessages[0];\n  }\n\n  toggleAlertStackPanel (){\n    if (this.alertStackViewState == 'closed'){\n\n      this.alertStackViewState = 'opened';\n      FooterAlertsCustomElement.messagesAcknCount = this.alertService._alertMessages.length;\n    }\n    else if (this.alertStackViewState == 'opened'){\n\n      this.alertStackViewState = 'closed';\n      FooterAlertsCustomElement.messagesAcknCount = this.alertService._alertMessages.length;\n    }\n  }\n\n  @computedFrom('alertStackViewState')\n  get alertPanelClass() {\n    if (this.alertStackViewState == 'closed')\n      return \"notifications-scroll-area d-none\";\n    else if (this.alertStackViewState == 'opened')\n      return \"notifications-scroll-area\";\n    else\n      return \"hidden\";\n  }\n\n\n  // bind(bindingContext) {\n  //   this.$parent = bindingContext;\n  // }\n}\n\n",null,"import {inject} from 'aurelia-framework';\nimport {ExpressionEvaluator} from './expression-evaluator';\nimport moment from 'moment';\n\n//\n// export class NumberFormatValueConverter {\n//   toView(value, format) {\n//     return numeral(value).format(format);\n//   }\n// }\n//\n//\n// //import numeral from 'numeral';\n//\n\n@inject(ExpressionEvaluator)\nexport class FieldValueDisplayValueConverter {\n\n  constructor(evaluator){\n    this.evaluator = evaluator;\n  }\n\n  toView(value, fieldlocator, format, typenarrow) {\n    let fl = fieldlocator;\n    if (fieldlocator && fieldlocator.indexOf(\"_{\") >= 0){\n      fl = fieldlocator.replace(new RegExp('_{', 'g'), '${');\n    } else {\n      fl = fieldlocator ? '${' + fieldlocator + '}' : undefined;\n    }\n\n    let message = fl ? this.evaluator.evaluateInterpolation(fl, value) : undefined;\n    //let message = fl ? this.evaluator.evaluateInterpolation('${' + fl + '}', value) : undefined;\n\n    if (typenarrow && message){\n      if (typenarrow === 'datetime'){\n        // message = new Date(parseInt(message,10));\n\n        if (format){\n          message = moment(message).format(format);\n        }\n      }\n    }\n\n    if (!message || ((typeof message) == 'string' && message.length <= 0)){\n      message = '--';\n    }\n\n    return message;\n    //return numeral(value).format(format);\n  }\n}\n\nexport class DateFormatValueConverter {\n  toView(value) {\n    return moment(value).format('DD/MM/YYYY HH:mm:ss');\n  }\n}\n","import {inject} from 'aurelia-dependency-injection';\nimport {ViewResources} from 'aurelia-templating';\nimport {\n  createOverrideContext,\n  Parser,\n  Expression,\n  Binary,\n  CallMember,\n  Conditional,\n  LiteralPrimitive,\n  LiteralString\n} from 'aurelia-binding';\nimport {BindingLanguage} from 'aurelia-templating';\n\n\n@inject(Parser, BindingLanguage)\nexport class InterpolationParser {\n  emptyStringExpression = new LiteralString('');\n  nullExpression = new LiteralPrimitive(null);\n  undefinedExpression = new LiteralPrimitive(undefined);\n  cache = {};\n\n  constructor(parser, bindingLanguage) {\n    this.parser = parser;\n    this.bindingLanguage = bindingLanguage;\n  }\n\n  parse(expressionText) {\n    if (this.cache[expressionText] !== undefined) {\n      return this.cache[expressionText];\n    }\n\n    const parts = this.bindingLanguage.parseInterpolation(null, expressionText);\n    if (parts === null) {\n      return new LiteralString(expressionText);\n    }\n    let expression = new LiteralString(parts[0]);\n    for (let i = 1; i < parts.length; i += 2) {\n      expression = new Binary(\n        '+',\n        expression,\n        new Binary(\n          '+',\n          this.coalesce(parts[i]),\n          new LiteralString(parts[i + 1])\n        )\n      );\n    }\n\n    this.cache[expressionText] = expression;\n\n    return expression;\n  }\n\n  coalesce(part) {\n    // part === null || part === undefined ? '' : part\n    return new Conditional(\n      new Binary(\n        '||',\n        new Binary('===', part, this.nullExpression),\n        new Binary('===', part, this.undefinedExpression)\n      ),\n      this.emptyStringExpression,\n      new CallMember(part, 'toString', [])\n    );\n  }\n}\n\n@inject(Parser, InterpolationParser, ViewResources)\nexport class ExpressionEvaluator {\n  constructor(parser, interpolationParser, resources) {\n    this.parser = parser;\n    this.interpolationParser = interpolationParser;\n    this.lookupFunctions = resources.lookupFunctions;\n  }\n\n  evaluate(expressionText, bindingContext) {\n    const expression = this.parser.parse(expressionText);\n    return this.evaluateInternal(expression, bindingContext);\n  }\n\n  evaluateInterpolation(expressionText, bindingContext) {\n    const expression = this.interpolationParser.parse(expressionText);\n    return this.evaluateInternal(expression, bindingContext);\n  }\n\n  evaluateInternal(expression, bindingContext) {\n    const scope = {\n      bindingContext,\n      overrideContext: createOverrideContext(bindingContext)\n    };\n    return expression.evaluate(scope, this.lookupFunctions);\n  }\n}\n","import {noView, children, child, bindable, inject, BindingEngine, customElement, processContent, TargetInstruction } from 'aurelia-framework';\n\n@noView\nexport class Column {\n  @bindable viewtype = 'text'; // 'download', 'key', 'datetime', 'date'\n\n  @bindable class = '';\n  @bindable resourcekey = '';\n  @bindable field = '';\n  @bindable format = undefined;\n  @bindable sortable = true;\n  @bindable defaultSort = undefined; // asc desc\n  @bindable canbefiltered = false;\n  @bindable filterField = undefined;\n\n\n  //@bindable downloadData = null;\n  @bindable downloadGetDataCallback = null;\n\n  //@bindable heading;\n  @bindable getviewdata = null;\n\n  @bindable visible = true;\n\n  @bindable filterOptions = undefined;\n  @bindable filterOptionField = undefined;\n  @bindable filterOptionKey = undefined;\n  @bindable filterExpressionBuilder = undefined;\n\n  @bindable filterActive = false;\n  filterValue = undefined;\n\n  sortTextView (row){\n    if (this.getviewdata) {\n      //console.log(this.getviewdata(row));\n      return this.getviewdata(row);\n    }\n  }\n\n  filterValueChanged(newValue) {\n    console.log('------------------------------filterValueChanged------------------------------');\n    console.log(newValue);\n\n  }\n\n  filterToJsonObject (){\n    let fv = {\n      key: this.storeKey,\n      act: this.filterActive\n    };\n\n    if (this.viewtype == 'text' || this.viewtype == 'key')\n      fv.fval = this.filterValue;\n    else if (this.viewtype == 'download')\n      fv.fval = this.filterValue;\n    else if (this.viewtype == 'date' || this.viewtype == 'datetime')\n      fv.fval = {\n        from: this.filterValue && this.filterValue.from ? this.filterValue.from.getTime() : null,\n        to: this.filterValue && this.filterValue.to ? this.filterValue.to.getTime(): null\n      };\n\n    return fv;\n  }\n\n  jsonObjectToFilter (json) {\n    this.filterActive = json.act;\n    if (this.viewtype == 'text' || this.viewtype == 'key')\n      this.filterValue = json.fval;\n    else if (this.viewtype == 'download')\n      this.filterValue = json.fval;\n    else if (this.viewtype == 'date' || this.viewtype == 'datetime')\n      if (json.fval) {\n        this.filterValue = {};\n        this.filterValue.from = json.fval.from ? new Date(json.fval.from) : undefined;\n        this.filterValue.to = json.fval.to ? new Date(json.fval.to) : undefined;\n      }\n      else\n        this.filterValue = null;\n  }\n\n  get filterExpression(){\n    let expr = undefined;\n\n    if (this.filterExpressionBuilder)\n      return this.filterExpressionBuilder({data: this.filterValue});\n\n    if (this.viewtype == 'text' || this.viewtype == 'key')\n      expr = [{\n          type: \"eq\",\n          path: this.filterField ? this.filterField : this.field,\n          value: this.filterValue\n        }];\n    else if (this.viewtype == 'download')\n      expr = [{\n        type: \"eq\",\n        path: this.filterField ? this.filterField : this.field,\n        value: this.filterValue\n      }];\n    else if (this.viewtype == 'date' || this.viewtype == 'datetime')\n      expr = [\n        {\n          type: \"gt\",\n          path: this.filterField ? this.filterField : this.field,\n          value: (this.filterValue && this.filterValue.from ? this.filterValue.from.getTime() : undefined)\n        },\n        {\n          type: \"lt\",\n          path: this.filterField ? this.filterField : this.field,\n          value: (this.filterValue && this.filterValue.to ? this.filterValue.to.getTime() : undefined)\n        }];\n    else\n      expr = undefined;\n\n      return expr;\n  }\n\n  get storeKey () {\n    return this.field ? (this.field + '-' + this.resourcekey) : '.-' + this.resourcekey;\n  }\n\n}\n","import {noView, children, child, bindable, inject, BindingEngine, customElement, processContent, TargetInstruction } from 'aurelia-framework';\n\n@noView\nexport class ColumnFilter {\n  @bindable viewtype = 'text'; // 'download', 'key', 'datetime'\n\n  @bindable active = true;\n  @bindable filter_options = undefined;\n\n  // get storeKey () {\n  //   return this.field ? (this.field + '-' + this.resourcekey) : '.-' + this.resourcekey;\n  // }\n\n}\n","import {\n  ValidationRenderer,\n  RenderInstruction,\n  ValidateResult\n} from 'aurelia-validation';\n\nexport class BootstrapFormValidationRenderer {\n\n  render(instruction) {\n    // console.log(\"================== BootstrapFormRenderer =================\");\n    // console.log(instruction);\n\n    for (let { result, elements } of instruction.unrender) {\n      if (!elements || elements.length === 0)\n        elements = this.lookupElementsByName(result.propertyName);\n\n      for (let element of elements) {\n        this.remove(element, result);\n      }\n    }\n\n    for (let { result, elements } of instruction.render) {\n      // console.log(\"========== add ==============\");\n      // console.log(elements);\n      if (!elements || elements.length === 0)\n        elements = this.lookupElementsByName(result.propertyName);\n\n      for (let element of elements) {\n        this.add(element, result);\n      }\n    }\n  }\n\n  lookupElementsByName(name){\n    // console.log(\"========== lookupElementsByName ==============\");\n    // console.log(name);\n    return document.getElementsByName(name);\n  }\n\n  add(element, result) {\n    if (result.valid) {\n      return;\n    }\n\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n\n\n    const formControl = formGroup.querySelector('.form-control');\n    if (!formControl) {\n      return;\n    }\n\n    formControl.classList.add('is-invalid');\n\n    const message = document.createElement('span');\n    message.className = 'invalid-feedback';\n    message.textContent = result.message;\n    message.style = \"display: unset\";\n    message.id = `validation-message-${result.id}`;\n\n    const inputGroup = element.closest('.input-group');\n    if (!inputGroup) {\n      return;\n    }\n    inputGroup.appendChild(message);\n  }\n\n  remove(element, result) {\n    if (result.valid) {\n      return;\n    }\n\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n\n    const formControl = formGroup.querySelector('.form-control');\n    if (!formControl) {\n      return;\n    }\n\n\n    const message = element.parentElement.querySelector(`#validation-message-${result.id}`);\n\n    if (message) {\n      message.parentElement.removeChild(message);\n\n      if (formControl.parentElement.querySelectorAll('.invalid-feedback').length === 0) {\n        formControl.classList.remove('is-invalid');\n      }\n    }\n  }\n}\n","import {CRUD} from \"../common/crud\";\nimport {validateTrigger, ValidationControllerFactory, ValidationRules} from 'aurelia-validation';\nimport {inject} from 'aurelia-framework';\nimport {BootstrapFormValidationRenderer} from '../resources/elements/bootstrap-form-validation-renderer';\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {IdentityService} from '../services/identity-service';\nimport {ChaincodeService} from '../services/chaincode-service';\n\nimport 'cleave.js';\n\n\n@inject(IdentityService, EventAggregator, ChaincodeService, ValidationControllerFactory)\nexport class Home extends CRUD {\n  orgList = [];\n  channelList = [];\n  discountValidationController = null;\n  discountRules_Validate;\n  fractionsDigits = 0;\n  operationsHistory = [];\n  constructor(identityService, eventAggregator, chaincodeService, factory) {\n    super(identityService, eventAggregator, chaincodeService);\n    this.discountValidationController = factory.createForCurrentScope();\n    this.discountValidationController.validateTrigger = validateTrigger.manual;\n    this.discountValidationController.addRenderer(new BootstrapFormValidationRenderer());\n\n    this.setupValidation();\n  }\n\n  setupValidation() {\n\n    ValidationRules.customRule(\n      'greater_zero',\n      (value, obj) => {\n        if (!value) {\n          return true\n        }\n        return value > 0;\n      },\n      `\\${$displayName} has to be greater than zero.`\n    );\n\n    ValidationRules.customRule(\n      'greater_balance',\n      (value, obj) => {\n        if (!value) {\n          return true\n        }\n        return this.organizationAccount.value.amount >= value;\n      },\n      `\\${$displayName} to transfer can't be greater than balance.`\n    );\n\n    this.discountRules_Validate = ValidationRules\n      .ensure(p => p.amount)\n      .displayName('Amount')\n      .required()\n      .satisfiesRule('greater_zero')\n      .satisfiesRule('greater_balance')\n      .rules;\n  }\n\n  attached() {\n    let decinpopt = {\n      numeral: true,\n      numeralDecimalScale: this.fractionsDigits,\n      numeralIntegerScale: 10,\n      numeralPositiveOnly: true,\n      delimiter: ''\n    };\n    var amount = new Cleave('#amount', decinpopt);\n\n    this.queryAll();\n    this.subscriberBlock = this.eventAggregator.subscribe('block', () => {\n      this.queryAll();\n    });\n\n    return super.attached()\n  }\n\n  detached() {\n    this.subscriberBlock.dispose();\n  }\n\n  queryAll() {\n    this.amount = undefined;\n    return Promise.all([\n      this.queryOrgs(),\n      this.queryChannels(),\n      this.queryOrganizations(),\n      this.getOrganizationAccount(),\n      this.getHistoryOperationsList()\n    ])\n  }\n\n\n  queryOrgs() {\n    this.chaincodeService.getOrgs('common').then(orgs => {\n      this.orgList = [];\n      orgs.forEach(k => {\n        let orgName = k.id;\n        if (!orgName.startsWith('Orderer') && !orgName.startsWith('orderer') && orgName !== this.identityService.org) {\n          this.orgList.push({key: orgName, value: orgName});\n        }\n\n      });\n    });\n  }\n\n  queryChannels() {\n    this.chaincodeService.getChannels().then(channels => {\n      this.channelList = channels;\n    });\n  }\n\n  transfer(receiver, amount) {\n    this.discountValidationController.reset();\n    try {\n      this.discountValidationController.validate({object: {\"amount\": amount}, rules: this.discountRules_Validate})\n        .then(result => {\n          if (result.valid) {\n            return this.chaincodeService.invoke(this.channel, this.chaincode, \"transfer\", [this.identityService.org, receiver, amount])\n          }\n        });\n    } catch (ex) {\n      console.debug(ex);\n    }\n\n  }\n\n  queryOrganizations() {\n    return this.chaincodeService.query(this.channel, this.chaincode, 'listOrganizations', [])\n  }\n\n  getOrganizationAccount() {\n    this.chaincodeService.query(this.channel, this.chaincode, 'getOrganizationAccount', []).then(account => {\n      this.organizationAccount = account;\n    })\n  }\n\n  getHistoryOperationsList() {\n    this.chaincodeService.query(this.channel, this.chaincode, 'listOperationsHistory', []).then(o => {\n      const a = o || [];\n      this['operationHistoryList'] = a.map(e => {\n        e.id = e.key;\n        return e;\n      });\n    });\n  }\n\n  getTokens() {\n    return this.chaincodeService.invoke(this.channel, this.chaincode, \"getTokens\", [\"1000000\"])\n  }\n\n  queryOperationHistory() {\n    let x = this.queryAll();\n    return new Promise((resolve, reject) => {\n      this.queryAll()\n        .then(ret => {\n          resolve(this.operationHistoryList);\n        })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n}\n",null,"import environment from './environment';\nimport {ValidationMessageProvider} from 'aurelia-validation';\nimport {I18N, Backend, TCustomAttribute} from 'aurelia-i18n';\nimport {PLATFORM, LogManager} from 'aurelia-framework';\nimport {ConsoleAppender} from 'aurelia-logging-console';\n\nLogManager.addAppender(new ConsoleAppender());\nLogManager.setLevel(LogManager.logLevel.warn);\n\n// import {TCustomAttribute} from 'aurelia-i18n';\n// import Backend from 'i18next-xhr-backend';\n\nexport function configure(aurelia) {\n  aurelia.use\n  .standardConfiguration()\n  //.plugin(PLATFORM.moduleName('aurelia-fontawesome'))\n\n  .plugin('aurelia-i18n', (instance) => {\n    let aliases = ['t', 'i18n'];\n    // add aliases for 't' attribute\n    TCustomAttribute.configureAliases(aliases);\n\n    // register backend plugin\n    instance.i18next.use(Backend.with(aurelia.loader));\n    // instance.i18next.use(Backend);\n\n    return instance.setup({\n      backend: {                                  // <-- configure backend settings\n        loadPath: './locales/{{lng}}/{{ns}}.json', // <-- XHR settings for where to get the files from\n      },\n      attributes: aliases,\n      lng: 'en',\n      fallbackLng: 'en',\n      debug: false\n    });\n  })\n  .plugin('aurelia-table')\n  .plugin('aurelia-validation')\n  .feature('resources');\n\n  aurelia.use.plugin('aurelia-bootstrap-datetimepicker', config => {\n    config.extra.bootstrapVersion = 4;\n\n    // you can also change the button class, default is shown below\n    config.extra.buttonClass = 'btn btn-outline-secondary';\n  });\n\n\n  // ValidationMessageProvider.prototype.getMessage = function(key) {\n  //   const i18n = aurelia.container.get(I18N);\n  //   const translation = i18n.tr(`errorMessages.${key}`);\n  //   return this.parser.parse(translation);\n  // };\n  //\n  // ValidationMessageProvider.prototype.getDisplayName = function(propertyName, displayName) {\n  //   if (displayName !== null && displayName !== undefined) {\n  //     return displayName;\n  //   }\n  //   const i18n = aurelia.container.get(I18N);\n  //   return i18n.tr(propertyName);\n  // };\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => {\n    let isLoggedIn = localStorage.getItem('jwt');\n    if (isLoggedIn) {\n      aurelia.setRoot();\n    }\n    else {\n      aurelia.setRoot('login');\n    }\n  });\n}\n","import {LogManager} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\nimport {IdentityService} from './services/identity-service';\nimport {AlertService} from './services/alert-service';\n\nlet log = LogManager.getLogger('Login');\n\n@inject(IdentityService, AlertService)\nexport class Login {\n\n  errorMessage = undefined;\n\n  constructor(identityService, alertService) {\n    this.identityService = identityService;\n    this.alertService = alertService;\n  }\n\n  get org() {\n    return this.identityService.org;\n  }\n\n  login() {\n    this.identityService.enroll(this.username, this.password).then(() => {\n      this.errorMessage = undefined;\n      this.alertService.success(`${this.username} logged in`)\n    }).catch(e => {\n      this.errorMessage = e;\n      this.alertService.error(`cannot enroll, caught ${e}`);\n    });\n  }\n\n}\n",null,"export default {\n  baseUrl: 'http://localhost:4000',\n  debug: true,\n  testing: false\n};\n","import environment from './environment';\n\nexport class Config {\n\n  static put(key, val) {\n    return localStorage.setItem(key, JSON.stringify(val));\n  }\n\n  static get(key) {\n    let val = localStorage.getItem(key);\n    if(val === 'undefined' || val === null) {\n      val = environment[key];\n      this.put(key, val);\n      return val;\n    }\n    else {\n      return JSON.parse(val);\n    }\n  }\n\n  static clear() {\n    localStorage.clear();\n  }\n\n  static getUrl(path) {\n    const baseUrl = Config.get('baseUrl');\n    if(baseUrl) {\n      return path ? `${baseUrl}/${path}` : baseUrl;\n    }\n    else {\n      return path ? `/${path}` : '/';\n    }\n  }\n\n}\n","import {LogManager} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {IdentityService} from '../services/identity-service';\nimport {ChaincodeService} from '../services/chaincode-service';\nimport {ValidationControllerFactory, ValidationRules} from 'aurelia-validation';\n\nlet log = LogManager.getLogger('CRUD');\n\n@inject(IdentityService, EventAggregator, ChaincodeService, ValidationControllerFactory)\nexport class CRUD {\n  channel = 'common';\n  chaincode = 'token-transfer-chaincode';\n  organizationAccount = undefined;\n\n  constructor(identityService, eventAggregator, chaincodeService) {\n    this.identityService = identityService;\n    this.eventAggregator = eventAggregator;\n    this.chaincodeService = chaincodeService;\n  }\n\n  attached() {\n    this.queryAll();\n\n    this.subscriberBlock = this.eventAggregator.subscribe('block', o => {\n      this.queryAll();\n    });\n  }\n\n  detached() {\n    this.subscriberBlock.dispose();\n  }\n\n  queryAll() {\n  }\n\n  query(entity) {\n    let opName = 'list'.concat(this.capitalize(entity));\n    return this.chaincodeService.query(this.channel, this.chaincode, opName, []).then(o => {\n      const a = o || [];\n      this[entity + 'List'] = a.map(e => {\n        e.id = e.key;\n        return e;\n      });\n    });\n  }\n\n  put(o, entity) {\n    if (!o.value.type) {\n      o.value.type = entity\n    }\n    if (o.key) {\n      let opName = 'update'.concat(this.capitalize(entity));\n      return this.chaincodeService.invoke(this.channel, this.chaincode, opName, [o.key, JSON.stringify(o.value)]).then(() => {\n        this.removeForm(entity);\n      });\n    } else {\n      let opName = 'create'.concat(this.capitalize(entity));\n      return this.chaincodeService.invoke(this.channel, this.chaincode, opName, [JSON.stringify(o.value)]).then(() => {\n        this.removeForm(entity);\n      });\n    }\n  }\n\n  remove(entity, id) {\n    let opName = 'delete'.concat(this.capitalize(entity));\n    return this.chaincodeService.invoke(this.channel, this.chaincode, opName, [id]).then(() => {\n      this.removeForm(entity)\n    });\n  }\n\n  removeForm(entity) {\n    let currentTagName = this.getCurrentTag(entity);\n    // console.info('removeForm :: ', currentTagName);\n    this[currentTagName] = null;\n    this[currentTagName] = undefined;\n  }\n\n  setCurrent(entity, id) {\n    let opName = 'get'.concat(this.capitalize(entity));\n    return this.chaincodeService.query(this.channel, this.chaincode, opName, [id]).then(o => {\n      this[this.getCurrentTag(entity)] = {key: id, value: o, id: id};\n      // return this[this.getCurrentTag(entity)];\n    });\n  }\n\n  setNew(entity) {\n    this[this.getCurrentTag(entity)] = {new: true, value: {}};\n  }\n\n  getCurrentTag(entity) {\n    return entity + (this.canEdit(entity) ? 'Edit' : 'View');\n  }\n\n  canEdit(entity) {\n    return true;\n  }\n\n  capitalize(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }\n\n  convertDate(date) {\n    let dateArr = date.split('/');\n    return new Date(parseInt(dateArr[2], 10), parseInt(dateArr[0], 10) - 1, parseInt(dateArr[1], 10)).getTime()\n  }\n}\n","import 'bootstrap';\nimport {I18N} from 'aurelia-i18n';\nimport {LogManager} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\nimport {IdentityService} from './services/identity-service';\nimport {SocketService} from './services/socket-service';\nimport {AlertService} from './services/alert-service';\nimport {ConfigService} from './services/config-service';\n\n\nlet log = LogManager.getLogger('App');\n\n@inject(I18N, IdentityService, SocketService, AlertService, ConfigService)\nexport class App {\n  constructor(i18n, identityService, socketService, alertService, configService) {\n    this.i18n = i18n;\n    // this.i18n.setLocale(navigator.language || 'en');\n    this.i18n.setLocale('en');\n    this.identityService = identityService;\n    this.socketService = socketService;\n    this.alertService = alertService;\n    this.configService = configService;\n    this.role = '';\n  }\n\n  configureRouter(config, router) {\n    config.title = \"Token transfer\";\n    let routes = [\n      {route: ['', 'home'], name: 'home', moduleId: './pages/home', nav: true, title: 'Home'}\n    ];\n    config.map(routes);\n    this.router = router;\n  }\n\n  activate() {\n    return this.configService.get().then(res => {\n        this.role = res.org;\n      }\n    )\n  }\n\n  attached() {\n    this.username = this.identityService.username;\n    this.org = this.identityService.org;\n\n    this.socketService.subscribe();\n  }\n\n  detached() {\n    log.debug('detached');\n    // this.socketService.disconnect();\n  }\n\n  logout() {\n    this.identityService.logout().then(() => {\n      this.alertService.success(`logged out`);\n    }).catch(e => {\n      this.alertService.error(`cannot log out, caught ${e}`);\n    });\n  }\n\n}\n",null],"sourceRoot":".."}